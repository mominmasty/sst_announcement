(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8502:(e,t,r)=>{Promise.resolve().then(r.bind(r,1626))},1626:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r(5155),s=r(9761),l=r(9213),n=r(2115),i=r(5007),o=r(1027),d=r(9602);let c=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,d.cn)(c({variant:r}),t),...s})}var m=r(4085),x=r(8671),h=r(2173),g=r(1520);let v=(e,t)=>e&&({user:"student",superadmin:"super_admin",student:"student",student_admin:"student_admin",admin:"admin",super_admin:"super_admin"})[e]||(t?"admin":"student"),b=e=>["admin","student_admin","super_admin"].includes(e),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"student",r=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4?arguments[4]:void 0),a=b(t),s=new Date;if(!a&&!r){if("scheduled"===e.status||e.category&&"scheduled"===e.category.toLowerCase())return!1;if(e.scheduled_at){let t=new Date(e.scheduled_at);if(!isNaN(t.getTime())&&t>s)return!1}}return!!a||!("draft"===e.status||"under_review"===e.status||"rejected"===e.status||!1===e.is_active||(0,g.D)(e))},f=(e,t)=>"all"===t?e:e.filter(e=>e.category.toLowerCase()===t.toLowerCase()),j=(e,t)=>{if(!t.trim())return e;let r=t.toLowerCase();return e.filter(e=>e.title.toLowerCase().includes(r)||e.description.toLowerCase().includes(r))},y=(e,t)=>[...e].sort((e,t)=>{if(e.is_emergency&&!t.is_emergency)return -1;if(!e.is_emergency&&t.is_emergency)return 1;let r=e.priority_until?new Date(e.priority_until):null,a=t.priority_until?new Date(t.priority_until):null,s=new Date,l=r&&r>s&&"urgent"===e.status,n=a&&a>s&&"urgent"===t.status;if(l&&!n)return -1;if(!l&&n)return 1;let i=new Date(e.created_at||0);return new Date(t.created_at||0).getTime()-i.getTime()}),w=(e,t)=>e.filter(e=>"super_admin"===t||"admin"===t||"student_admin"===t||"active"===e.status&&!1!==e.is_active),N=e=>b(e),k=e=>"super_admin"===e,C=e=>({student:"Student",student_admin:"Student Admin",admin:"Admin",super_admin:"Super Admin"})[e]||"Student",_=e=>{switch(e.toLowerCase()){case"college":return"hover:shadow-blue-500/30";case"tech":case"tech-events":case"tech-workshops":return"hover:shadow-purple-500/30";case"academic":return"hover:shadow-green-500/30";case"sports":return"hover:shadow-orange-500/30";default:return"hover:shadow-gray-500/30"}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,[r,a]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(0===e){a(0);return}let r=e/(t/16),s=0,l=setInterval(()=>{(s+=r)>=e?(a(e),clearInterval(l)):a(Math.floor(s))},16);return()=>clearInterval(l)},[e,t]),r},A=[{value:"college",label:"College"},{value:"tech-events",label:"Tech Events"},{value:"tech-workshops",label:"Tech Workshops"},{value:"academic",label:"Academic"},{value:"sports",label:"Sports"},{value:"cultural",label:"Cultural"},{value:"emergency",label:"Emergency"}],S={title:"",description:"",category:"college",expiry_date:"",scheduled_at:"",reminder_time:"",is_active:!0,status:"active",send_email:!1,priority_until:null,is_emergency:!1},M=[1,2,4,6,12,24],z=e=>{var t,r,s,l,i;let{isOpen:o,onClose:d,onSubmit:c,loading:u=!1,initialData:x,variant:g="standard",emergencyMode:v=!1}=e,{user:b}=(0,h.Km)(),p=(null==b?void 0:b.role)==="super_admin",[f,j]=(0,n.useState)(S),[y,w]=(0,n.useState)(2),[N,k]=(0,n.useState)(4),C="emergency"===g||v;if((0,n.useEffect)(()=>{o&&(j({...S,...x||{},is_emergency:C}),w(2),k(4))},[o,x,C]),(0,n.useEffect)(()=>{o&&!p&&f.scheduled_at&&j(e=>({...e,scheduled_at:""})),o&&C&&f.scheduled_at&&j(e=>({...e,scheduled_at:""}))},[o,p,C,f.scheduled_at]),!o)return null;let _=async e=>{e.preventDefault();let t={...f};if(C){if("emergency"===g){let e=new Date(Date.now()+36e5*y);t.priority_until=e.toISOString(),t.expiry_date=e.toISOString(),t.status="urgent",t.send_email=!0,t.is_active=!0}else{let e=new Date(new Date().getTime()+36e5*N);t={...f,is_emergency:!0,is_active:!0,emergency_expires_at:e.toISOString(),scheduled_at:"",expiry_date:"",reminder_time:""}}}else t.priority_until=t.priority_until||null;await c(t),j(S),w(2),k(4)};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-300",onClick:e=>e.target===e.currentTarget&&d(),children:(0,a.jsxs)("div",{className:"bg-black rounded-3xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300 flex flex-col",children:[(0,a.jsx)("div",{className:"relative p-6 border-b border-gray-900 ".concat(C?"bg-gradient-to-r from-red-900/40 via-red-900/10 to-black":"bg-black"),children:(0,a.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"relative w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10 ".concat(C?"bg-gradient-to-br from-red-600 to-orange-500":"bg-black"),children:(0,a.jsx)("svg",{className:"w-6 h-6 ".concat(C?"text-white animate-pulse":"text-white"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-red-400",children:"\uD83D\uDEA8"}),"emergency"===g?"Emergency Broadcast":"Create Emergency Announcement"]}):"Create New Announcement"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:C?"emergency"===g?"Send an urgent campus-wide alert. These announcements are prioritized for all users.":"Emergency announcements are immediately visible and active":"Fill in the details below to create your announcement"})]})]}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-white transition-all duration-200 p-2 hover:bg-gray-900 rounded-lg hover:rotate-90",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("form",{onSubmit:_,className:"flex-1 overflow-y-auto p-6 space-y-6 bg-black custom-scrollbar",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),"Title ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"text",required:!0,value:f.title,onChange:e=>j({...f,title:e.target.value}),className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40 transition-all duration-200 hover:border-gray-700",placeholder:"Enter a compelling title for your announcement"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Description ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("textarea",{required:!0,value:f.description,onChange:e=>j({...f,description:e.target.value}),rows:5,className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-600/40 focus:border-purple-600/40 transition-all duration-200 resize-none hover:border-gray-700",placeholder:"Provide detailed information about your announcement..."}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[f.description.length," characters"]})]}),C&&(0,a.jsxs)("div",{className:"space-y-3 rounded-2xl border border-red-800/50 bg-red-900/10 p-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-red-200",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"})}),"emergency"===g?"Priority window":"Duration (How long it will be on top)",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("p",{className:"text-xs text-red-200/80",children:"emergency"===g?"Emergency alerts stay pinned to the top and expire completely after this time.":"Emergency announcements will automatically expire and be removed after the specified duration"}),"emergency"===g?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(e=>{let t=y===e;return(0,a.jsxs)("button",{type:"button",onClick:()=>w(e),className:"px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-200 ".concat(t?"bg-red-600 text-white shadow-lg shadow-red-600/40":"bg-red-900/40 text-red-200 hover:bg-red-800/40"),children:[e,"h"]},e)})}):(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 space-y-3",children:(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"number",min:"1",max:"168",value:N,onChange:e=>{k(Math.max(1,Math.min(168,parseInt(e.target.value)||1)))},className:"w-20 px-4 py-2.5 bg-black/70 border border-red-500/40 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-600/50 focus:border-red-600/50 transition-all duration-200 hover:border-red-500/60 text-center font-semibold",placeholder:"4",required:!0}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white/90 text-sm font-medium",children:"hours"}),(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:"(1-168)"})]})]})})}),(0,a.jsxs)("p",{className:"text-xs text-red-100",children:["Will expire completely on"," ","emergency"===g?new Date(Date.now()+36e5*y).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"}):new Date(new Date().getTime()+36e5*N).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Category ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("select",{value:f.category,onChange:e=>j({...f,category:e.target.value}),className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-emerald-600/40 focus:border-emerald-600/40 transition-all duration-200 hover:border-gray-700 cursor-pointer",children:A.map(e=>(0,a.jsx)("option",{value:e.value,className:"bg-gray-900",children:e.label},e.value))})]}),!C&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Schedule & Timing"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Expiry Date"]}),(0,a.jsx)("input",{type:"datetime-local",value:f.expiry_date||"",onChange:e=>j({...f,expiry_date:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]}),p&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5 text-cyan-500/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Scheduled At"]}),(0,a.jsx)("input",{type:"datetime-local",value:f.scheduled_at||"",onChange:e=>j({...f,scheduled_at:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Reminder Time"]}),(0,a.jsx)("input",{type:"datetime-local",value:f.reminder_time||"",onChange:e=>j({...f,reminder_time:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,a.jsxs)("svg",{className:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,a.jsxs)("div",{className:"bg-gray-900/30 border border-gray-800/50 rounded-xl p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg transition-colors duration-200 ".concat(f.is_active||C?"bg-emerald-500/20 text-emerald-400":"bg-gray-800/50 text-gray-500"),children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-200 block",children:C?"Active (Emergency)":f.is_active?"Active":"Inactive"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:C?"Emergency announcements are always active":f.is_active?"Announcement will be visible":"Announcement will be hidden"})]})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center ".concat(C?"cursor-not-allowed opacity-70":"cursor-pointer group-hover:scale-105"," transition-transform duration-200"),children:[(0,a.jsx)("input",{type:"checkbox",checked:!!C||null===(t=f.is_active)||void 0===t||t,onChange:e=>{C||j({...f,is_active:e.target.checked})},disabled:C,className:"sr-only"}),(0,a.jsx)("div",{className:"relative w-14 h-7 rounded-full transition-all duration-300 ease-in-out ".concat(null===(r=f.is_active)||void 0===r||r||C?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-lg shadow-emerald-500/50":"bg-gray-700 border border-gray-600"),children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out ".concat(null===(s=f.is_active)||void 0===s||s||C?"translate-x-7":"translate-x-0"),children:(null===(l=f.is_active)||void 0===l||l||C)&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})})]})]}),(0,a.jsx)("div",{className:"h-px bg-gray-800/50"}),(0,a.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg transition-colors duration-200 ".concat(f.send_email?"bg-blue-500/20 text-blue-400":"bg-gray-800/50 text-gray-500"),children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-200 block",children:"Send Email Notification"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:f.send_email?"Users will receive email alerts":"No email will be sent"})]})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer group-hover:scale-105 transition-transform duration-200",children:[(0,a.jsx)("input",{type:"checkbox",checked:null!==(i=f.send_email)&&void 0!==i&&i,onChange:e=>j({...f,send_email:e.target.checked}),className:"sr-only"}),(0,a.jsx)("div",{className:"relative w-14 h-7 rounded-full transition-all duration-300 ease-in-out ".concat(f.send_email?"bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg shadow-blue-500/50":"bg-gray-700 border border-gray-600"),children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out ".concat(f.send_email?"translate-x-7":"translate-x-0"),children:f.send_email&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-800/50",children:[(0,a.jsx)(m.$,{type:"submit",disabled:u,className:"flex-1 font-semibold py-3 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg ".concat(C?"bg-gradient-to-r from-red-600 via-red-600 to-red-600 hover:from-red-700 hover:via-red-700 hover:to-red-700 text-white shadow-red-500/20 hover:shadow-red-500/30":"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 hover:from-blue-700 hover:via-purple-700 hover:to-blue-700 text-white shadow-blue-500/20 hover:shadow-blue-500/30"),children:u?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C?"Creating Emergency...":"Creating..."]}):(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),C?"Create Emergency Announcement":"Create Announcement"]})}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:d,className:"px-6 py-3 border-gray-700/50 text-gray-300 hover:bg-gray-800/50 hover:text-white hover:border-gray-600 rounded-xl transition-all duration-200",children:"Cancel"})]})]})]})})},D=e=>{var t;let{isOpen:r,onClose:s,announcement:l,onSubmit:i,loading:o=!1}=e,{user:d}=(0,h.Km)(),c=(null==d?void 0:d.role)==="super_admin",[u,x]=(0,n.useState)({title:"",description:"",category:"college",expiry_date:"",scheduled_at:"",reminder_time:"",is_active:!0,status:c?"active":"under_review"});if((0,n.useEffect)(()=>{if(l){var e;x({title:l.title,description:l.description,category:l.category,expiry_date:(0,g.r)(l.expiry_date),scheduled_at:(0,g.r)(l.scheduled_at),reminder_time:(0,g.r)(l.reminder_time),is_active:null===(e=l.is_active)||void 0===e||e,status:c?l.status||"active":"under_review"})}},[l,c]),!r||!l||!l.id)return null;let v=async e=>{e.preventDefault();let t={...u};c||(t.status="under_review",delete t.scheduled_at),await i(l.id,t)};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,a.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-900 bg-black",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-900 border border-gray-800 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Edit Announcement"})]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("form",{onSubmit:v,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",required:!0,value:u.title,onChange:e=>x({...u,title:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter announcement title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),(0,a.jsx)("textarea",{required:!0,value:u.description,onChange:e=>x({...u,description:e.target.value}),rows:4,className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter announcement description"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),(0,a.jsx)("select",{value:u.category,onChange:e=>x({...u,category:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),(0,a.jsx)("input",{type:"datetime-local",value:u.expiry_date||"",onChange:e=>x({...u,expiry_date:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scheduled At"}),(0,a.jsx)("input",{type:"datetime-local",value:u.scheduled_at||"",onChange:e=>x({...u,scheduled_at:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reminder Time"}),(0,a.jsx)("input",{type:"datetime-local",value:u.reminder_time||"",onChange:e=>x({...u,reminder_time:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,a.jsx)("input",{type:"checkbox",checked:null===(t=u.is_active)||void 0===t||t,onChange:e=>x({...u,is_active:e.target.checked}),className:"rounded"}),"Active"]}),c?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:u.status||"active",onChange:e=>x({...u,status:e.target.value}),className:"px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"archived",children:"Archived"})]})]}):(0,a.jsx)("div",{className:"flex-1 min-w-[200px] px-4 py-3 bg-blue-500/10 border border-blue-500/30 rounded-xl text-xs text-blue-200",children:"Updates will be sent back to the superadmin review queue. Once approved, scheduling and activation will be handled by the superadmin."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(m.$,{type:"submit",disabled:o,className:"flex-1 bg-gray-900 hover:bg-gray-800 border border-gray-800 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:o?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Announcement"}),(0,a.jsx)(m.$,{type:"button",variant:"outline",onClick:s,className:"border-gray-900 text-gray-300 hover:bg-gray-900",children:"Cancel"})]})]})]})})},E=e=>{let{isOpen:t,announcementId:r,announcementTitle:s,onClose:l,onConfirm:n,loading:o}=e;return t&&r?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md bg-gray-900/95 backdrop-blur-xl border border-red-500/50 shadow-2xl shadow-red-500/20",children:[(0,a.jsx)(i.aR,{className:"border-b border-red-500/30 pb-4",children:(0,a.jsxs)(i.ZB,{className:"text-xl font-bold text-white flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})})}),"Delete Announcement"]})}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Are you sure?"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"This will permanently delete the announcement:"}),(0,a.jsxs)("p",{className:"text-white font-medium mt-2 p-2 bg-gray-800/50 rounded-lg",children:['"',s||"Untitled Announcement",'"']}),(0,a.jsx)("p",{className:"text-red-300 text-sm mt-2",children:"This action cannot be undone."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(m.$,{variant:"outline",onClick:l,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",disabled:o,children:"Cancel"}),(0,a.jsx)(m.$,{onClick:()=>{n(r)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white",disabled:o,children:o?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Deleting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})}),"Delete"]})})]})]})})]})}):null},B=e=>{var t;let{isOpen:r,onClose:s,stats:l,loading:i=!1}=e;if(!r)return null;let[o,d]=(0,n.useState)(""),[c,u]=(0,n.useState)("desc"),x=(null!==(t=null==l?void 0:l.top_announcements)&&void 0!==t?t:[]).filter(e=>e.title.toLowerCase().includes(o.toLowerCase())).sort((e,t)=>"desc"===c?t.views-e.views:e.views-t.views);return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",onClick:e=>e.target===e.currentTarget&&s(),children:(0,a.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto custom-scrollbar-analytics m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-900 bg-black flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"})]}),(0,a.jsx)(m.$,{variant:"ghost",onClick:s,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-6",children:i?(0,a.jsxs)("div",{className:"py-10 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"}),(0,a.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"}),(0,a.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 w-40 bg-white/5 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-16 rounded-xl bg-white/5 animate-pulse"}),(0,a.jsx)("div",{className:"h-16 rounded-xl bg-white/5 animate-pulse"})]})]}):l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-blue-400 mb-2",children:l.total_announcements}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Total Announcements"})]}),(0,a.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-emerald-400 mb-2",children:l.total_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Total Users"})]}),(0,a.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,a.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-cyan-400 mb-2",children:l.active_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Active Users"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Top Announcements"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Search and sort by views to explore performance."}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[(0,a.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),placeholder:"Search by title...",className:"w-full md:flex-1 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40"}),(0,a.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full md:w-40 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-600/40 focus:border-purple-600/40",children:[(0,a.jsx)("option",{value:"desc",className:"bg-black",children:"DESC"}),(0,a.jsx)("option",{value:"asc",className:"bg-black",children:"ASC"})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:x.length>0?x.map((e,t)=>(0,a.jsx)("div",{className:"bg-black/70 rounded-lg p-4 border border-gray-800 flex items-center justify-between hover:bg-gray-900/40 hover:border-gray-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold shadow",children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[e.views," views"]})]})]})},e.id)):(0,a.jsx)("div",{className:"text-gray-400 text-center py-4",children:"No results"})})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"text-gray-400",children:"No analytics data available"})})})]})})},W=e=>{let{isOpen:t,onClose:r,user:s,onRoleChange:l,loading:i}=e,[o,d]=(0,n.useState)(v(s.role,s.is_admin));return t?(0,a.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl w-full max-w-md m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Change User Role"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Changing role for: ",(0,a.jsx)("span",{className:"text-white font-medium",children:s.email})]})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsx)("div",{className:"space-y-3",children:[{value:"student",label:"Student",description:"Basic user access"},{value:"student_admin",label:"Student Admin",description:"Admin access with lower announcement priority"},{value:"admin",label:"Admin",description:"Full admin access with higher announcement priority"},{value:"super_admin",label:"Super Admin",description:"Highest access level, can manage all users"}].map(e=>(0,a.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ".concat(o===e.value?"border-blue-500 bg-blue-500/10":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/50"),children:[(0,a.jsx)("input",{type:"radio",name:"role",value:e.value,checked:o===e.value,onChange:e=>d(e.target.value),className:"mt-1 text-blue-500 focus:ring-blue-500 focus:ring-offset-gray-900"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:e.description})]})]},e.value))})}),(0,a.jsxs)("div",{className:"p-6 border-t border-gray-700 flex gap-3 justify-end",children:[(0,a.jsx)(m.$,{onClick:r,variant:"outline",disabled:i,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),(0,a.jsx)(m.$,{onClick:()=>{l(s.id,o)},disabled:i||o===v(s.role,s.is_admin),className:"bg-blue-600 hover:bg-blue-700",children:i?"Updating...":"Update Role"})]})]})}):null},T=e=>{let{isOpen:t,onClose:r,users:s,loading:l=!1,onRefresh:i}=e,[o,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),[j,y]=(0,n.useState)(null),[w,N]=(0,n.useState)(null),[_,L]=(0,n.useState)(!1),[A,S]=(0,n.useState)(null),{user:M}=(0,h.Km)(),z=k(v(null==M?void 0:M.role,null==M?void 0:M.is_admin)),D=async()=>{if(!o.trim()){y("Please enter an email address");return}b(!0),y(null),N(null);try{let e=await x.K.searchUsersByEmail(o);e.success&&e.data?(u(e.data),N("User found successfully")):(u(null),y(e.error||"User not found"))}catch(e){u(null),y("Failed to search user. Please try again."),console.error("Search error:",e)}finally{b(!1)}},E=async(e,t)=>{if(!e){y("Invalid user ID");return}f(e),y(null),N(null);try{let r=await x.K.updateUserAdminStatus(e,!t);r.success?(N("User ".concat(t?"removed from admin":"promoted to admin"," successfully")),i(),c&&c.id===e&&u({...c,is_admin:!t}),setTimeout(()=>N(null),3e3)):y(r.error||"Failed to update user status")}catch(e){var r,a;y((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||(null==e?void 0:e.message)||"Failed to update user status"),console.error("Failed to update user status:",e)}finally{f(null)}},B=async(e,t)=>{f(e),y(null),N(null);try{let r=await x.K.updateUserRole(e,t);r.success?(N("User role updated to ".concat(C(t)," successfully")),i(),c&&c.id===e&&u({...c,role:t}),L(!1),S(null),setTimeout(()=>N(null),3e3)):y(r.error||"Failed to update user role")}catch(e){var r,a;y((null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||(null==e?void 0:e.message)||"Failed to update user role"),console.error("Failed to update user role:",e)}finally{f(null)}},T=e=>{S(e),L(!0),y(null),N(null)};return t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-xl animate-in fade-in duration-200",onClick:e=>e.target===e.currentTarget&&r(),children:(0,a.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-y-auto custom-scrollbar m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-900 bg-black flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"User Management"})]}),(0,a.jsx)(m.$,{variant:"ghost",onClick:r,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[j&&(0,a.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,a.jsx)("span",{children:j}),(0,a.jsx)("button",{onClick:()=>y(null),className:"text-red-400 hover:text-red-300",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w&&(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,a.jsx)("span",{children:w}),(0,a.jsx)("button",{onClick:()=>N(null),className:"text-green-400 hover:text-green-300",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Search User by Email"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"email",value:o,onChange:e=>{d(e.target.value),y(null)},onKeyPress:e=>"Enter"===e.key&&D(),placeholder:"Enter email address",className:"flex-1 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40"}),(0,a.jsx)(m.$,{className:"bg-blue-600 hover:bg-blue-700",onClick:D,disabled:g,children:g?"Searching...":"Search"})]}),c&&(0,a.jsx)("div",{className:"mt-4 bg-black/70 rounded-lg p-4 border border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:c.email}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[c.username||"No username",(()=>{let e=v(c.role,c.is_admin),t={super_admin:{label:"SUPER ADMIN",bg:"bg-purple-600"},admin:{label:"ADMIN",bg:"bg-blue-600"},student_admin:{label:"STUDENT ADMIN",bg:"bg-green-600"},student:{label:"STUDENT",bg:"bg-gray-600"}},r=t[e]||t.student;return(0,a.jsx)("span",{className:"ml-2 px-2 py-1 ".concat(r.bg," text-white text-xs rounded"),children:r.label})})()]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:z?(0,a.jsx)(m.$,{onClick:()=>T(c),disabled:p===c.id,variant:"default",size:"sm",children:p===c.id?"Updating...":"Change Role"}):(0,a.jsx)(m.$,{onClick:()=>E(c.id,c.is_admin||!1),disabled:p===c.id,variant:c.is_admin?"outline":"default",size:"sm",className:c.is_admin?"border-red-600 text-red-400 hover:bg-red-600/20":"",children:p===c.id?"Updating...":c.is_admin?"Remove Admin":"Make Admin"})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3",children:["All Users (",s.length,")"]}),l?(0,a.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading users..."}):(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar-thin",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-black/70 rounded-lg p-4 border border-gray-800 flex items-center justify-between hover:bg-gray-900/40 hover:border-gray-700 transition-colors",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.email}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[e.username||"No username",(()=>{let t=v(e.role,e.is_admin),r={super_admin:{label:"SUPER ADMIN",bg:"bg-purple-600"},admin:{label:"ADMIN",bg:"bg-blue-600"},student_admin:{label:"STUDENT ADMIN",bg:"bg-green-600"},student:{label:"STUDENT",bg:"bg-gray-600"}},s=r[t]||r.student;return(0,a.jsx)("span",{className:"ml-2 px-2 py-1 ".concat(s.bg," text-white text-xs rounded"),children:s.label})})()]})]}),z?(0,a.jsx)(m.$,{onClick:()=>T(e),disabled:p===e.id,variant:"default",size:"sm",children:p===e.id?"Updating...":"Change Role"}):(0,a.jsx)(m.$,{onClick:()=>E(e.id,e.is_admin||!1),disabled:p===e.id,variant:e.is_admin?"outline":"default",size:"sm",className:e.is_admin?"border-red-600 text-red-400 hover:bg-red-600/20":"",children:p===e.id?"Updating...":e.is_admin?"Remove Admin":"Make Admin"})]},e.id))})]})]})]})}),_&&A&&(0,a.jsx)(W,{isOpen:_,onClose:()=>{L(!1),S(null)},user:A,onRoleChange:B,loading:p===A.id})]}):null};var U=r(4830),V=r(4942);r(911);let H=e=>{var t,r,l;let{onViewAllAnnouncements:o}=e,[d,c]=(0,n.useState)(!1),[b,C]=(0,n.useState)([]),[A,S]=(0,n.useState)(!0),[M,W]=(0,n.useState)(!1),[H,F]=(0,n.useState)(!1),[R,$]=(0,n.useState)(!1),[I,K]=(0,n.useState)(null),[O,P]=(0,n.useState)(!1),[Z,q]=(0,n.useState)(null),[G,X]=(0,n.useState)(null),[Y,J]=(0,n.useState)(!1),[Q,ee]=(0,n.useState)(!1),[et,er]=(0,n.useState)(null),[ea,es]=(0,n.useState)(!1),[el,en]=(0,n.useState)([]),[ei,eo]=(0,n.useState)(!1),[ed,ec]=(0,n.useState)("standard"),[eu,em]=(0,n.useState)(void 0),ex=(0,n.useRef)(null),{user:eh}=(0,h.Km)(),{signOut:eg}=(0,s.ho)(),{toasts:ev,showToast:eb,removeToast:ep}=(0,V.d)(),[ef,ej]=(0,n.useState)(""),[ey,ew]=(0,n.useState)("all"),[eN,ek]=(0,n.useState)(null),eC=v(null==eh?void 0:eh.role,null==eh?void 0:eh.is_admin),e_="super_admin"===eC,eL=k(eC),eA=N(eC);console.log("\uD83D\uDC64 Current User Info:",{email:null==eh?void 0:eh.email,role:null==eh?void 0:eh.role,is_admin:null==eh?void 0:eh.is_admin,derivedRole:eC,isSuperAdmin:e_,canManageOtherUsers:eL,canDoAdminActions:eA});let eS=b.filter(e=>p(e,eC,(null==eh?void 0:eh.is_admin)||!1,null==eh?void 0:eh.id,(null==eh?void 0:eh.role)==="super_admin"));console.log("\uD83D\uDCE2 Announcement Filtering:",{totalAnnouncements:b.length,visibleAnnouncements:eS.length,scheduledCount:b.filter(e=>"scheduled"===e.status).length,scheduledVisible:eS.filter(e=>"scheduled"===e.status).length,allStatuses:b.map(e=>({title:e.title,status:e.status,scheduled_at:e.scheduled_at}))});let eM=y(w(eS,eC),eC),ez=L(eS.length),eD=L(eS.filter(e=>"college"===e.category.toLowerCase()).length),eE=L(eS.filter(e=>"tech"===e.category.toLowerCase()||"tech-workshops"===e.category.toLowerCase()||"tech-events"===e.category.toLowerCase()).length),eB=j(f(eM,ey),ef),eW=e=>{q(e),P(!0)},eT=async e=>{F(!0);try{let t=await x.K.createAnnouncement(e);if(t.success){let e=await x.K.getAnnouncements();e.success&&e.data&&C(Array.isArray(e.data)?e.data:[]),W(!1),em(void 0),ec("standard");let r=t.data;if((null==eh?void 0:eh.role)!=="super_admin")eb("Announcement created successfully! Sent to superadmin for review.","success");else if(null==r?void 0:r.scheduled_at){let e=new Date(r.scheduled_at);eb("Announcement created successfully! Scheduled for ".concat(e.toLocaleString()),"success")}else eb("Announcement created successfully!","success")}else eb(t.error||"Failed to create announcement","error")}catch(e){console.error("Failed to create announcement:",e),eb("An error occurred while creating the announcement","error")}finally{F(!1)}},eU=async(e,t)=>{$(!0);try{let r=b.find(t=>t.id===e),a=(null==r?void 0:r.status)==="under_review"||(null==r?void 0:r.status)==="rejected",s=await x.K.updateAnnouncement(e,t);if(s.success){let e=await x.K.getAnnouncements();e.success&&e.data&&C(Array.isArray(e.data)?e.data:[]),P(!1),q(null),a?eb("Announcement updated successfully! Resubmitted for superadmin review.","success"):eb("Announcement updated successfully!","success")}else eb(s.error||"Failed to update announcement","error")}catch(e){console.error("Failed to update announcement:",e),eb("An error occurred while updating the announcement","error")}finally{$(!1)}},eV=async e=>{K(e);try{let t=await x.K.deleteAnnouncement(e);if(t.success){let e=await x.K.getAnnouncements();e.success&&e.data&&C(Array.isArray(e.data)?e.data:[]),X(null),eb("Announcement deleted successfully!","success")}else eb(t.error||"Failed to delete announcement","error")}catch(e){console.error("Failed to delete announcement:",e),eb("An error occurred while deleting the announcement","error")}finally{K(null)}},eH=async()=>{eo(!0);try{let e=await x.K.getAllUsers();e.success&&e.data&&en(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Failed to fetch users:",e)}finally{eo(!1)}};(0,n.useEffect)(()=>{(async()=>{try{let e=await x.K.getAnnouncements();e.success&&e.data?C(Array.isArray(e.data)?e.data:[]):C([])}catch(e){C([])}finally{S(!1)}})()},[]),(0,n.useEffect)(()=>{let e=e=>{ex.current&&!ex.current.contains(e.target)&&c(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let eF=e=>{switch(e.toLowerCase()){case"college":return"default";case"tech":case"tech-events":case"tech-workshops":return"secondary";default:return"outline"}};return(0,a.jsx)("div",{className:"dashboard relative min-h-screen bg-black",children:(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("header",{className:"dashboard-header flex flex-col md:flex-row items-center justify-between px-6 py-4 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-white/10 shadow-lg",role:"navigation","aria-label":"Top Navigation",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg ring-2 ring-white/10 hover:scale-105 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent tracking-tight",children:"SST Dashboard"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Welcome back, ",(0,a.jsx)("span",{className:"font-semibold",children:(null==eh?void 0:eh.username)||(null==eh?void 0:null===(t=eh.email)||void 0===t?void 0:t.split("@")[0])||"Student"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 mt-4 md:mt-0",children:[(0,a.jsxs)("div",{className:"user-info flex items-center gap-4 bg-white/5 px-3 py-2 rounded-xl hover:bg-white/10 transition","aria-label":"Current user",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 via-cyan-400 to-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-md ring-2 ring-white/20",children:(null===(r=(null==eh?void 0:eh.username)||(null==eh?void 0:eh.email))||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-white truncate max-w-[150px]",title:(null==eh?void 0:eh.username)||(null==eh?void 0:eh.email)||"",children:(null==eh?void 0:eh.username)||(null==eh?void 0:eh.email)}),eh&&(0,a.jsx)("div",{className:"flex items-center gap-1 mt-1",children:(()=>{let e={super_admin:{label:"SUPER ADMIN",color:"bg-purple-400",textColor:"text-purple-300"},admin:{label:"ADMIN",color:"bg-blue-400",textColor:"text-blue-300"},student_admin:{label:"STUDENT ADMIN",color:"bg-green-400",textColor:"text-green-300"},student:{label:"STUDENT",color:"bg-gray-400",textColor:"text-gray-300"}},t=e[eC]||e.student;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-2 h-2 ".concat(t.color," rounded-full")}),(0,a.jsx)("span",{className:"text-xs font-semibold ".concat(t.textColor),children:t.label})]})})()})]})]}),eL&&(0,a.jsxs)(m.$,{variant:"outline",size:"sm",onClick:async()=>{es(!0),await eH()},className:"group border-white/20 hover:bg-white/10 hover:border-white/40 transition-all duration-200 text-white",title:"Manage Users",children:[(0,a.jsx)("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,a.jsx)("span",{className:"ml-2 hidden md:inline",children:"Manage Users"})]}),(0,a.jsx)(m.$,{variant:"outline",size:"sm",onClick:()=>eg(),className:"logout-button group border-white/20 hover:bg-red-500 hover:border-white/40 transition-all duration-200 text-white",children:(0,a.jsx)("svg",{className:"w-4 h-4 group-hover:rotate-12 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),(0,a.jsx)("main",{className:"dashboard-content p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[eA&&(0,a.jsx)(i.Zp,{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 animate-in fade-in slide-in-from-top duration-500",children:(0,a.jsx)(i.Wu,{className:"p-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Admin Controls"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Manage your announcements and view analytics"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[(0,a.jsxs)(m.$,{onClick:()=>{ec("standard"),em(void 0),W(!0)},"aria-label":"Create Announcement",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-purple-500/50 group",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create"]}),(0,a.jsx)(m.$,{onClick:async()=>{J(!0),ee(!0);try{let e=await x.K.getAnalyticsStats();e.success&&e.data?er(e.data):er(null)}finally{ee(!1)}},"aria-label":"Open Analytics","aria-busy":Q,disabled:Q,className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-emerald-500/50 group disabled:opacity-80 disabled:cursor-not-allowed disabled:transform-none",children:Q?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),e_&&(0,a.jsxs)(m.$,{onClick:()=>{ec("emergency"),em({title:"Emergency Broadcast",status:"urgent",send_email:!0,is_active:!0}),W(!0)},"aria-label":"Trigger Emergency Broadcast",className:"bg-gradient-to-r from-red-700 via-red-600 to-orange-500 hover:from-red-800 hover:via-red-700 hover:to-orange-600 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-red-600/50 group",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"})}),"Emergency Alert"]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-blue-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-500",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)(i.Wu,{className:"relative p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-blue-400 to-cyan-300 bg-clip-text text-transparent",children:ez}),(0,a.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"Total Announcements"})]})})})]}),(0,a.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-600",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500/10 to-fuchsia-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)(i.Wu,{className:"relative p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-violet-300 to-fuchsia-300 bg-clip-text text-transparent",children:eD}),(0,a.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"College Events"})]})})})]}),(0,a.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-emerald-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-700",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,a.jsx)(i.Wu,{className:"relative p-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-emerald-300 to-teal-200 bg-clip-text text-transparent",children:eE}),(0,a.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"Tech Workshops"})]})})})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-2xl animate-in fade-in slide-in-from-bottom duration-800",children:[(0,a.jsx)(i.aR,{className:"border-b border-gray-800/60 pb-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-2xl font-bold text-white mb-2",children:"Recent Announcements"}),(0,a.jsx)(i.BT,{className:"text-gray-400",children:"Stay updated with the latest news"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto",children:[(0,a.jsx)("input",{type:"text",value:ef,onChange:e=>ej(e.target.value),placeholder:"Search announcements...",className:"flex-1 md:flex-initial h-11 w-full md:w-72 px-4 rounded-xl bg-slate-800/60 border border-slate-700 text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),(0,a.jsxs)("select",{value:ey,onChange:e=>ew(e.target.value),className:"h-11 px-4 rounded-xl bg-slate-800/60 border border-slate-700 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),(0,a.jsx)("option",{value:"college",children:"College"}),(0,a.jsx)("option",{value:"tech-events",children:"Tech Events"}),(0,a.jsx)("option",{value:"tech-workshops",children:"Tech Workshops"}),(0,a.jsx)("option",{value:"tech",children:"Tech"}),(0,a.jsx)("option",{value:"academic",children:"Academic"}),(0,a.jsx)("option",{value:"sports",children:"Sports"})]}),(0,a.jsx)(m.$,{variant:"outline",size:"sm",onClick:o,className:"h-11 border-slate-600 text-gray-300 hover:bg-slate-800 hover:text-white hover:border-slate-500 transition-all duration-200",children:"View All"})]})]})}),(0,a.jsx)(i.Wu,{className:"p-6",children:A?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,a.jsx)("div",{className:"h-20 bg-slate-800/50 rounded-2xl animate-pulse"},e))}):(0,a.jsxs)("div",{className:"space-y-4",children:[eB.slice(0,5).map((e,t)=>{var r;let s=e.priority_until?new Date(e.priority_until):null,l=!!s&&!isNaN(s.getTime())&&s>new Date&&(null===(r=e.status)||void 0===r?void 0:r.toLowerCase())==="urgent",n=e.is_emergency||!1;return(0,a.jsx)("div",{className:"group relative overflow-hidden rounded-2xl border backdrop-blur-sm transition-all duration-300 animate-in fade-in slide-in-from-left ".concat((0,g.D)(e)||"expired"===e.status?"opacity-70 grayscale":""," ").concat(n||l?"bg-gradient-to-r from-red-900/60 to-red-800/40 border-red-500/50 hover:border-red-400 hover:shadow-xl hover:shadow-red-500/30 border-l-4 border-l-red-500":"bg-gradient-to-r from-slate-800/60 to-slate-800/40 border-slate-600 hover:border-slate-600 hover:shadow-xl ".concat(_(e.category))),style:{animationDelay:"".concat(100*t,"ms")},children:(0,a.jsxs)("div",{className:"relative flex items-start justify-between p-6 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"mt-1 flex h-12 w-12 items-center justify-center rounded-xl ring-2 ring-white/10 group-hover:scale-110 transition-transform duration-300 ".concat((0,g.D)(e)||"expired"===e.status?"bg-gradient-to-br from-gray-600/30 to-gray-700/30":n||l?"bg-gradient-to-br from-red-500/30 to-rose-500/30":"bg-gradient-to-br from-blue-500/20 to-purple-500/20"),children:(0,g.D)(e)||"expired"===e.status?(0,a.jsx)("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):n||l?(0,a.jsx)("svg",{className:"h-6 w-6 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):(0,a.jsx)("svg",{className:"h-6 w-6 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h8M5 6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2H5z"})})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,a.jsx)("div",{className:"text-lg font-bold transition-colors duration-200 ".concat((0,g.D)(e)||"expired"===e.status?"text-gray-300 group-hover:text-gray-400":n||l?"text-red-100 group-hover:text-red-200":"text-white group-hover:text-blue-300"),children:e.title}),(0,g.D)(e)||"expired"===e.status?(0,a.jsx)(u,{className:"bg-gray-600/80 text-gray-200 border-gray-500/50 px-3 py-1 text-xs font-bold",children:"EXPIRED"}):(0,a.jsxs)(a.Fragment,{children:[(n||l)&&(0,a.jsx)(u,{className:"bg-red-600/80 text-white border-red-500/50 px-3 py-1 text-xs font-bold animate-pulse shadow-lg",children:"\uD83D\uDEA8 EMERGENCY"}),e.status&&"approved"!==e.status&&((null==eh?void 0:eh.is_admin)||(null==eh?void 0:eh.role)==="super_admin")&&(0,a.jsx)(u,{className:"rejected"===e.status?"bg-red-500/20 text-red-400 border-red-400/30 px-3 py-1 text-xs font-bold capitalize":"under_review"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-400/30 px-3 py-1 text-xs font-bold capitalize":"scheduled"===e.status?"bg-blue-500/20 text-blue-400 border-blue-400/30 px-3 py-1 text-xs font-bold capitalize":"bg-slate-500/30 text-slate-200 border border-slate-500/50 px-3 py-1 text-xs font-bold capitalize",children:e.status})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(u,{variant:eF(e.category),className:"text-xs px-3 py-1 font-semibold capitalize",children:e.category}),(0,a.jsx)("span",{className:"text-gray-500",children:""}),(0,a.jsx)("span",{className:"text-sm text-gray-400",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown date"})]}),l&&(0,a.jsx)("div",{className:"text-xs font-semibold text-red-200 mb-2",children:"Pinned for campus-wide visibility"}),eN===e.id&&(0,a.jsx)("div",{className:"text-sm text-gray-300 leading-relaxed animate-in fade-in slide-in-from-top duration-300",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[(0,a.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-gray-400 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200",onClick:()=>{var t;let r=eN===e.id?null:null!==(t=e.id)&&void 0!==t?t:null;r&&r!==eN&&e.id&&x.K.trackEngagement(e.id,"view"),ek(r)},title:eN===e.id?"Collapse":"Expand","aria-expanded":eN===e.id,children:(0,a.jsx)("svg",{className:"w-5 h-5 transition-transform duration-300 ".concat(eN===e.id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),(null==eh?void 0:eh.is_admin)&&(0,a.jsxs)(a.Fragment,{children:[eA&&(0,a.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-xl transition-all duration-200",onClick:()=>eW(e),title:"Edit",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-xl transition-all duration-200",onClick:()=>X(e.id),title:"Delete",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})})})]})]})]})},e.id)}),0===b.length&&(0,a.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 ring-2 ring-white/10 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"h-10 w-10 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h8M5 6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2H5z"})})}),(0,a.jsx)("div",{className:"text-lg text-gray-300 font-semibold",children:"No announcements yet"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Create your first announcement to get started."})]})})]})})]})]})}),(0,a.jsx)(z,{isOpen:M,onClose:()=>{W(!1),em(void 0),ec("standard")},onSubmit:eT,loading:H,variant:ed,initialData:eu}),(0,a.jsx)(D,{isOpen:O,onClose:()=>{P(!1),q(null)},announcement:Z,onSubmit:eU,loading:R}),(0,a.jsx)(E,{isOpen:null!==G,announcementId:G,announcementTitle:null===(l=b.find(e=>e.id===G))||void 0===l?void 0:l.title,onClose:()=>X(null),onConfirm:eV,loading:I===G}),(0,a.jsx)(B,{isOpen:Y,onClose:()=>J(!1),stats:et,loading:Q}),(0,a.jsx)(T,{isOpen:ea,onClose:()=>es(!1),users:el,loading:ei,onRefresh:eH}),(0,a.jsx)(U.N,{toasts:ev,onRemove:ep})]})})};var F=r(5504),R=r(1522);function $(){let{user:e,isLoading:t,error:r}=(0,h.Km)(),[s,l]=(0,n.useState)("dashboard");return((0,n.useEffect)(()=>{"/all-announcements"===window.location.pathname?l("all-announcements"):l("dashboard")},[]),(0,n.useEffect)(()=>{let e=()=>{"/all-announcements"===window.location.pathname?l("all-announcements"):l("dashboard")};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded-lg mx-auto animate-pulse"}),(0,a.jsx)("div",{className:"w-24 h-3 bg-white/10 rounded-lg mx-auto animate-pulse"})]})})}):e?(0,a.jsx)(a.Fragment,{children:"all-announcements"===s?(0,a.jsx)(F.A,{onBackToDashboard:()=>{l("dashboard"),window.history.pushState({},"","/")}}):(0,a.jsx)(H,{onViewAllAnnouncements:()=>{l("all-announcements"),window.history.pushState({},"","/all-announcements")}})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"space-y-4 text-center",children:(0,a.jsx)("p",{className:"text-white/80 text-lg",children:r||"Unable to load your profile. Please try signing in again."})})})}function I(){let{isLoaded:e}=(0,s.As)();return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.iB,{children:(0,a.jsx)(h.id,{children:(0,a.jsx)($,{})})}),(0,a.jsx)(l.Bl,{children:(0,a.jsx)(R.A,{})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"space-y-4 text-center",children:[(0,a.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded-lg mx-auto animate-pulse"}),(0,a.jsx)("div",{className:"w-24 h-3 bg-white/10 rounded-lg mx-auto animate-pulse"})]})})}},911:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[646,141,75,316,915,441,517,358],()=>t(8502)),_N_E=e.O()}]);