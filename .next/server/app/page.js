(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},4075:e=>{"use strict";e.exports=require("zlib")},7598:e=>{"use strict";e.exports=require("node:crypto")},5711:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(260),a=r(8203),n=r(5155),l=r.n(n),i=r(7292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5104)),"E:\\Project\\sst_announcement\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9611)),"E:\\Project\\sst_announcement\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,1129)),"E:\\Project\\sst_announcement\\app\\not-found.tsx"]}],c=["E:\\Project\\sst_announcement\\app\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3474:(e,t,r)=>{Promise.resolve().then(r.bind(r,5104))},330:(e,t,r)=>{Promise.resolve().then(r.bind(r,1352))},1352:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var s=r(5512),a=r(7465),n=r(5793),l=r(8009),i=r(7643),o=r(1643),d=r(9462);let c=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,d.cn)(c({variant:t}),e),...r})}var m=r(7021),x=r(4759),h=r(7967),g=r(7908);let p=(e,t)=>e&&({user:"student",superadmin:"super_admin",student:"student",student_admin:"student_admin",admin:"admin",super_admin:"super_admin"})[e]||(t?"admin":"student"),b=e=>["admin","student_admin","super_admin"].includes(e),v=(e,t="student",r,s,a)=>{let n=b(t),l=new Date;if(!n&&!a){if("scheduled"===e.status||e.category&&"scheduled"===e.category.toLowerCase())return!1;if(e.scheduled_at){let t=new Date(e.scheduled_at);if(!isNaN(t.getTime())&&t>l)return!1}}return!!n||!("draft"===e.status||"under_review"===e.status||"rejected"===e.status||!1===e.is_active||(0,g.D)(e))},f=(e,t)=>"all"===t?e:e.filter(e=>e.category.toLowerCase()===t.toLowerCase()),j=(e,t)=>{if(!t.trim())return e;let r=t.toLowerCase();return e.filter(e=>e.title.toLowerCase().includes(r)||e.description.toLowerCase().includes(r))},y=(e,t)=>[...e].sort((e,t)=>{if(e.is_emergency&&!t.is_emergency)return -1;if(!e.is_emergency&&t.is_emergency)return 1;let r=e.priority_until?new Date(e.priority_until):null,s=t.priority_until?new Date(t.priority_until):null,a=new Date,n=r&&r>a&&"urgent"===e.status,l=s&&s>a&&"urgent"===t.status;if(n&&!l)return -1;if(!n&&l)return 1;let i=new Date(e.created_at||0);return new Date(t.created_at||0).getTime()-i.getTime()}),w=(e,t)=>e.filter(e=>"super_admin"===t||"admin"===t||"student_admin"===t||"active"===e.status&&!1!==e.is_active),N=e=>b(e),k=e=>"super_admin"===e,C=e=>({student:"Student",student_admin:"Student Admin",admin:"Admin",super_admin:"Super Admin"})[e]||"Student",_=e=>{switch(e.toLowerCase()){case"college":return"hover:shadow-blue-500/30";case"tech":case"tech-events":case"tech-workshops":return"hover:shadow-purple-500/30";case"academic":return"hover:shadow-green-500/30";case"sports":return"hover:shadow-orange-500/30";default:return"hover:shadow-gray-500/30"}},L=(e,t=1e3)=>{let[r,s]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(0===e){s(0);return}let r=e/(t/16),a=0,n=setInterval(()=>{(a+=r)>=e?(s(e),clearInterval(n)):s(Math.floor(a))},16);return()=>clearInterval(n)},[e,t]),r},A=[{value:"college",label:"College"},{value:"tech-events",label:"Tech Events"},{value:"tech-workshops",label:"Tech Workshops"},{value:"academic",label:"Academic"},{value:"sports",label:"Sports"},{value:"cultural",label:"Cultural"},{value:"emergency",label:"Emergency"}],S={title:"",description:"",category:"college",expiry_date:"",scheduled_at:"",reminder_time:"",is_active:!0,status:"active",send_email:!1,priority_until:null,is_emergency:!1},M=[1,2,4,6,12,24],z=({isOpen:e,onClose:t,onSubmit:r,loading:a=!1,initialData:n,variant:i="standard",emergencyMode:o=!1})=>{let{user:d}=(0,h.Km)(),c=d?.role==="super_admin",[u,x]=(0,l.useState)(S),[g,p]=(0,l.useState)(2),[b,v]=(0,l.useState)(4),f="emergency"===i||o;if((0,l.useEffect)(()=>{e&&(x({...S,...n||{},is_emergency:f}),p(2),v(4))},[e,n,f]),(0,l.useEffect)(()=>{e&&!c&&u.scheduled_at&&x(e=>({...e,scheduled_at:""})),e&&f&&u.scheduled_at&&x(e=>({...e,scheduled_at:""}))},[e,c,f,u.scheduled_at]),!e)return null;let j=async e=>{e.preventDefault();let t={...u};if(f){if("emergency"===i){let e=new Date(Date.now()+36e5*g);t.priority_until=e.toISOString(),t.expiry_date=e.toISOString(),t.status="urgent",t.send_email=!0,t.is_active=!0}else{let e=new Date(new Date().getTime()+36e5*b);t={...u,is_emergency:!0,is_active:!0,emergency_expires_at:e.toISOString(),scheduled_at:"",expiry_date:"",reminder_time:""}}}else t.priority_until=t.priority_until||null;await r(t),x(S),p(2),v(4)};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-300",onClick:e=>e.target===e.currentTarget&&t(),children:(0,s.jsxs)("div",{className:"bg-black rounded-3xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300 flex flex-col",children:[(0,s.jsx)("div",{className:`relative p-6 border-b border-gray-900 ${f?"bg-gradient-to-r from-red-900/40 via-red-900/10 to-black":"bg-black"}`,children:(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:`relative w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10 ${f?"bg-gradient-to-br from-red-600 to-orange-500":"bg-black"}`,children:(0,s.jsx)("svg",{className:`w-6 h-6 ${f?"text-white animate-pulse":"text-white"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f?(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"}):(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-red-400",children:"\uD83D\uDEA8"}),"emergency"===i?"Emergency Broadcast":"Create Emergency Announcement"]}):"Create New Announcement"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:f?"emergency"===i?"Send an urgent campus-wide alert. These announcements are prioritized for all users.":"Emergency announcements are immediately visible and active":"Fill in the details below to create your announcement"})]})]}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-all duration-200 p-2 hover:bg-gray-900 rounded-lg hover:rotate-90",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("form",{onSubmit:j,className:"flex-1 overflow-y-auto p-6 space-y-6 bg-black custom-scrollbar",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),"Title ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("input",{type:"text",required:!0,value:u.title,onChange:e=>x({...u,title:e.target.value}),className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40 transition-all duration-200 hover:border-gray-700",placeholder:"Enter a compelling title for your announcement"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Description ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("textarea",{required:!0,value:u.description,onChange:e=>x({...u,description:e.target.value}),rows:5,className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-600/40 focus:border-purple-600/40 transition-all duration-200 resize-none hover:border-gray-700",placeholder:"Provide detailed information about your announcement..."}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[u.description.length," characters"]})]}),f&&(0,s.jsxs)("div",{className:"space-y-3 rounded-2xl border border-red-800/50 bg-red-900/10 p-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-red-200",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"})}),"emergency"===i?"Priority window":"Duration (How long it will be on top)",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("p",{className:"text-xs text-red-200/80",children:"emergency"===i?"Emergency alerts stay pinned to the top and expire completely after this time.":"Emergency announcements will automatically expire and be removed after the specified duration"}),"emergency"===i?(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(e=>{let t=g===e;return(0,s.jsxs)("button",{type:"button",onClick:()=>p(e),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-200 ${t?"bg-red-600 text-white shadow-lg shadow-red-600/40":"bg-red-900/40 text-red-200 hover:bg-red-800/40"}`,children:[e,"h"]},e)})}):(0,s.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 space-y-3",children:(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"number",min:"1",max:"168",value:b,onChange:e=>{v(Math.max(1,Math.min(168,parseInt(e.target.value)||1)))},className:"w-20 px-4 py-2.5 bg-black/70 border border-red-500/40 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-600/50 focus:border-red-600/50 transition-all duration-200 hover:border-red-500/60 text-center font-semibold",placeholder:"4",required:!0}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-white/90 text-sm font-medium",children:"hours"}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:"(1-168)"})]})]})})}),(0,s.jsxs)("p",{className:"text-xs text-red-100",children:["Will expire completely on"," ","emergency"===i?new Date(Date.now()+36e5*g).toLocaleString(void 0,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"}):new Date(new Date().getTime()+36e5*b).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Category ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("select",{value:u.category,onChange:e=>x({...u,category:e.target.value}),className:"w-full px-4 py-3 bg-black/70 border border-gray-800 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-emerald-600/40 focus:border-emerald-600/40 transition-all duration-200 hover:border-gray-700 cursor-pointer",children:A.map(e=>(0,s.jsx)("option",{value:e.value,className:"bg-gray-900",children:e.label},e.value))})]}),!f&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Schedule & Timing"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Expiry Date"]}),(0,s.jsx)("input",{type:"datetime-local",value:u.expiry_date||"",onChange:e=>x({...u,expiry_date:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]}),c&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5 text-cyan-500/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Scheduled At"]}),(0,s.jsx)("input",{type:"datetime-local",value:u.scheduled_at||"",onChange:e=>x({...u,scheduled_at:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-400",children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Reminder Time"]}),(0,s.jsx)("input",{type:"datetime-local",value:u.reminder_time||"",onChange:e=>x({...u,reminder_time:e.target.value}),className:"w-full px-4 py-2.5 bg-gray-800/80 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500/50 transition-all duration-200 hover:border-gray-600"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-300",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),(0,s.jsxs)("div",{className:"bg-gray-900/30 border border-gray-800/50 rounded-xl p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`p-2 rounded-lg transition-colors duration-200 ${u.is_active||f?"bg-emerald-500/20 text-emerald-400":"bg-gray-800/50 text-gray-500"}`,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-200 block",children:f?"Active (Emergency)":u.is_active?"Active":"Inactive"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:f?"Emergency announcements are always active":u.is_active?"Announcement will be visible":"Announcement will be hidden"})]})]}),(0,s.jsxs)("label",{className:`relative inline-flex items-center ${f?"cursor-not-allowed opacity-70":"cursor-pointer group-hover:scale-105"} transition-transform duration-200`,children:[(0,s.jsx)("input",{type:"checkbox",checked:!!f||(u.is_active??!0),onChange:e=>{f||x({...u,is_active:e.target.checked})},disabled:f,className:"sr-only"}),(0,s.jsx)("div",{className:`relative w-14 h-7 rounded-full transition-all duration-300 ease-in-out ${(u.is_active??!0)||f?"bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-lg shadow-emerald-500/50":"bg-gray-700 border border-gray-600"}`,children:(0,s.jsx)("div",{className:`absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out ${(u.is_active??!0)||f?"translate-x-7":"translate-x-0"}`,children:((u.is_active??!0)||f)&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})})]})]}),(0,s.jsx)("div",{className:"h-px bg-gray-800/50"}),(0,s.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`p-2 rounded-lg transition-colors duration-200 ${u.send_email?"bg-blue-500/20 text-blue-400":"bg-gray-800/50 text-gray-500"}`,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-200 block",children:"Send Email Notification"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:u.send_email?"Users will receive email alerts":"No email will be sent"})]})]}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer group-hover:scale-105 transition-transform duration-200",children:[(0,s.jsx)("input",{type:"checkbox",checked:u.send_email??!1,onChange:e=>x({...u,send_email:e.target.checked}),className:"sr-only"}),(0,s.jsx)("div",{className:`relative w-14 h-7 rounded-full transition-all duration-300 ease-in-out ${u.send_email?"bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg shadow-blue-500/50":"bg-gray-700 border border-gray-600"}`,children:(0,s.jsx)("div",{className:`absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out ${u.send_email?"translate-x-7":"translate-x-0"}`,children:u.send_email&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-800/50",children:[(0,s.jsx)(m.$,{type:"submit",disabled:a,className:`flex-1 font-semibold py-3 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg ${f?"bg-gradient-to-r from-red-600 via-red-600 to-red-600 hover:from-red-700 hover:via-red-700 hover:to-red-700 text-white shadow-red-500/20 hover:shadow-red-500/30":"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 hover:from-blue-700 hover:via-purple-700 hover:to-blue-700 text-white shadow-blue-500/20 hover:shadow-blue-500/30"}`,children:a?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f?"Creating Emergency...":"Creating..."]}):(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f?"Create Emergency Announcement":"Create Announcement"]})}),(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:t,className:"px-6 py-3 border-gray-700/50 text-gray-300 hover:bg-gray-800/50 hover:text-white hover:border-gray-600 rounded-xl transition-all duration-200",children:"Cancel"})]})]})]})})},D=({isOpen:e,onClose:t,announcement:r,onSubmit:a,loading:n=!1})=>{let{user:i}=(0,h.Km)(),o=i?.role==="super_admin",[d,c]=(0,l.useState)({title:"",description:"",category:"college",expiry_date:"",scheduled_at:"",reminder_time:"",is_active:!0,status:o?"active":"under_review"});if((0,l.useEffect)(()=>{r&&c({title:r.title,description:r.description,category:r.category,expiry_date:(0,g.r)(r.expiry_date),scheduled_at:(0,g.r)(r.scheduled_at),reminder_time:(0,g.r)(r.reminder_time),is_active:r.is_active??!0,status:o?r.status||"active":"under_review"})},[r,o]),!e||!r||!r.id)return null;let u=async e=>{e.preventDefault();let t={...d};o||(t.status="under_review",delete t.scheduled_at),await a(r.id,t)};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,s.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-900 bg-black",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-900 border border-gray-800 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Edit Announcement"})]}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("form",{onSubmit:u,className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),(0,s.jsx)("input",{type:"text",required:!0,value:d.title,onChange:e=>c({...d,title:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter announcement title"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),(0,s.jsx)("textarea",{required:!0,value:d.description,onChange:e=>c({...d,description:e.target.value}),rows:4,className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter announcement description"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),(0,s.jsx)("select",{value:d.category,onChange:e=>c({...d,category:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),(0,s.jsx)("input",{type:"datetime-local",value:d.expiry_date||"",onChange:e=>c({...d,expiry_date:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scheduled At"}),(0,s.jsx)("input",{type:"datetime-local",value:d.scheduled_at||"",onChange:e=>c({...d,scheduled_at:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reminder Time"}),(0,s.jsx)("input",{type:"datetime-local",value:d.reminder_time||"",onChange:e=>c({...d,reminder_time:e.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.is_active??!0,onChange:e=>c({...d,is_active:e.target.checked}),className:"rounded"}),"Active"]}),o?(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,s.jsxs)("select",{value:d.status||"active",onChange:e=>c({...d,status:e.target.value}),className:"px-4 py-2 bg-black border border-gray-900 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})]}):(0,s.jsx)("div",{className:"flex-1 min-w-[200px] px-4 py-3 bg-blue-500/10 border border-blue-500/30 rounded-xl text-xs text-blue-200",children:"Updates will be sent back to the superadmin review queue. Once approved, scheduling and activation will be handled by the superadmin."})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(m.$,{type:"submit",disabled:n,className:"flex-1 bg-gray-900 hover:bg-gray-800 border border-gray-800 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:n?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Announcement"}),(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:t,className:"border-gray-900 text-gray-300 hover:bg-gray-900",children:"Cancel"})]})]})]})})},E=({isOpen:e,announcementId:t,announcementTitle:r,onClose:a,onConfirm:n,loading:l})=>e&&t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)(i.Zp,{className:"w-full max-w-md bg-gray-900/95 backdrop-blur-xl border border-red-500/50 shadow-2xl shadow-red-500/20",children:[(0,s.jsx)(i.aR,{className:"border-b border-red-500/30 pb-4",children:(0,s.jsxs)(i.ZB,{className:"text-xl font-bold text-white flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-red-500/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})})}),"Delete Announcement"]})}),(0,s.jsx)(i.Wu,{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Are you sure?"}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:"This will permanently delete the announcement:"}),(0,s.jsxs)("p",{className:"text-white font-medium mt-2 p-2 bg-gray-800/50 rounded-lg",children:['"',r||"Untitled Announcement",'"']}),(0,s.jsx)("p",{className:"text-red-300 text-sm mt-2",children:"This action cannot be undone."})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(m.$,{variant:"outline",onClick:a,className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white",disabled:l,children:"Cancel"}),(0,s.jsx)(m.$,{onClick:()=>{n(t)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white",disabled:l,children:l?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Deleting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})}),"Delete"]})})]})]})})]})}):null,B=({isOpen:e,onClose:t,stats:r,loading:a=!1})=>{if(!e)return null;let[n,i]=(0,l.useState)(""),[o,d]=(0,l.useState)("desc"),c=(r?.top_announcements??[]).filter(e=>e.title.toLowerCase().includes(n.toLowerCase())).sort((e,t)=>"desc"===o?t.views-e.views:e.views-t.views);return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",onClick:e=>e.target===e.currentTarget&&t(),children:(0,s.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto custom-scrollbar-analytics m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-900 bg-black flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"})]}),(0,s.jsx)(m.$,{variant:"ghost",onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6",children:a?(0,s.jsxs)("div",{className:"py-10 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"}),(0,s.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"}),(0,s.jsx)("div",{className:"h-24 rounded-xl bg-white/5 animate-pulse"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 w-40 bg-white/5 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-16 rounded-xl bg-white/5 animate-pulse"}),(0,s.jsx)("div",{className:"h-16 rounded-xl bg-white/5 animate-pulse"})]})]}):r?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-blue-400 mb-2",children:r.total_announcements}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Total Announcements"})]}),(0,s.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-emerald-400 mb-2",children:r.total_users}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Total Users"})]}),(0,s.jsxs)("div",{className:"bg-black/70 rounded-xl p-6 border border-gray-800 ring-1 ring-white/5 shadow-sm hover:border-gray-700 hover:bg-gray-900/40 transition-colors",children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold tracking-tight text-cyan-400 mb-2",children:r.active_users}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Active Users"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Top Announcements"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Search and sort by views to explore performance."}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by title...",className:"w-full md:flex-1 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40"}),(0,s.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"w-full md:w-40 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-600/40 focus:border-purple-600/40",children:[(0,s.jsx)("option",{value:"desc",className:"bg-black",children:"DESC"}),(0,s.jsx)("option",{value:"asc",className:"bg-black",children:"ASC"})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:c.length>0?c.map((e,t)=>(0,s.jsx)("div",{className:"bg-black/70 rounded-lg p-4 border border-gray-800 flex items-center justify-between hover:bg-gray-900/40 hover:border-gray-700 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold shadow",children:t+1}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.title}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[e.views," views"]})]})]})},e.id)):(0,s.jsx)("div",{className:"text-gray-400 text-center py-4",children:"No results"})})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-gray-400",children:"No analytics data available"})})})]})})},W=({isOpen:e,onClose:t,user:r,onRoleChange:a,loading:n})=>{let[i,o]=(0,l.useState)(p(r.role,r.is_admin));return e?(0,s.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-xl animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl w-full max-w-md m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Change User Role"}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["Changing role for: ",(0,s.jsx)("span",{className:"text-white font-medium",children:r.email})]})]}),(0,s.jsx)("div",{className:"p-6 space-y-4",children:(0,s.jsx)("div",{className:"space-y-3",children:[{value:"student",label:"Student",description:"Basic user access"},{value:"student_admin",label:"Student Admin",description:"Admin access with lower announcement priority"},{value:"admin",label:"Admin",description:"Full admin access with higher announcement priority"},{value:"super_admin",label:"Super Admin",description:"Highest access level, can manage all users"}].map(e=>(0,s.jsxs)("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${i===e.value?"border-blue-500 bg-blue-500/10":"border-gray-700 hover:border-gray-600 hover:bg-gray-800/50"}`,children:[(0,s.jsx)("input",{type:"radio",name:"role",value:e.value,checked:i===e.value,onChange:e=>o(e.target.value),className:"mt-1 text-blue-500 focus:ring-blue-500 focus:ring-offset-gray-900"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-gray-400 text-sm",children:e.description})]})]},e.value))})}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-700 flex gap-3 justify-end",children:[(0,s.jsx)(m.$,{onClick:t,variant:"outline",disabled:n,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"}),(0,s.jsx)(m.$,{onClick:()=>{a(r.id,i)},disabled:n||i===p(r.role,r.is_admin),className:"bg-blue-600 hover:bg-blue-700",children:n?"Updating...":"Update Role"})]})]})}):null},$=({isOpen:e,onClose:t,users:r,loading:a=!1,onRefresh:n})=>{let[i,o]=(0,l.useState)(""),[d,c]=(0,l.useState)(null),[u,g]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),[f,j]=(0,l.useState)(null),[y,w]=(0,l.useState)(null),[N,_]=(0,l.useState)(!1),[L,A]=(0,l.useState)(null),{user:S}=(0,h.Km)(),M=k(p(S?.role,S?.is_admin)),z=async()=>{if(!i.trim()){j("Please enter an email address");return}g(!0),j(null),w(null);try{let e=await x.K.searchUsersByEmail(i);e.success&&e.data?(c(e.data),w("User found successfully")):(c(null),j(e.error||"User not found"))}catch(e){c(null),j("Failed to search user. Please try again."),console.error("Search error:",e)}finally{g(!1)}},D=async(e,t)=>{if(!e){j("Invalid user ID");return}v(e),j(null),w(null);try{let r=await x.K.updateUserAdminStatus(e,!t);r.success?(w(`User ${t?"removed from admin":"promoted to admin"} successfully`),n(),d&&d.id===e&&c({...d,is_admin:!t}),setTimeout(()=>w(null),3e3)):j(r.error||"Failed to update user status")}catch(e){j(e?.response?.data?.message||e?.message||"Failed to update user status"),console.error("Failed to update user status:",e)}finally{v(null)}},E=async(e,t)=>{v(e),j(null),w(null);try{let r=await x.K.updateUserRole(e,t);r.success?(w(`User role updated to ${C(t)} successfully`),n(),d&&d.id===e&&c({...d,role:t}),_(!1),A(null),setTimeout(()=>w(null),3e3)):j(r.error||"Failed to update user role")}catch(e){j(e?.response?.data?.message||e?.message||"Failed to update user role"),console.error("Failed to update user role:",e)}finally{v(null)}},B=e=>{A(e),_(!0),j(null),w(null)};return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-xl animate-in fade-in duration-200",onClick:e=>e.target===e.currentTarget&&t(),children:(0,s.jsxs)("div",{className:"bg-black rounded-2xl border border-gray-900 shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-y-auto custom-scrollbar m-4 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-900 bg-black flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg ring-2 ring-white/10",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"User Management"})]}),(0,s.jsx)(m.$,{variant:"ghost",onClick:t,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-gray-900 rounded-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[f&&(0,s.jsxs)("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,s.jsx)("span",{children:f}),(0,s.jsx)("button",{onClick:()=>j(null),className:"text-red-400 hover:text-red-300",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y&&(0,s.jsxs)("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,s.jsx)("span",{children:y}),(0,s.jsx)("button",{onClick:()=>w(null),className:"text-green-400 hover:text-green-300",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"Search User by Email"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"email",value:i,onChange:e=>{o(e.target.value),j(null)},onKeyPress:e=>"Enter"===e.key&&z(),placeholder:"Enter email address",className:"flex-1 px-4 py-2.5 bg-black/70 border border-gray-800 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600/40 focus:border-blue-600/40"}),(0,s.jsx)(m.$,{className:"bg-blue-600 hover:bg-blue-700",onClick:z,disabled:u,children:u?"Searching...":"Search"})]}),d&&(0,s.jsx)("div",{className:"mt-4 bg-black/70 rounded-lg p-4 border border-gray-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:d.email}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[d.username||"No username",(()=>{let e=p(d.role,d.is_admin),t={super_admin:{label:"SUPER ADMIN",bg:"bg-purple-600"},admin:{label:"ADMIN",bg:"bg-blue-600"},student_admin:{label:"STUDENT ADMIN",bg:"bg-green-600"},student:{label:"STUDENT",bg:"bg-gray-600"}},r=t[e]||t.student;return(0,s.jsx)("span",{className:`ml-2 px-2 py-1 ${r.bg} text-white text-xs rounded`,children:r.label})})()]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:M?(0,s.jsx)(m.$,{onClick:()=>B(d),disabled:b===d.id,variant:"default",size:"sm",children:b===d.id?"Updating...":"Change Role"}):(0,s.jsx)(m.$,{onClick:()=>D(d.id,d.is_admin||!1),disabled:b===d.id,variant:d.is_admin?"outline":"default",size:"sm",className:d.is_admin?"border-red-600 text-red-400 hover:bg-red-600/20":"",children:b===d.id?"Updating...":d.is_admin?"Remove Admin":"Make Admin"})})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3",children:["All Users (",r.length,")"]}),a?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading users..."}):(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar-thin",children:r.map(e=>(0,s.jsxs)("div",{className:"bg-black/70 rounded-lg p-4 border border-gray-800 flex items-center justify-between hover:bg-gray-900/40 hover:border-gray-700 transition-colors",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white font-medium",children:e.email}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-2",children:[e.username||"No username",(()=>{let t=p(e.role,e.is_admin),r={super_admin:{label:"SUPER ADMIN",bg:"bg-purple-600"},admin:{label:"ADMIN",bg:"bg-blue-600"},student_admin:{label:"STUDENT ADMIN",bg:"bg-green-600"},student:{label:"STUDENT",bg:"bg-gray-600"}},a=r[t]||r.student;return(0,s.jsx)("span",{className:`ml-2 px-2 py-1 ${a.bg} text-white text-xs rounded`,children:a.label})})()]})]}),M?(0,s.jsx)(m.$,{onClick:()=>B(e),disabled:b===e.id,variant:"default",size:"sm",children:b===e.id?"Updating...":"Change Role"}):(0,s.jsx)(m.$,{onClick:()=>D(e.id,e.is_admin||!1),disabled:b===e.id,variant:e.is_admin?"outline":"default",size:"sm",className:e.is_admin?"border-red-600 text-red-400 hover:bg-red-600/20":"",children:b===e.id?"Updating...":e.is_admin?"Remove Admin":"Make Admin"})]},e.id))})]})]})]})}),N&&L&&(0,s.jsx)(W,{isOpen:N,onClose:()=>{_(!1),A(null)},user:L,onRoleChange:E,loading:b===L.id})]}):null};var T=r(7936),U=r(8292);r(5381);let V=({onViewAllAnnouncements:e})=>{let[t,r]=(0,l.useState)(!1),[n,o]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[b,C]=(0,l.useState)(!1),[A,S]=(0,l.useState)(!1),[M,W]=(0,l.useState)(!1),[V,P]=(0,l.useState)(null),[H,R]=(0,l.useState)(!1),[F,I]=(0,l.useState)(null),[K,q]=(0,l.useState)(null),[O,Z]=(0,l.useState)(!1),[G,X]=(0,l.useState)(!1),[Y,J]=(0,l.useState)(null),[Q,ee]=(0,l.useState)(!1),[et,er]=(0,l.useState)([]),[es,ea]=(0,l.useState)(!1),[en,el]=(0,l.useState)("standard"),[ei,eo]=(0,l.useState)(void 0),ed=(0,l.useRef)(null),{user:ec}=(0,h.Km)(),{signOut:eu}=(0,a.ho)(),{toasts:em,showToast:ex,removeToast:eh}=(0,U.d)(),[eg,ep]=(0,l.useState)(""),[eb,ev]=(0,l.useState)("all"),[ef,ej]=(0,l.useState)(null),ey=p(ec?.role,ec?.is_admin),ew="super_admin"===ey,eN=k(ey),ek=N(ey),eC=n.filter(e=>v(e,ey,ec?.is_admin||!1,ec?.id,ec?.role==="super_admin")),e_=y(w(eC,ey),ey),eL=L(eC.length),eA=L(eC.filter(e=>"college"===e.category.toLowerCase()).length),eS=L(eC.filter(e=>"tech"===e.category.toLowerCase()||"tech-workshops"===e.category.toLowerCase()||"tech-events"===e.category.toLowerCase()).length),eM=j(f(e_,eb),eg),ez=e=>{I(e),R(!0)},eD=async e=>{S(!0);try{let t=await x.K.createAnnouncement(e);if(t.success){let e=await x.K.getAnnouncements();e.success&&e.data&&o(Array.isArray(e.data)?e.data:[]),C(!1),eo(void 0),el("standard");let r=t.data;if(ec?.role!=="super_admin")ex("Announcement created successfully! Sent to superadmin for review.","success");else if(r?.scheduled_at){let e=new Date(r.scheduled_at);ex(`Announcement created successfully! Scheduled for ${e.toLocaleString()}`,"success")}else ex("Announcement created successfully!","success")}else ex(t.error||"Failed to create announcement","error")}catch(e){console.error("Failed to create announcement:",e),ex("An error occurred while creating the announcement","error")}finally{S(!1)}},eE=async(e,t)=>{W(!0);try{let r=n.find(t=>t.id===e),s=r?.status==="under_review"||r?.status==="rejected",a=await x.K.updateAnnouncement(e,t);if(a.success){let e=await x.K.getAnnouncements();e.success&&e.data&&o(Array.isArray(e.data)?e.data:[]),R(!1),I(null),s?ex("Announcement updated successfully! Resubmitted for superadmin review.","success"):ex("Announcement updated successfully!","success")}else ex(a.error||"Failed to update announcement","error")}catch(e){console.error("Failed to update announcement:",e),ex("An error occurred while updating the announcement","error")}finally{W(!1)}},eB=async e=>{P(e);try{let t=await x.K.deleteAnnouncement(e);if(t.success){let e=await x.K.getAnnouncements();e.success&&e.data&&o(Array.isArray(e.data)?e.data:[]),q(null),ex("Announcement deleted successfully!","success")}else ex(t.error||"Failed to delete announcement","error")}catch(e){console.error("Failed to delete announcement:",e),ex("An error occurred while deleting the announcement","error")}finally{P(null)}},eW=async()=>{ea(!0);try{let e=await x.K.getAllUsers();e.success&&e.data&&er(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Failed to fetch users:",e)}finally{ea(!1)}};(0,l.useEffect)(()=>{(async()=>{try{let e=await x.K.getAnnouncements();e.success&&e.data?o(Array.isArray(e.data)?e.data:[]):o([])}catch(e){o([])}finally{c(!1)}})()},[]),(0,l.useEffect)(()=>{let e=e=>{ed.current&&!ed.current.contains(e.target)&&r(!1)};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t]);let e$=e=>{switch(e.toLowerCase()){case"college":return"default";case"tech":case"tech-events":case"tech-workshops":return"secondary";default:return"outline"}};return(0,s.jsx)("div",{className:"dashboard relative min-h-screen bg-black",children:(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("header",{className:"dashboard-header flex flex-col md:flex-row items-center justify-between px-6 py-4 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 border-b border-white/10 shadow-lg",role:"navigation","aria-label":"Top Navigation",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg ring-2 ring-white/10 hover:scale-105 transition-transform duration-200",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent tracking-tight",children:"SST Dashboard"}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:["Welcome back, ",(0,s.jsx)("span",{className:"font-semibold",children:ec?.username||ec?.email?.split("@")[0]||"Student"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 mt-4 md:mt-0",children:[(0,s.jsxs)("div",{className:"user-info flex items-center gap-4 bg-white/5 px-3 py-2 rounded-xl hover:bg-white/10 transition","aria-label":"Current user",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-400 via-cyan-400 to-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold shadow-md ring-2 ring-white/20",children:(ec?.username||ec?.email)?.charAt(0).toUpperCase()||"U"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-white truncate max-w-[150px]",title:ec?.username||ec?.email||"",children:ec?.username||ec?.email}),ec&&(0,s.jsx)("div",{className:"flex items-center gap-1 mt-1",children:(()=>{let e={super_admin:{label:"SUPER ADMIN",color:"bg-purple-400",textColor:"text-purple-300"},admin:{label:"ADMIN",color:"bg-blue-400",textColor:"text-blue-300"},student_admin:{label:"STUDENT ADMIN",color:"bg-green-400",textColor:"text-green-300"},student:{label:"STUDENT",color:"bg-gray-400",textColor:"text-gray-300"}},t=e[ey]||e.student;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`w-2 h-2 ${t.color} rounded-full`}),(0,s.jsx)("span",{className:`text-xs font-semibold ${t.textColor}`,children:t.label})]})})()})]})]}),eN&&(0,s.jsxs)(m.$,{variant:"outline",size:"sm",onClick:async()=>{ee(!0),await eW()},className:"group border-white/20 hover:bg-white/10 hover:border-white/40 transition-all duration-200 text-white",title:"Manage Users",children:[(0,s.jsx)("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,s.jsx)("span",{className:"ml-2 hidden md:inline",children:"Manage Users"})]}),(0,s.jsx)(m.$,{variant:"outline",size:"sm",onClick:()=>eu(),className:"logout-button group border-white/20 hover:bg-red-500 hover:border-white/40 transition-all duration-200 text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4 group-hover:rotate-12 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),(0,s.jsx)("main",{className:"dashboard-content p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[ek&&(0,s.jsx)(i.Zp,{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 animate-in fade-in slide-in-from-top duration-500",children:(0,s.jsx)(i.Wu,{className:"p-8",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition-transform duration-300",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Admin Controls"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Manage your announcements and view analytics"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[(0,s.jsxs)(m.$,{onClick:()=>{el("standard"),eo(void 0),C(!0)},"aria-label":"Create Announcement",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-purple-500/50 group",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create"]}),(0,s.jsx)(m.$,{onClick:async()=>{Z(!0),X(!0);try{let e=await x.K.getAnalyticsStats();e.success&&e.data?J(e.data):J(null)}finally{X(!1)}},"aria-label":"Open Analytics","aria-busy":G,disabled:G,className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-emerald-500/50 group disabled:opacity-80 disabled:cursor-not-allowed disabled:transform-none",children:G?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]})}),ew&&(0,s.jsxs)(m.$,{onClick:()=>{el("emergency"),eo({title:"Emergency Broadcast",status:"urgent",send_email:!0,is_active:!0}),C(!0)},"aria-label":"Trigger Emergency Broadcast",className:"bg-gradient-to-r from-red-700 via-red-600 to-orange-500 hover:from-red-800 hover:via-red-700 hover:to-orange-600 text-white font-semibold px-8 py-6 rounded-2xl transition-all duration-300 transform hover:scale-105 active:scale-95 hover:shadow-xl hover:shadow-red-600/50 group",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 group-hover:animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 18a2 2 0 01-1 1.732l-7 4a2 2 0 01-2 0l-7-4A2 2 0 013 18V6a2 2 0 011-1.732l7-4a2 2 0 012 0l7 4A2 2 0 0121 6z"})}),"Emergency Alert"]})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-blue-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-500",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)(i.Wu,{className:"relative p-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-blue-400 to-cyan-300 bg-clip-text text-transparent",children:eL}),(0,s.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"Total Announcements"})]})})})]}),(0,s.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-purple-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-600",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500/10 to-fuchsia-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)(i.Wu,{className:"relative p-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-violet-300 to-fuchsia-300 bg-clip-text text-transparent",children:eA}),(0,s.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"College Events"})]})})})]}),(0,s.jsxs)(i.Zp,{className:"group relative overflow-hidden bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-xl hover:shadow-2xl hover:shadow-emerald-900/30 transition-all duration-300 hover:-translate-y-2 animate-in fade-in slide-in-from-bottom duration-700",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)(i.Wu,{className:"relative p-8",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-4xl font-black bg-gradient-to-r from-emerald-300 to-teal-200 bg-clip-text text-transparent",children:eS}),(0,s.jsx)("p",{className:"text-gray-400 font-semibold text-sm uppercase tracking-wider",children:"Tech Workshops"})]})})})]})]}),(0,s.jsxs)(i.Zp,{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800/60 shadow-2xl animate-in fade-in slide-in-from-bottom duration-800",children:[(0,s.jsx)(i.aR,{className:"border-b border-gray-800/60 pb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ZB,{className:"text-2xl font-bold text-white mb-2",children:"Recent Announcements"}),(0,s.jsx)(i.BT,{className:"text-gray-400",children:"Stay updated with the latest news"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto",children:[(0,s.jsx)("input",{type:"text",value:eg,onChange:e=>ep(e.target.value),placeholder:"Search announcements...",className:"flex-1 md:flex-initial h-11 w-full md:w-72 px-4 rounded-xl bg-slate-800/60 border border-slate-700 text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),(0,s.jsxs)("select",{value:eb,onChange:e=>ev(e.target.value),className:"h-11 px-4 rounded-xl bg-slate-800/60 border border-slate-700 text-sm text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),(0,s.jsx)("option",{value:"college",children:"College"}),(0,s.jsx)("option",{value:"tech-events",children:"Tech Events"}),(0,s.jsx)("option",{value:"tech-workshops",children:"Tech Workshops"}),(0,s.jsx)("option",{value:"tech",children:"Tech"}),(0,s.jsx)("option",{value:"academic",children:"Academic"}),(0,s.jsx)("option",{value:"sports",children:"Sports"})]}),(0,s.jsx)(m.$,{variant:"outline",size:"sm",onClick:e,className:"h-11 border-slate-600 text-gray-300 hover:bg-slate-800 hover:text-white hover:border-slate-500 transition-all duration-200",children:"View All"})]})]})}),(0,s.jsx)(i.Wu,{className:"p-6",children:d?(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,s.jsx)("div",{className:"h-20 bg-slate-800/50 rounded-2xl animate-pulse"},e))}):(0,s.jsxs)("div",{className:"space-y-4",children:[eM.slice(0,5).map((e,t)=>{let r=e.priority_until?new Date(e.priority_until):null,a=!!r&&!isNaN(r.getTime())&&r>new Date&&e.status?.toLowerCase()==="urgent",n=e.is_emergency||!1;return(0,s.jsx)("div",{className:`group relative overflow-hidden rounded-2xl border backdrop-blur-sm transition-all duration-300 animate-in fade-in slide-in-from-left ${(0,g.D)(e)||"expired"===e.status?"opacity-70 grayscale":""} ${n||a?"bg-gradient-to-r from-red-900/60 to-red-800/40 border-red-500/50 hover:border-red-400 hover:shadow-xl hover:shadow-red-500/30 border-l-4 border-l-red-500":`bg-gradient-to-r from-slate-800/60 to-slate-800/40 border-slate-600 hover:border-slate-600 hover:shadow-xl ${_(e.category)}`}`,style:{animationDelay:`${100*t}ms`},children:(0,s.jsxs)("div",{className:"relative flex items-start justify-between p-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:`mt-1 flex h-12 w-12 items-center justify-center rounded-xl ring-2 ring-white/10 group-hover:scale-110 transition-transform duration-300 ${(0,g.D)(e)||"expired"===e.status?"bg-gradient-to-br from-gray-600/30 to-gray-700/30":n||a?"bg-gradient-to-br from-red-500/30 to-rose-500/30":"bg-gradient-to-br from-blue-500/20 to-purple-500/20"}`,children:(0,g.D)(e)||"expired"===e.status?(0,s.jsx)("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):n||a?(0,s.jsx)("svg",{className:"h-6 w-6 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):(0,s.jsx)("svg",{className:"h-6 w-6 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h8M5 6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2H5z"})})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,s.jsx)("div",{className:`text-lg font-bold transition-colors duration-200 ${(0,g.D)(e)||"expired"===e.status?"text-gray-300 group-hover:text-gray-400":n||a?"text-red-100 group-hover:text-red-200":"text-white group-hover:text-blue-300"}`,children:e.title}),(0,g.D)(e)||"expired"===e.status?(0,s.jsx)(u,{className:"bg-gray-600/80 text-gray-200 border-gray-500/50 px-3 py-1 text-xs font-bold",children:"EXPIRED"}):(0,s.jsxs)(s.Fragment,{children:[(n||a)&&(0,s.jsx)(u,{className:"bg-red-600/80 text-white border-red-500/50 px-3 py-1 text-xs font-bold animate-pulse shadow-lg",children:"\uD83D\uDEA8 EMERGENCY"}),e.status&&"approved"!==e.status&&(ec?.is_admin||ec?.role==="super_admin")&&(0,s.jsx)(u,{className:"rejected"===e.status?"bg-red-500/20 text-red-400 border-red-400/30 px-3 py-1 text-xs font-bold capitalize":"under_review"===e.status?"bg-yellow-500/20 text-yellow-400 border-yellow-400/30 px-3 py-1 text-xs font-bold capitalize":"scheduled"===e.status?"bg-blue-500/20 text-blue-400 border-blue-400/30 px-3 py-1 text-xs font-bold capitalize":"bg-slate-500/30 text-slate-200 border border-slate-500/50 px-3 py-1 text-xs font-bold capitalize",children:e.status})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)(u,{variant:e$(e.category),className:"text-xs px-3 py-1 font-semibold capitalize",children:e.category}),(0,s.jsx)("span",{className:"text-gray-500",children:""}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:e.created_at?new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown date"})]}),a&&(0,s.jsx)("div",{className:"text-xs font-semibold text-red-200 mb-2",children:"Pinned for campus-wide visibility"}),ef===e.id&&(0,s.jsx)("div",{className:"text-sm text-gray-300 leading-relaxed animate-in fade-in slide-in-from-top duration-300",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-70 group-hover:opacity-100 transition-opacity duration-200",children:[(0,s.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-gray-400 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200",onClick:()=>{let t=ef===e.id?null:e.id??null;t&&t!==ef&&e.id&&x.K.trackEngagement(e.id,"view"),ej(t)},title:ef===e.id?"Collapse":"Expand","aria-expanded":ef===e.id,children:(0,s.jsx)("svg",{className:`w-5 h-5 transition-transform duration-300 ${ef===e.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),ec?.is_admin&&(0,s.jsxs)(s.Fragment,{children:[ek&&(0,s.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 rounded-xl transition-all duration-200",onClick:()=>ez(e),title:"Edit",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-10 w-10 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-xl transition-all duration-200",onClick:()=>q(e.id),title:"Delete",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})})})]})]})]})},e.id)}),0===n.length&&(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 h-20 w-20 rounded-2xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 ring-2 ring-white/10 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"h-10 w-10 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h8M5 6a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2H5z"})})}),(0,s.jsx)("div",{className:"text-lg text-gray-300 font-semibold",children:"No announcements yet"}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Create your first announcement to get started."})]})})]})})]})]})}),(0,s.jsx)(z,{isOpen:b,onClose:()=>{C(!1),eo(void 0),el("standard")},onSubmit:eD,loading:A,variant:en,initialData:ei}),(0,s.jsx)(D,{isOpen:H,onClose:()=>{R(!1),I(null)},announcement:F,onSubmit:eE,loading:M}),(0,s.jsx)(E,{isOpen:null!==K,announcementId:K,announcementTitle:n.find(e=>e.id===K)?.title,onClose:()=>q(null),onConfirm:eB,loading:V===K}),(0,s.jsx)(B,{isOpen:O,onClose:()=>Z(!1),stats:Y,loading:G}),(0,s.jsx)($,{isOpen:Q,onClose:()=>ee(!1),users:et,loading:es,onRefresh:eW}),(0,s.jsx)(T.N,{toasts:em,onRemove:eh})]})})};var P=r(7018),H=r(1586);function R(){let{user:e,isLoading:t,error:r}=(0,h.Km)(),[a,n]=(0,l.useState)("dashboard");return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded-lg mx-auto animate-pulse"}),(0,s.jsx)("div",{className:"w-24 h-3 bg-white/10 rounded-lg mx-auto animate-pulse"})]})})}):e?(0,s.jsx)(s.Fragment,{children:"all-announcements"===a?(0,s.jsx)(P.A,{onBackToDashboard:()=>{n("dashboard"),window.history.pushState({},"","/")}}):(0,s.jsx)(V,{onViewAllAnnouncements:()=>{n("all-announcements"),window.history.pushState({},"","/all-announcements")}})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"space-y-4 text-center",children:(0,s.jsx)("p",{className:"text-white/80 text-lg",children:r||"Unable to load your profile. Please try signing in again."})})})}function F(){let{isLoaded:e}=(0,a.As)();return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.iB,{children:(0,s.jsx)(h.id,{children:(0,s.jsx)(R,{})})}),(0,s.jsx)(n.Bl,{children:(0,s.jsx)(H.A,{})})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"space-y-4 text-center",children:[(0,s.jsx)("div",{className:"w-32 h-4 bg-white/20 rounded-lg mx-auto animate-pulse"}),(0,s.jsx)("div",{className:"w-24 h-3 bg-white/10 rounded-lg mx-auto animate-pulse"})]})})}},5104:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Project\\\\sst_announcement\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Project\\sst_announcement\\app\\page.tsx","default")},5381:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[680,38,263,85,429],()=>r(5711));module.exports=s})();