"use strict";(()=>{var e={};e.id=642,e.ids=[642],e.modules={846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1737:e=>{e.exports=import("drizzle-orm")},1214:e=>{e.exports=import("drizzle-orm/node-postgres")},8025:e=>{e.exports=import("drizzle-orm/pg-core")},4939:e=>{e.exports=import("pg")},7598:e=>{e.exports=require("node:crypto")},9145:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>u,routeModule:()=>c,serverHooks:()=>x,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var n=r(2706),a=r(8203),o=r(5994),i=r(8270),p=e([i]);i=(p.then?(await p)():p)[0];let c=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/analytics/stats/route",pathname:"/api/analytics/stats",filename:"route",bundlePath:"app/api/analytics/stats/route"},resolvedPagePath:"E:\\Project\\sst_announcement\\app\\api\\analytics\\stats\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:x}=c;function u(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}s()}catch(e){s(e)}})},8270:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>u,OPTIONS:()=>c});var n=r(9187),a=r(517),o=r(4272),i=r(366),p=e([o]);async function u(e){try{await (0,a.ay)(e,a.uZ);let t=await (0,o.oC)(e,{enforceDomain:!0});return(0,i.eU)(t),(0,o.ZT)(t),n.NextResponse.json({success:!0,data:{total_announcements:0,total_views:0,total_users:0,active_users:0,top_announcements:[]}})}catch(e){return n.NextResponse.json({success:!1,error:e.message||"Internal server error"},{status:e.status||500})}}async function c(){return new n.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}o=(p.then?(await p)():p)[0],s()}catch(e){s(e)}})},517:(e,t,r)=>{r.d(t,{Nw:()=>o,ay:()=>a,uZ:()=>i});var s=r(4218);let n=new Map;async function a(e,t){let r=function(e){let t=e.headers.get("x-forwarded-for");return t?t.split(",")[0]?.trim()||"unknown":e.headers.get("x-real-ip")||e.ip||"unknown"}(e),a=`${t.keyPrefix}:${r}`,o=Date.now(),i=n.get(a);if(!i||i.expiresAt<o){n.set(a,{count:1,expiresAt:o+t.windowMs});return}if(i.count>=t.max)throw new s.qQ("Too many requests, please try again later.");i.count+=1,n.set(a,i)}let o={windowMs:9e5,max:100,keyPrefix:"general"},i={windowMs:9e5,max:200,keyPrefix:"admin"}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[680,38,883,684],()=>r(9145));module.exports=s})();