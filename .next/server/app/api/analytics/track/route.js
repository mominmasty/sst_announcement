(()=>{var e={};e.id=618,e.ids=[618],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>w,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{OPTIONS:()=>d,POST:()=>c});var n=r(2706),o=r(8203),a=r(5994),i=r(9187),u=r(517);async function c(e){try{await (0,u.ay)(e,u.Nw);let{announcement_id:t,event_type:r}=await e.json();return console.log(`Tracking ${r} for announcement ${t}`),i.NextResponse.json({success:!0,data:{message:"Event tracked successfully"}})}catch(e){return i.NextResponse.json({success:!1,error:e.message||"Internal server error"},{status:e.status||500})}}async function d(){return new i.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}let p=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/analytics/track/route",pathname:"/api/analytics/track",filename:"route",bundlePath:"app/api/analytics/track/route"},resolvedPagePath:"E:\\Project\\sst_announcement\\app\\api\\analytics\\track\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:w}=p;function m(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},6487:()=>{},8335:()=>{},517:(e,t,r)=>{"use strict";r.d(t,{Nw:()=>a,ay:()=>o,uZ:()=>i});var s=r(4218);let n=new Map;async function o(e,t){let r=function(e){let t=e.headers.get("x-forwarded-for");return t?t.split(",")[0]?.trim()||"unknown":e.headers.get("x-real-ip")||e.ip||"unknown"}(e),o=`${t.keyPrefix}:${r}`,a=Date.now(),i=n.get(o);if(!i||i.expiresAt<a){n.set(o,{count:1,expiresAt:a+t.windowMs});return}if(i.count>=t.max)throw new s.qQ("Too many requests, please try again later.");i.count+=1,n.set(o,i)}let a={windowMs:9e5,max:100,keyPrefix:"general"},i={windowMs:9e5,max:200,keyPrefix:"admin"}},4218:(e,t,r)=>{"use strict";r.d(t,{D_:()=>a,m_:()=>n,qQ:()=>i,v7:()=>o});class s extends Error{constructor(e,t,r,s){super(t),this.name="ApiError",this.statusCode=e,this.code=r,this.details=s}}class n extends s{constructor(e,t){super(404,`${e}${t?` with id ${t}`:""} not found`,"NOT_FOUND")}}class o extends s{constructor(e,t){super(400,e,"BAD_REQUEST",t)}}class a extends s{constructor(e="Unauthorized"){super(401,e,"UNAUTHORIZED")}}class i extends s{constructor(e="Forbidden"){super(403,e,"FORBIDDEN")}}},2706:(e,t,r)=>{"use strict";e.exports=r(4870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[680],()=>r(5403));module.exports=s})();