/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/announcements/route";
exports.ids = ["app/api/announcements/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("async_hooks");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "drizzle-orm":
/*!******************************!*\
  !*** external "drizzle-orm" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm");;

/***/ }),

/***/ "drizzle-orm/node-postgres":
/*!********************************************!*\
  !*** external "drizzle-orm/node-postgres" ***!
  \********************************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm/node-postgres");;

/***/ }),

/***/ "drizzle-orm/pg-core":
/*!**************************************!*\
  !*** external "drizzle-orm/pg-core" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm/pg-core");;

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "prettier/plugins/html":
/*!****************************************!*\
  !*** external "prettier/plugins/html" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = import("prettier/plugins/html");;

/***/ }),

/***/ "prettier/standalone":
/*!**************************************!*\
  !*** external "prettier/standalone" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = import("prettier/standalone");;

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fannouncements%2Froute&page=%2Fapi%2Fannouncements%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fannouncements%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fannouncements%2Froute&page=%2Fapi%2Fannouncements%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fannouncements%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Project_sst_announcement_app_api_announcements_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/announcements/route.ts */ \"(rsc)/./app/api/announcements/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([E_Project_sst_announcement_app_api_announcements_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nE_Project_sst_announcement_app_api_announcements_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/announcements/route\",\n        pathname: \"/api/announcements\",\n        filename: \"route\",\n        bundlePath: \"app/api/announcements/route\"\n    },\n    resolvedPagePath: \"E:\\\\Project\\\\sst_announcement\\\\app\\\\api\\\\announcements\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Project_sst_announcement_app_api_announcements_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhbm5vdW5jZW1lbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbm5vdW5jZW1lbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5ub3VuY2VtZW50cyUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUHJvamVjdCU1Q3NzdF9hbm5vdW5jZW1lbnQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUUlM0ElNUNQcm9qZWN0JTVDc3N0X2Fubm91bmNlbWVudCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGLHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkU6XFxcXFByb2plY3RcXFxcc3N0X2Fubm91bmNlbWVudFxcXFxhcHBcXFxcYXBpXFxcXGFubm91bmNlbWVudHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Fubm91bmNlbWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbm5vdW5jZW1lbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbm5vdW5jZW1lbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRTpcXFxcUHJvamVjdFxcXFxzc3RfYW5ub3VuY2VtZW50XFxcXGFwcFxcXFxhcGlcXFxcYW5ub3VuY2VtZW50c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fannouncements%2Froute&page=%2Fapi%2Fannouncements%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fannouncements%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/announcements/route.ts":
/*!****************************************!*\
  !*** ./app/api/announcements/route.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/middleware/rateLimit */ \"(rsc)/./lib/middleware/rateLimit.ts\");\n/* harmony import */ var _lib_data_announcements__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/data/announcements */ \"(rsc)/./lib/data/announcements.ts\");\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/middleware/auth */ \"(rsc)/./lib/middleware/auth.ts\");\n/* harmony import */ var _lib_middleware_domain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/middleware/domain */ \"(rsc)/./lib/middleware/domain.ts\");\n/* harmony import */ var _lib_utils_validation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/utils/validation */ \"(rsc)/./lib/utils/validation.ts\");\n/* harmony import */ var _lib_utils_errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n/* harmony import */ var _lib_config_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _lib_schema__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/schema */ \"(rsc)/./lib/schema.ts\");\n/* harmony import */ var _lib_services_email__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/services/email */ \"(rsc)/./lib/services/email.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_data_announcements__WEBPACK_IMPORTED_MODULE_2__, _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_3__, _lib_config_db__WEBPACK_IMPORTED_MODULE_7__, _lib_schema__WEBPACK_IMPORTED_MODULE_8__, drizzle_orm__WEBPACK_IMPORTED_MODULE_10__]);\n([_lib_data_announcements__WEBPACK_IMPORTED_MODULE_2__, _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_3__, _lib_config_db__WEBPACK_IMPORTED_MODULE_7__, _lib_schema__WEBPACK_IMPORTED_MODULE_8__, drizzle_orm__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nasync function GET(request) {\n    try {\n        await (0,_lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_1__.applyRateLimit)(request, _lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_1__.generalLimiterOptions);\n        // Parse pagination params\n        const { searchParams } = new URL(request.url);\n        const limit = searchParams.get('limit') ? parseInt(searchParams.get('limit'), 10) : undefined;\n        const offset = searchParams.get('offset') ? parseInt(searchParams.get('offset'), 10) : undefined;\n        // Validate pagination\n        const validLimit = limit && limit > 0 && limit <= 100 ? limit : undefined;\n        const validOffset = offset && offset >= 0 ? offset : undefined;\n        const data = await (0,_lib_data_announcements__WEBPACK_IMPORTED_MODULE_2__.fetchAllAnnouncements)({\n            limit: validLimit,\n            offset: validOffset\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || 'Internal server error'\n        }, {\n            status: error.status || 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        await (0,_lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_1__.applyRateLimit)(request, _lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_1__.adminLimiterOptions);\n        const user = await (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_3__.requireAuth)(request, {\n            enforceDomain: true\n        });\n        (0,_lib_middleware_domain__WEBPACK_IMPORTED_MODULE_4__.requireAllowedDomain)(user);\n        (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_3__.requireAdmin)(user);\n        // Initialize schema once (cached after first call)\n        await initializeSchema();\n        const body = await request.json();\n        const validationErrors = (0,_lib_utils_validation__WEBPACK_IMPORTED_MODULE_5__.validateAnnouncement)(body);\n        if (validationErrors.length > 0) {\n            throw new _lib_utils_errors__WEBPACK_IMPORTED_MODULE_6__.BadRequestError('Validation failed', validationErrors);\n        }\n        const { title, description, category, expiry_date, scheduled_at, reminder_time, priority_until, is_active = true, status = 'active', send_email = false } = body;\n        const db = (0,_lib_config_db__WEBPACK_IMPORTED_MODULE_7__.getDb)();\n        const prioritySupported = await ensurePriorityColumn(db);\n        const now = new Date();\n        const scheduledDateRaw = scheduled_at ? new Date(scheduled_at) : null;\n        const priorityUntilRaw = priority_until ? new Date(priority_until) : null;\n        const scheduledDate = scheduledDateRaw && !isNaN(scheduledDateRaw.getTime()) ? scheduledDateRaw : null;\n        const priorityUntilDate = priorityUntilRaw && !isNaN(priorityUntilRaw.getTime()) ? priorityUntilRaw : null;\n        const isScheduled = scheduledDate ? scheduledDate > now : false;\n        const hasPriorityWindow = priorityUntilDate ? priorityUntilDate > now : false;\n        // Use 'urgent' for emergency announcements, but fallback to 'active' if enum doesn't support it\n        const finalStatus = hasPriorityWindow ? 'urgent' : isScheduled ? 'scheduled' : status;\n        const finalIsActive = isScheduled ? false : hasPriorityWindow ? true : is_active;\n        const announcementValues = {\n            title,\n            description,\n            category,\n            authorId: user.id,\n            expiryDate: expiry_date ? new Date(expiry_date) : null,\n            scheduledAt: scheduled_at ? new Date(scheduled_at) : null,\n            reminderTime: reminder_time ? new Date(reminder_time) : null,\n            isActive: finalIsActive,\n            status: finalStatus,\n            sendEmail: send_email,\n            emailSent: false\n        };\n        if (prioritySupported) {\n            announcementValues.priorityUntil = priorityUntilDate;\n        }\n        const record = await insertAnnouncementWithFallback(db, announcementValues, prioritySupported);\n        let emailSent = false;\n        let emailMessage = null;\n        if (send_email && !isScheduled) {\n            try {\n                // Hardcoded email recipient\n                const emails = [\n                    'mohammed.24bcs10278@sst.scaler.com'\n                ];\n                if (emails.length > 0) {\n                    const result = await (0,_lib_services_email__WEBPACK_IMPORTED_MODULE_9__.sendAnnouncementEmail)({\n                        title,\n                        description,\n                        category,\n                        recipientEmails: emails,\n                        expiryDate: expiry_date || null,\n                        scheduledAt: scheduled_at || null\n                    });\n                    emailSent = result.success;\n                    emailMessage = result.message || result.error || null;\n                    if (result.success) {\n                        await db.update(_lib_schema__WEBPACK_IMPORTED_MODULE_8__.announcements).set({\n                            emailSent: true\n                        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_8__.announcements.id, record.id));\n                    }\n                }\n            } catch (error) {\n                console.error('Error sending announcement email:', error);\n                emailMessage = error instanceof Error ? error.message : 'Failed to send email';\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                announcement: (0,_lib_data_announcements__WEBPACK_IMPORTED_MODULE_2__.mapAnnouncement)(record),\n                emailSent,\n                emailMessage\n            }\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || 'Internal server error'\n        }, {\n            status: error.status || 500\n        });\n    }\n}\nasync function OPTIONS() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n    });\n}\nlet priorityColumnState = 'unknown';\nlet urgentStatusEnsured = false;\nlet initializationPromise = null;\nasync function initializeSchema() {\n    if (initializationPromise) {\n        return initializationPromise;\n    }\n    initializationPromise = (async ()=>{\n        const db = (0,_lib_config_db__WEBPACK_IMPORTED_MODULE_7__.getDb)();\n        await Promise.all([\n            ensurePriorityColumn(db),\n            ensureUrgentStatusEnum(db)\n        ]);\n    })();\n    return initializationPromise;\n}\nasync function ensurePriorityColumn(db) {\n    if (priorityColumnState === 'supported') return true;\n    if (priorityColumnState === 'unsupported') return false;\n    try {\n        // Check if column exists\n        const checkResult = await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`\r\n      SELECT column_name FROM information_schema.columns\r\n      WHERE table_name = 'announcements' AND column_name = 'priority_until'\r\n      LIMIT 1\r\n    `);\n        if (checkResult?.rows?.length > 0) {\n            priorityColumnState = 'supported';\n            return true;\n        }\n        // Column doesn't exist, try to add it\n        await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`ALTER TABLE announcements ADD COLUMN IF NOT EXISTS priority_until TIMESTAMPTZ`);\n        // Verify it was added\n        const verifyResult = await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`\r\n      SELECT column_name FROM information_schema.columns\r\n      WHERE table_name = 'announcements' AND column_name = 'priority_until'\r\n      LIMIT 1\r\n    `);\n        if (verifyResult?.rows?.length > 0) {\n            priorityColumnState = 'supported';\n            return true;\n        }\n        // Column still doesn't exist after trying to add it\n        priorityColumnState = 'unsupported';\n        return false;\n    } catch (error) {\n        console.warn('Unable to add/check priority_until column; falling back without priority support', error);\n        priorityColumnState = 'unsupported';\n        return false;\n    }\n}\nasync function ensureUrgentStatusEnum(db) {\n    if (urgentStatusEnsured) return;\n    try {\n        // Check if announcement_status enum exists\n        const enumCheck = await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`\r\n      SELECT 1 FROM pg_type WHERE typname = 'announcement_status' LIMIT 1\r\n    `);\n        if (enumCheck?.rows?.length > 0) {\n            // Enum exists, check if 'urgent' is already in it\n            const urgentCheck = await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`\r\n        SELECT 1 FROM pg_enum \r\n        WHERE enumlabel = 'urgent' \r\n        AND enumtypid = (SELECT oid FROM pg_type WHERE typname = 'announcement_status')\r\n        LIMIT 1\r\n      `);\n            if (!urgentCheck?.rows?.length) {\n                // Add 'urgent' to the enum (PostgreSQL doesn't support IF NOT EXISTS for enums)\n                try {\n                    await db.execute((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.sql)`ALTER TYPE announcement_status ADD VALUE 'urgent'`);\n                } catch (addError) {\n                    // If it already exists or fails, that's okay\n                    const errorMsg = addError?.message || String(addError);\n                    if (!errorMsg.includes('already exists')) {\n                        console.warn('Could not add urgent to enum:', errorMsg);\n                    }\n                }\n            }\n        }\n        // If enum doesn't exist, status is varchar and 'urgent' will work fine\n        urgentStatusEnsured = true;\n    } catch (error) {\n        // If we can't check/add to enum, status is probably varchar anyway, so 'urgent' should work\n        console.warn('Could not ensure urgent status in enum (may not be needed)', error);\n        urgentStatusEnsured = true; // Mark as done to avoid retrying\n    }\n}\nasync function insertAnnouncementWithFallback(db, values, prioritySupported) {\n    if (prioritySupported) {\n        try {\n            const [record] = await db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_8__.announcements).values(values).returning();\n            return record;\n        } catch (error) {\n            // If insert fails with priority column, retry without it\n            if (isMissingPriorityColumnError(error)) {\n                priorityColumnState = 'unsupported';\n            // Fall through to manual insert below\n            } else if (isInvalidEnumError(error) && values.status === 'urgent') {\n                // If 'urgent' status is not supported by enum, fallback to 'active'\n                console.warn('Urgent status not supported, using active instead');\n                const fallbackValues = {\n                    ...values,\n                    status: 'active'\n                };\n                const [record] = await db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_8__.announcements).values(fallbackValues).returning();\n                return record;\n            } else {\n                throw error;\n            }\n        }\n    }\n    // Priority column not available - use manual insert without that column\n    const pool = (0,_lib_config_db__WEBPACK_IMPORTED_MODULE_7__.getPool)();\n    // Use 'active' instead of 'urgent' if enum doesn't support it\n    const insertStatus = values.status === 'urgent' ? 'active' : values.status ?? 'active';\n    try {\n        const manualInsert = await pool.query({\n            text: `\n        INSERT INTO announcements (\n          title,\n          description,\n          category,\n          author_id,\n          expiry_date,\n          scheduled_at,\n          reminder_time,\n          is_active,\n          status,\n          send_email,\n          email_sent\n        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)\n        RETURNING *\n      `,\n            values: [\n                values.title,\n                values.description,\n                values.category,\n                values.authorId,\n                values.expiryDate ?? null,\n                values.scheduledAt ?? null,\n                values.reminderTime ?? null,\n                values.isActive ?? true,\n                insertStatus,\n                values.sendEmail ?? false,\n                values.emailSent ?? false\n            ]\n        });\n        if (!manualInsert.rows?.length) {\n            throw new Error('Failed to insert announcement without priority column');\n        }\n        // Map snake_case to camelCase to match Drizzle schema format\n        return mapRowToAnnouncement(manualInsert.rows[0]);\n    } catch (error) {\n        // If still fails with enum error, try with 'active' status\n        if (isInvalidEnumError(error) && insertStatus !== 'active') {\n            const manualInsert = await pool.query({\n                text: `\n          INSERT INTO announcements (\n            title,\n            description,\n            category,\n            author_id,\n            expiry_date,\n            scheduled_at,\n            reminder_time,\n            is_active,\n            status,\n            send_email,\n            email_sent\n          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)\n          RETURNING *\n        `,\n                values: [\n                    values.title,\n                    values.description,\n                    values.category,\n                    values.authorId,\n                    values.expiryDate ?? null,\n                    values.scheduledAt ?? null,\n                    values.reminderTime ?? null,\n                    values.isActive ?? true,\n                    'active',\n                    values.sendEmail ?? false,\n                    values.emailSent ?? false\n                ]\n            });\n            if (!manualInsert.rows?.length) {\n                throw new Error('Failed to insert announcement');\n            }\n            return mapRowToAnnouncement(manualInsert.rows[0]);\n        }\n        throw error;\n    }\n}\nfunction isMissingPriorityColumnError(error) {\n    const message = error instanceof Error ? error.message : String(error);\n    const lowerMessage = message.toLowerCase();\n    return lowerMessage.includes('priority_until') || lowerMessage.includes('priority until') || lowerMessage.includes('column') && lowerMessage.includes('does not exist');\n}\nfunction isInvalidEnumError(error) {\n    const message = error instanceof Error ? error.message : String(error);\n    const lowerMessage = message.toLowerCase();\n    return lowerMessage.includes('invalid input value for enum') || lowerMessage.includes('invalid enum value');\n}\nfunction mapRowToAnnouncement(row) {\n    return {\n        id: row.id,\n        title: row.title,\n        description: row.description,\n        category: row.category,\n        authorId: row.author_id,\n        createdAt: row.created_at,\n        updatedAt: row.updated_at,\n        expiryDate: row.expiry_date,\n        scheduledAt: row.scheduled_at,\n        reminderTime: row.reminder_time,\n        isActive: row.is_active,\n        status: row.status,\n        viewsCount: row.views_count ?? 0,\n        clicksCount: row.clicks_count ?? 0,\n        sendEmail: row.send_email ?? false,\n        emailSent: row.email_sent ?? false,\n        priorityUntil: null\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SXZGLE1BQU07UUFDbEI2RixZQUFZTixJQUFJTyxXQUFXLElBQUk7UUFDL0JDLGFBQWFSLElBQUlTLFlBQVksSUFBSTtRQUNqQ3pELFdBQVdnRCxJQUFJdkUsVUFBVSxJQUFJO1FBQzdCd0IsV0FBVytDLElBQUlVLFVBQVUsSUFBSTtRQUM3QnhELGVBQWU7SUFDakI7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGFwcFxcYXBpXFxhbm5vdW5jZW1lbnRzXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBhcHBseVJhdGVMaW1pdCwgZ2VuZXJhbExpbWl0ZXJPcHRpb25zLCBhZG1pbkxpbWl0ZXJPcHRpb25zIH0gZnJvbSAnQC9saWIvbWlkZGxld2FyZS9yYXRlTGltaXQnO1xyXG5pbXBvcnQgeyBmZXRjaEFsbEFubm91bmNlbWVudHMsIG1hcEFubm91bmNlbWVudCB9IGZyb20gJ0AvbGliL2RhdGEvYW5ub3VuY2VtZW50cyc7XHJcbmltcG9ydCB7IHJlcXVpcmVBdXRoLCByZXF1aXJlQWRtaW4gfSBmcm9tICdAL2xpYi9taWRkbGV3YXJlL2F1dGgnO1xyXG5pbXBvcnQgeyByZXF1aXJlQWxsb3dlZERvbWFpbiB9IGZyb20gJ0AvbGliL21pZGRsZXdhcmUvZG9tYWluJztcclxuaW1wb3J0IHsgdmFsaWRhdGVBbm5vdW5jZW1lbnQgfSBmcm9tICdAL2xpYi91dGlscy92YWxpZGF0aW9uJztcclxuaW1wb3J0IHsgQmFkUmVxdWVzdEVycm9yIH0gZnJvbSAnQC9saWIvdXRpbHMvZXJyb3JzJztcclxuaW1wb3J0IHsgZ2V0RGIsIGdldFBvb2wgfSBmcm9tICdAL2xpYi9jb25maWcvZGInO1xyXG5pbXBvcnQgeyBhbm5vdW5jZW1lbnRzIH0gZnJvbSAnQC9saWIvc2NoZW1hJztcclxuaW1wb3J0IHsgZ2V0QWxsVXNlcnMgfSBmcm9tICdAL2xpYi9kYXRhL3VzZXJzJztcclxuaW1wb3J0IHsgc2VuZEFubm91bmNlbWVudEVtYWlsIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZW1haWwnO1xyXG5pbXBvcnQgeyBlcSwgc3FsIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBhcHBseVJhdGVMaW1pdChyZXF1ZXN0LCBnZW5lcmFsTGltaXRlck9wdGlvbnMpO1xyXG4gICAgXHJcbiAgICAvLyBQYXJzZSBwYWdpbmF0aW9uIHBhcmFtc1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgbGltaXQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSEsIDEwKSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IG9mZnNldCA9IHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpID8gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnb2Zmc2V0JykhLCAxMCkgOiB1bmRlZmluZWQ7XHJcbiAgICBcclxuICAgIC8vIFZhbGlkYXRlIHBhZ2luYXRpb25cclxuICAgIGNvbnN0IHZhbGlkTGltaXQgPSBsaW1pdCAmJiBsaW1pdCA+IDAgJiYgbGltaXQgPD0gMTAwID8gbGltaXQgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCB2YWxpZE9mZnNldCA9IG9mZnNldCAmJiBvZmZzZXQgPj0gMCA/IG9mZnNldCA6IHVuZGVmaW5lZDtcclxuICAgIFxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoQWxsQW5ub3VuY2VtZW50cyh7IFxyXG4gICAgICBsaW1pdDogdmFsaWRMaW1pdCwgXHJcbiAgICAgIG9mZnNldDogdmFsaWRPZmZzZXQgXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IGVycm9yLnN0YXR1cyB8fCA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGFwcGx5UmF0ZUxpbWl0KHJlcXVlc3QsIGFkbWluTGltaXRlck9wdGlvbnMpO1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcXVpcmVBdXRoKHJlcXVlc3QsIHsgZW5mb3JjZURvbWFpbjogdHJ1ZSB9KTtcclxuICAgIHJlcXVpcmVBbGxvd2VkRG9tYWluKHVzZXIpO1xyXG4gICAgcmVxdWlyZUFkbWluKHVzZXIpO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgc2NoZW1hIG9uY2UgKGNhY2hlZCBhZnRlciBmaXJzdCBjYWxsKVxyXG4gICAgYXdhaXQgaW5pdGlhbGl6ZVNjaGVtYSgpO1xyXG5cclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSB2YWxpZGF0ZUFubm91bmNlbWVudChib2R5KTtcclxuICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEJhZFJlcXVlc3RFcnJvcignVmFsaWRhdGlvbiBmYWlsZWQnLCB2YWxpZGF0aW9uRXJyb3JzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgY2F0ZWdvcnksXHJcbiAgICAgIGV4cGlyeV9kYXRlLFxyXG4gICAgICBzY2hlZHVsZWRfYXQsXHJcbiAgICAgIHJlbWluZGVyX3RpbWUsXHJcbiAgICAgIHByaW9yaXR5X3VudGlsLFxyXG4gICAgICBpc19hY3RpdmUgPSB0cnVlLFxyXG4gICAgICBzdGF0dXMgPSAnYWN0aXZlJyxcclxuICAgICAgc2VuZF9lbWFpbCA9IGZhbHNlLFxyXG4gICAgfSA9IGJvZHk7XHJcblxyXG4gICAgY29uc3QgZGIgPSBnZXREYigpO1xyXG4gICAgY29uc3QgcHJpb3JpdHlTdXBwb3J0ZWQgPSBhd2FpdCBlbnN1cmVQcmlvcml0eUNvbHVtbihkYik7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3Qgc2NoZWR1bGVkRGF0ZVJhdyA9IHNjaGVkdWxlZF9hdCA/IG5ldyBEYXRlKHNjaGVkdWxlZF9hdCkgOiBudWxsO1xyXG4gICAgY29uc3QgcHJpb3JpdHlVbnRpbFJhdyA9IHByaW9yaXR5X3VudGlsID8gbmV3IERhdGUocHJpb3JpdHlfdW50aWwpIDogbnVsbDtcclxuICAgIGNvbnN0IHNjaGVkdWxlZERhdGUgPSBzY2hlZHVsZWREYXRlUmF3ICYmICFpc05hTihzY2hlZHVsZWREYXRlUmF3LmdldFRpbWUoKSkgPyBzY2hlZHVsZWREYXRlUmF3IDogbnVsbDtcclxuICAgIGNvbnN0IHByaW9yaXR5VW50aWxEYXRlID0gcHJpb3JpdHlVbnRpbFJhdyAmJiAhaXNOYU4ocHJpb3JpdHlVbnRpbFJhdy5nZXRUaW1lKCkpID8gcHJpb3JpdHlVbnRpbFJhdyA6IG51bGw7XHJcbiAgICBjb25zdCBpc1NjaGVkdWxlZCA9IHNjaGVkdWxlZERhdGUgPyBzY2hlZHVsZWREYXRlID4gbm93IDogZmFsc2U7XHJcbiAgICBjb25zdCBoYXNQcmlvcml0eVdpbmRvdyA9IHByaW9yaXR5VW50aWxEYXRlID8gcHJpb3JpdHlVbnRpbERhdGUgPiBub3cgOiBmYWxzZTtcclxuICAgIFxyXG4gICAgLy8gVXNlICd1cmdlbnQnIGZvciBlbWVyZ2VuY3kgYW5ub3VuY2VtZW50cywgYnV0IGZhbGxiYWNrIHRvICdhY3RpdmUnIGlmIGVudW0gZG9lc24ndCBzdXBwb3J0IGl0XHJcbiAgICBjb25zdCBmaW5hbFN0YXR1cyA9IGhhc1ByaW9yaXR5V2luZG93ID8gJ3VyZ2VudCcgOiBpc1NjaGVkdWxlZCA/ICdzY2hlZHVsZWQnIDogc3RhdHVzO1xyXG4gICAgY29uc3QgZmluYWxJc0FjdGl2ZSA9IGlzU2NoZWR1bGVkID8gZmFsc2UgOiBoYXNQcmlvcml0eVdpbmRvdyA/IHRydWUgOiBpc19hY3RpdmU7XHJcblxyXG4gICAgY29uc3QgYW5ub3VuY2VtZW50VmFsdWVzOiBhbnkgPSB7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgY2F0ZWdvcnksXHJcbiAgICAgIGF1dGhvcklkOiB1c2VyLmlkLFxyXG4gICAgICBleHBpcnlEYXRlOiBleHBpcnlfZGF0ZSA/IG5ldyBEYXRlKGV4cGlyeV9kYXRlKSA6IG51bGwsXHJcbiAgICAgIHNjaGVkdWxlZEF0OiBzY2hlZHVsZWRfYXQgPyBuZXcgRGF0ZShzY2hlZHVsZWRfYXQpIDogbnVsbCxcclxuICAgICAgcmVtaW5kZXJUaW1lOiByZW1pbmRlcl90aW1lID8gbmV3IERhdGUocmVtaW5kZXJfdGltZSkgOiBudWxsLFxyXG4gICAgICBpc0FjdGl2ZTogZmluYWxJc0FjdGl2ZSxcclxuICAgICAgc3RhdHVzOiBmaW5hbFN0YXR1cyxcclxuICAgICAgc2VuZEVtYWlsOiBzZW5kX2VtYWlsLFxyXG4gICAgICBlbWFpbFNlbnQ6IGZhbHNlLFxyXG4gICAgfTtcclxuICAgIGlmIChwcmlvcml0eVN1cHBvcnRlZCkge1xyXG4gICAgICBhbm5vdW5jZW1lbnRWYWx1ZXMucHJpb3JpdHlVbnRpbCA9IHByaW9yaXR5VW50aWxEYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlY29yZCA9IGF3YWl0IGluc2VydEFubm91bmNlbWVudFdpdGhGYWxsYmFjayhkYiwgYW5ub3VuY2VtZW50VmFsdWVzLCBwcmlvcml0eVN1cHBvcnRlZCk7XHJcblxyXG4gICAgbGV0IGVtYWlsU2VudCA9IGZhbHNlO1xyXG4gICAgbGV0IGVtYWlsTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgaWYgKHNlbmRfZW1haWwgJiYgIWlzU2NoZWR1bGVkKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gSGFyZGNvZGVkIGVtYWlsIHJlY2lwaWVudFxyXG4gICAgICAgIGNvbnN0IGVtYWlscyA9IFsnbW9oYW1tZWQuMjRiY3MxMDI3OEBzc3Quc2NhbGVyLmNvbSddO1xyXG4gICAgICAgIGlmIChlbWFpbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZEFubm91bmNlbWVudEVtYWlsKHtcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBjYXRlZ29yeSxcclxuICAgICAgICAgICAgcmVjaXBpZW50RW1haWxzOiBlbWFpbHMsXHJcbiAgICAgICAgICAgIGV4cGlyeURhdGU6IGV4cGlyeV9kYXRlIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHNjaGVkdWxlZEF0OiBzY2hlZHVsZWRfYXQgfHwgbnVsbCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZW1haWxTZW50ID0gcmVzdWx0LnN1Y2Nlc3M7XHJcbiAgICAgICAgICBlbWFpbE1lc3NhZ2UgPSByZXN1bHQubWVzc2FnZSB8fCByZXN1bHQuZXJyb3IgfHwgbnVsbDtcclxuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICBhd2FpdCBkYlxyXG4gICAgICAgICAgICAgIC51cGRhdGUoYW5ub3VuY2VtZW50cylcclxuICAgICAgICAgICAgICAuc2V0KHsgZW1haWxTZW50OiB0cnVlIH0pXHJcbiAgICAgICAgICAgICAgLndoZXJlKGVxKGFubm91bmNlbWVudHMuaWQsIHJlY29yZC5pZCEpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBhbm5vdW5jZW1lbnQgZW1haWw6JywgZXJyb3IpO1xyXG4gICAgICAgIGVtYWlsTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZW5kIGVtYWlsJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBhbm5vdW5jZW1lbnQ6IG1hcEFubm91bmNlbWVudChyZWNvcmQpLFxyXG4gICAgICAgIGVtYWlsU2VudCxcclxuICAgICAgICBlbWFpbE1lc3NhZ2UsXHJcbiAgICAgIH0sXHJcbiAgICB9LCB7IHN0YXR1czogMjAxIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IGVycm9yLnN0YXR1cyB8fCA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBPUFRJT05TKCkge1xyXG4gIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcclxuICAgIHN0YXR1czogMjAwLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsIFBPU1QsIE9QVElPTlMnLFxyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb24nLFxyXG4gICAgfSxcclxuICB9KTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyAoc2FtZSBhcyBvcmlnaW5hbClcclxudHlwZSBQcmlvcml0eUNvbHVtblN0YXRlID0gJ3Vua25vd24nIHwgJ3N1cHBvcnRlZCcgfCAndW5zdXBwb3J0ZWQnO1xyXG5sZXQgcHJpb3JpdHlDb2x1bW5TdGF0ZTogUHJpb3JpdHlDb2x1bW5TdGF0ZSA9ICd1bmtub3duJztcclxubGV0IHVyZ2VudFN0YXR1c0Vuc3VyZWQgPSBmYWxzZTtcclxubGV0IGluaXRpYWxpemF0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IG51bGwgPSBudWxsO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVNjaGVtYSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAoaW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6YXRpb25Qcm9taXNlID0gKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgZW5zdXJlUHJpb3JpdHlDb2x1bW4oZGIpLFxyXG4gICAgICBlbnN1cmVVcmdlbnRTdGF0dXNFbnVtKGRiKVxyXG4gICAgXSk7XHJcbiAgfSkoKTtcclxuXHJcbiAgcmV0dXJuIGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlUHJpb3JpdHlDb2x1bW4oZGI6IFJldHVyblR5cGU8dHlwZW9mIGdldERiPik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGlmIChwcmlvcml0eUNvbHVtblN0YXRlID09PSAnc3VwcG9ydGVkJykgcmV0dXJuIHRydWU7XHJcbiAgaWYgKHByaW9yaXR5Q29sdW1uU3RhdGUgPT09ICd1bnN1cHBvcnRlZCcpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIENoZWNrIGlmIGNvbHVtbiBleGlzdHNcclxuICAgIGNvbnN0IGNoZWNrUmVzdWx0OiBhbnkgPSBhd2FpdCBkYi5leGVjdXRlKHNxbGBcclxuICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnNcclxuICAgICAgV0hFUkUgdGFibGVfbmFtZSA9ICdhbm5vdW5jZW1lbnRzJyBBTkQgY29sdW1uX25hbWUgPSAncHJpb3JpdHlfdW50aWwnXHJcbiAgICAgIExJTUlUIDFcclxuICAgIGApO1xyXG4gICAgXHJcbiAgICBpZiAoY2hlY2tSZXN1bHQ/LnJvd3M/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgcHJpb3JpdHlDb2x1bW5TdGF0ZSA9ICdzdXBwb3J0ZWQnO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb2x1bW4gZG9lc24ndCBleGlzdCwgdHJ5IHRvIGFkZCBpdFxyXG4gICAgYXdhaXQgZGIuZXhlY3V0ZShzcWxgQUxURVIgVEFCTEUgYW5ub3VuY2VtZW50cyBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgcHJpb3JpdHlfdW50aWwgVElNRVNUQU1QVFpgKTtcclxuICAgIFxyXG4gICAgLy8gVmVyaWZ5IGl0IHdhcyBhZGRlZFxyXG4gICAgY29uc3QgdmVyaWZ5UmVzdWx0OiBhbnkgPSBhd2FpdCBkYi5leGVjdXRlKHNxbGBcclxuICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnNcclxuICAgICAgV0hFUkUgdGFibGVfbmFtZSA9ICdhbm5vdW5jZW1lbnRzJyBBTkQgY29sdW1uX25hbWUgPSAncHJpb3JpdHlfdW50aWwnXHJcbiAgICAgIExJTUlUIDFcclxuICAgIGApO1xyXG4gICAgXHJcbiAgICBpZiAodmVyaWZ5UmVzdWx0Py5yb3dzPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHByaW9yaXR5Q29sdW1uU3RhdGUgPSAnc3VwcG9ydGVkJztcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvbHVtbiBzdGlsbCBkb2Vzbid0IGV4aXN0IGFmdGVyIHRyeWluZyB0byBhZGQgaXRcclxuICAgIHByaW9yaXR5Q29sdW1uU3RhdGUgPSAndW5zdXBwb3J0ZWQnO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBhZGQvY2hlY2sgcHJpb3JpdHlfdW50aWwgY29sdW1uOyBmYWxsaW5nIGJhY2sgd2l0aG91dCBwcmlvcml0eSBzdXBwb3J0JywgZXJyb3IpO1xyXG4gICAgcHJpb3JpdHlDb2x1bW5TdGF0ZSA9ICd1bnN1cHBvcnRlZCc7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVVcmdlbnRTdGF0dXNFbnVtKGRiOiBSZXR1cm5UeXBlPHR5cGVvZiBnZXREYj4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAodXJnZW50U3RhdHVzRW5zdXJlZCkgcmV0dXJuO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgaWYgYW5ub3VuY2VtZW50X3N0YXR1cyBlbnVtIGV4aXN0c1xyXG4gICAgY29uc3QgZW51bUNoZWNrOiBhbnkgPSBhd2FpdCBkYi5leGVjdXRlKHNxbGBcclxuICAgICAgU0VMRUNUIDEgRlJPTSBwZ190eXBlIFdIRVJFIHR5cG5hbWUgPSAnYW5ub3VuY2VtZW50X3N0YXR1cycgTElNSVQgMVxyXG4gICAgYCk7XHJcbiAgICBcclxuICAgIGlmIChlbnVtQ2hlY2s/LnJvd3M/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgLy8gRW51bSBleGlzdHMsIGNoZWNrIGlmICd1cmdlbnQnIGlzIGFscmVhZHkgaW4gaXRcclxuICAgICAgY29uc3QgdXJnZW50Q2hlY2s6IGFueSA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsYFxyXG4gICAgICAgIFNFTEVDVCAxIEZST00gcGdfZW51bSBcclxuICAgICAgICBXSEVSRSBlbnVtbGFiZWwgPSAndXJnZW50JyBcclxuICAgICAgICBBTkQgZW51bXR5cGlkID0gKFNFTEVDVCBvaWQgRlJPTSBwZ190eXBlIFdIRVJFIHR5cG5hbWUgPSAnYW5ub3VuY2VtZW50X3N0YXR1cycpXHJcbiAgICAgICAgTElNSVQgMVxyXG4gICAgICBgKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdXJnZW50Q2hlY2s/LnJvd3M/Lmxlbmd0aCkge1xyXG4gICAgICAgIC8vIEFkZCAndXJnZW50JyB0byB0aGUgZW51bSAoUG9zdGdyZVNRTCBkb2Vzbid0IHN1cHBvcnQgSUYgTk9UIEVYSVNUUyBmb3IgZW51bXMpXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsYEFMVEVSIFRZUEUgYW5ub3VuY2VtZW50X3N0YXR1cyBBREQgVkFMVUUgJ3VyZ2VudCdgKTtcclxuICAgICAgICB9IGNhdGNoIChhZGRFcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAvLyBJZiBpdCBhbHJlYWR5IGV4aXN0cyBvciBmYWlscywgdGhhdCdzIG9rYXlcclxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYWRkRXJyb3I/Lm1lc3NhZ2UgfHwgU3RyaW5nKGFkZEVycm9yKTtcclxuICAgICAgICAgIGlmICghZXJyb3JNc2cuaW5jbHVkZXMoJ2FscmVhZHkgZXhpc3RzJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgYWRkIHVyZ2VudCB0byBlbnVtOicsIGVycm9yTXNnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIElmIGVudW0gZG9lc24ndCBleGlzdCwgc3RhdHVzIGlzIHZhcmNoYXIgYW5kICd1cmdlbnQnIHdpbGwgd29yayBmaW5lXHJcbiAgICB1cmdlbnRTdGF0dXNFbnN1cmVkID0gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gSWYgd2UgY2FuJ3QgY2hlY2svYWRkIHRvIGVudW0sIHN0YXR1cyBpcyBwcm9iYWJseSB2YXJjaGFyIGFueXdheSwgc28gJ3VyZ2VudCcgc2hvdWxkIHdvcmtcclxuICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGVuc3VyZSB1cmdlbnQgc3RhdHVzIGluIGVudW0gKG1heSBub3QgYmUgbmVlZGVkKScsIGVycm9yKTtcclxuICAgIHVyZ2VudFN0YXR1c0Vuc3VyZWQgPSB0cnVlOyAvLyBNYXJrIGFzIGRvbmUgdG8gYXZvaWQgcmV0cnlpbmdcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGluc2VydEFubm91bmNlbWVudFdpdGhGYWxsYmFjayhcclxuICBkYjogUmV0dXJuVHlwZTx0eXBlb2YgZ2V0RGI+LFxyXG4gIHZhbHVlczogdHlwZW9mIGFubm91bmNlbWVudHMuJGluZmVySW5zZXJ0LFxyXG4gIHByaW9yaXR5U3VwcG9ydGVkOiBib29sZWFuXHJcbikge1xyXG4gIGlmIChwcmlvcml0eVN1cHBvcnRlZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW3JlY29yZF0gPSBhd2FpdCBkYi5pbnNlcnQoYW5ub3VuY2VtZW50cykudmFsdWVzKHZhbHVlcykucmV0dXJuaW5nKCk7XHJcbiAgICAgIHJldHVybiByZWNvcmQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZiBpbnNlcnQgZmFpbHMgd2l0aCBwcmlvcml0eSBjb2x1bW4sIHJldHJ5IHdpdGhvdXQgaXRcclxuICAgICAgaWYgKGlzTWlzc2luZ1ByaW9yaXR5Q29sdW1uRXJyb3IoZXJyb3IpKSB7XHJcbiAgICAgICAgcHJpb3JpdHlDb2x1bW5TdGF0ZSA9ICd1bnN1cHBvcnRlZCc7XHJcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIG1hbnVhbCBpbnNlcnQgYmVsb3dcclxuICAgICAgfSBlbHNlIGlmIChpc0ludmFsaWRFbnVtRXJyb3IoZXJyb3IpICYmIHZhbHVlcy5zdGF0dXMgPT09ICd1cmdlbnQnKSB7XHJcbiAgICAgICAgLy8gSWYgJ3VyZ2VudCcgc3RhdHVzIGlzIG5vdCBzdXBwb3J0ZWQgYnkgZW51bSwgZmFsbGJhY2sgdG8gJ2FjdGl2ZSdcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1VyZ2VudCBzdGF0dXMgbm90IHN1cHBvcnRlZCwgdXNpbmcgYWN0aXZlIGluc3RlYWQnKTtcclxuICAgICAgICBjb25zdCBmYWxsYmFja1ZhbHVlcyA9IHsgLi4udmFsdWVzLCBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0IH07XHJcbiAgICAgICAgY29uc3QgW3JlY29yZF0gPSBhd2FpdCBkYi5pbnNlcnQoYW5ub3VuY2VtZW50cykudmFsdWVzKGZhbGxiYWNrVmFsdWVzKS5yZXR1cm5pbmcoKTtcclxuICAgICAgICByZXR1cm4gcmVjb3JkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQcmlvcml0eSBjb2x1bW4gbm90IGF2YWlsYWJsZSAtIHVzZSBtYW51YWwgaW5zZXJ0IHdpdGhvdXQgdGhhdCBjb2x1bW5cclxuICBjb25zdCBwb29sID0gZ2V0UG9vbCgpO1xyXG4gIFxyXG4gIC8vIFVzZSAnYWN0aXZlJyBpbnN0ZWFkIG9mICd1cmdlbnQnIGlmIGVudW0gZG9lc24ndCBzdXBwb3J0IGl0XHJcbiAgY29uc3QgaW5zZXJ0U3RhdHVzID0gdmFsdWVzLnN0YXR1cyA9PT0gJ3VyZ2VudCcgPyAnYWN0aXZlJyA6ICh2YWx1ZXMuc3RhdHVzID8/ICdhY3RpdmUnKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgbWFudWFsSW5zZXJ0ID0gYXdhaXQgcG9vbC5xdWVyeSh7XHJcbiAgICAgIHRleHQ6IGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBhbm5vdW5jZW1lbnRzIChcclxuICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBjYXRlZ29yeSxcclxuICAgICAgICAgIGF1dGhvcl9pZCxcclxuICAgICAgICAgIGV4cGlyeV9kYXRlLFxyXG4gICAgICAgICAgc2NoZWR1bGVkX2F0LFxyXG4gICAgICAgICAgcmVtaW5kZXJfdGltZSxcclxuICAgICAgICAgIGlzX2FjdGl2ZSxcclxuICAgICAgICAgIHN0YXR1cyxcclxuICAgICAgICAgIHNlbmRfZW1haWwsXHJcbiAgICAgICAgICBlbWFpbF9zZW50XHJcbiAgICAgICAgKSBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCwgJDksICQxMCwgJDExKVxyXG4gICAgICAgIFJFVFVSTklORyAqXHJcbiAgICAgIGAsXHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIHZhbHVlcy50aXRsZSxcclxuICAgICAgICB2YWx1ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgdmFsdWVzLmNhdGVnb3J5LFxyXG4gICAgICAgIHZhbHVlcy5hdXRob3JJZCxcclxuICAgICAgICB2YWx1ZXMuZXhwaXJ5RGF0ZSA/PyBudWxsLFxyXG4gICAgICAgIHZhbHVlcy5zY2hlZHVsZWRBdCA/PyBudWxsLFxyXG4gICAgICAgIHZhbHVlcy5yZW1pbmRlclRpbWUgPz8gbnVsbCxcclxuICAgICAgICB2YWx1ZXMuaXNBY3RpdmUgPz8gdHJ1ZSxcclxuICAgICAgICBpbnNlcnRTdGF0dXMsXHJcbiAgICAgICAgdmFsdWVzLnNlbmRFbWFpbCA/PyBmYWxzZSxcclxuICAgICAgICB2YWx1ZXMuZW1haWxTZW50ID8/IGZhbHNlLFxyXG4gICAgICBdLFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGlmICghbWFudWFsSW5zZXJ0LnJvd3M/Lmxlbmd0aCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnNlcnQgYW5ub3VuY2VtZW50IHdpdGhvdXQgcHJpb3JpdHkgY29sdW1uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE1hcCBzbmFrZV9jYXNlIHRvIGNhbWVsQ2FzZSB0byBtYXRjaCBEcml6emxlIHNjaGVtYSBmb3JtYXRcclxuICAgIHJldHVybiBtYXBSb3dUb0Fubm91bmNlbWVudChtYW51YWxJbnNlcnQucm93c1swXSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIElmIHN0aWxsIGZhaWxzIHdpdGggZW51bSBlcnJvciwgdHJ5IHdpdGggJ2FjdGl2ZScgc3RhdHVzXHJcbiAgICBpZiAoaXNJbnZhbGlkRW51bUVycm9yKGVycm9yKSAmJiBpbnNlcnRTdGF0dXMgIT09ICdhY3RpdmUnKSB7XHJcbiAgICAgIGNvbnN0IG1hbnVhbEluc2VydCA9IGF3YWl0IHBvb2wucXVlcnkoe1xyXG4gICAgICAgIHRleHQ6IGBcclxuICAgICAgICAgIElOU0VSVCBJTlRPIGFubm91bmNlbWVudHMgKFxyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICBhdXRob3JfaWQsXHJcbiAgICAgICAgICAgIGV4cGlyeV9kYXRlLFxyXG4gICAgICAgICAgICBzY2hlZHVsZWRfYXQsXHJcbiAgICAgICAgICAgIHJlbWluZGVyX3RpbWUsXHJcbiAgICAgICAgICAgIGlzX2FjdGl2ZSxcclxuICAgICAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgICAgICBzZW5kX2VtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbF9zZW50XHJcbiAgICAgICAgICApIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSwgJDEwLCAkMTEpXHJcbiAgICAgICAgICBSRVRVUk5JTkcgKlxyXG4gICAgICAgIGAsXHJcbiAgICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgICB2YWx1ZXMudGl0bGUsXHJcbiAgICAgICAgICB2YWx1ZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICB2YWx1ZXMuY2F0ZWdvcnksXHJcbiAgICAgICAgICB2YWx1ZXMuYXV0aG9ySWQsXHJcbiAgICAgICAgICB2YWx1ZXMuZXhwaXJ5RGF0ZSA/PyBudWxsLFxyXG4gICAgICAgICAgdmFsdWVzLnNjaGVkdWxlZEF0ID8/IG51bGwsXHJcbiAgICAgICAgICB2YWx1ZXMucmVtaW5kZXJUaW1lID8/IG51bGwsXHJcbiAgICAgICAgICB2YWx1ZXMuaXNBY3RpdmUgPz8gdHJ1ZSxcclxuICAgICAgICAgICdhY3RpdmUnLFxyXG4gICAgICAgICAgdmFsdWVzLnNlbmRFbWFpbCA/PyBmYWxzZSxcclxuICAgICAgICAgIHZhbHVlcy5lbWFpbFNlbnQgPz8gZmFsc2UsXHJcbiAgICAgICAgXSxcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIW1hbnVhbEluc2VydC5yb3dzPy5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnNlcnQgYW5ub3VuY2VtZW50Jyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiBtYXBSb3dUb0Fubm91bmNlbWVudChtYW51YWxJbnNlcnQucm93c1swXSk7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzTWlzc2luZ1ByaW9yaXR5Q29sdW1uRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcclxuICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG4gIGNvbnN0IGxvd2VyTWVzc2FnZSA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKFxyXG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdwcmlvcml0eV91bnRpbCcpIHx8XHJcbiAgICBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3ByaW9yaXR5IHVudGlsJykgfHxcclxuICAgIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2NvbHVtbicpICYmIGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSlcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0ludmFsaWRFbnVtRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcclxuICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xyXG4gIGNvbnN0IGxvd2VyTWVzc2FnZSA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKFxyXG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdpbnZhbGlkIGlucHV0IHZhbHVlIGZvciBlbnVtJykgfHxcclxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnaW52YWxpZCBlbnVtIHZhbHVlJylcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYXBSb3dUb0Fubm91bmNlbWVudChyb3c6IGFueSk6IHR5cGVvZiBhbm5vdW5jZW1lbnRzLiRpbmZlclNlbGVjdCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiByb3cuaWQsXHJcbiAgICB0aXRsZTogcm93LnRpdGxlLFxyXG4gICAgZGVzY3JpcHRpb246IHJvdy5kZXNjcmlwdGlvbixcclxuICAgIGNhdGVnb3J5OiByb3cuY2F0ZWdvcnksXHJcbiAgICBhdXRob3JJZDogcm93LmF1dGhvcl9pZCxcclxuICAgIGNyZWF0ZWRBdDogcm93LmNyZWF0ZWRfYXQsXHJcbiAgICB1cGRhdGVkQXQ6IHJvdy51cGRhdGVkX2F0LFxyXG4gICAgZXhwaXJ5RGF0ZTogcm93LmV4cGlyeV9kYXRlLFxyXG4gICAgc2NoZWR1bGVkQXQ6IHJvdy5zY2hlZHVsZWRfYXQsXHJcbiAgICByZW1pbmRlclRpbWU6IHJvdy5yZW1pbmRlcl90aW1lLFxyXG4gICAgaXNBY3RpdmU6IHJvdy5pc19hY3RpdmUsXHJcbiAgICBzdGF0dXM6IHJvdy5zdGF0dXMsXHJcbiAgICB2aWV3c0NvdW50OiByb3cudmlld3NfY291bnQgPz8gMCxcclxuICAgIGNsaWNrc0NvdW50OiByb3cuY2xpY2tzX2NvdW50ID8/IDAsXHJcbiAgICBzZW5kRW1haWw6IHJvdy5zZW5kX2VtYWlsID8/IGZhbHNlLFxyXG4gICAgZW1haWxTZW50OiByb3cuZW1haWxfc2VudCA/PyBmYWxzZSxcclxuICAgIHByaW9yaXR5VW50aWw6IG51bGwsIC8vIE5vdCBzdXBwb3J0ZWQgaW4gbWFudWFsIGluc2VydCBmYWxsYmFja1xyXG4gIH0gYXMgdHlwZW9mIGFubm91bmNlbWVudHMuJGluZmVyU2VsZWN0O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhcHBseVJhdGVMaW1pdCIsImdlbmVyYWxMaW1pdGVyT3B0aW9ucyIsImFkbWluTGltaXRlck9wdGlvbnMiLCJmZXRjaEFsbEFubm91bmNlbWVudHMiLCJtYXBBbm5vdW5jZW1lbnQiLCJyZXF1aXJlQXV0aCIsInJlcXVpcmVBZG1pbiIsInJlcXVpcmVBbGxvd2VkRG9tYWluIiwidmFsaWRhdGVBbm5vdW5jZW1lbnQiLCJCYWRSZXF1ZXN0RXJyb3IiLCJnZXREYiIsImdldFBvb2wiLCJhbm5vdW5jZW1lbnRzIiwic2VuZEFubm91bmNlbWVudEVtYWlsIiwiZXEiLCJzcWwiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwibGltaXQiLCJnZXQiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsIm9mZnNldCIsInZhbGlkTGltaXQiLCJ2YWxpZE9mZnNldCIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsIlBPU1QiLCJ1c2VyIiwiZW5mb3JjZURvbWFpbiIsImluaXRpYWxpemVTY2hlbWEiLCJib2R5IiwidmFsaWRhdGlvbkVycm9ycyIsImxlbmd0aCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImV4cGlyeV9kYXRlIiwic2NoZWR1bGVkX2F0IiwicmVtaW5kZXJfdGltZSIsInByaW9yaXR5X3VudGlsIiwiaXNfYWN0aXZlIiwic2VuZF9lbWFpbCIsImRiIiwicHJpb3JpdHlTdXBwb3J0ZWQiLCJlbnN1cmVQcmlvcml0eUNvbHVtbiIsIm5vdyIsIkRhdGUiLCJzY2hlZHVsZWREYXRlUmF3IiwicHJpb3JpdHlVbnRpbFJhdyIsInNjaGVkdWxlZERhdGUiLCJpc05hTiIsImdldFRpbWUiLCJwcmlvcml0eVVudGlsRGF0ZSIsImlzU2NoZWR1bGVkIiwiaGFzUHJpb3JpdHlXaW5kb3ciLCJmaW5hbFN0YXR1cyIsImZpbmFsSXNBY3RpdmUiLCJhbm5vdW5jZW1lbnRWYWx1ZXMiLCJhdXRob3JJZCIsImlkIiwiZXhwaXJ5RGF0ZSIsInNjaGVkdWxlZEF0IiwicmVtaW5kZXJUaW1lIiwiaXNBY3RpdmUiLCJzZW5kRW1haWwiLCJlbWFpbFNlbnQiLCJwcmlvcml0eVVudGlsIiwicmVjb3JkIiwiaW5zZXJ0QW5ub3VuY2VtZW50V2l0aEZhbGxiYWNrIiwiZW1haWxNZXNzYWdlIiwiZW1haWxzIiwicmVzdWx0IiwicmVjaXBpZW50RW1haWxzIiwidXBkYXRlIiwic2V0Iiwid2hlcmUiLCJjb25zb2xlIiwiRXJyb3IiLCJhbm5vdW5jZW1lbnQiLCJPUFRJT05TIiwiaGVhZGVycyIsInByaW9yaXR5Q29sdW1uU3RhdGUiLCJ1cmdlbnRTdGF0dXNFbnN1cmVkIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiUHJvbWlzZSIsImFsbCIsImVuc3VyZVVyZ2VudFN0YXR1c0VudW0iLCJjaGVja1Jlc3VsdCIsImV4ZWN1dGUiLCJyb3dzIiwidmVyaWZ5UmVzdWx0Iiwid2FybiIsImVudW1DaGVjayIsInVyZ2VudENoZWNrIiwiYWRkRXJyb3IiLCJlcnJvck1zZyIsIlN0cmluZyIsImluY2x1ZGVzIiwidmFsdWVzIiwiaW5zZXJ0IiwicmV0dXJuaW5nIiwiaXNNaXNzaW5nUHJpb3JpdHlDb2x1bW5FcnJvciIsImlzSW52YWxpZEVudW1FcnJvciIsImZhbGxiYWNrVmFsdWVzIiwicG9vbCIsImluc2VydFN0YXR1cyIsIm1hbnVhbEluc2VydCIsInF1ZXJ5IiwidGV4dCIsIm1hcFJvd1RvQW5ub3VuY2VtZW50IiwibG93ZXJNZXNzYWdlIiwidG9Mb3dlckNhc2UiLCJyb3ciLCJhdXRob3JfaWQiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZEF0IiwidXBkYXRlZF9hdCIsInZpZXdzQ291bnQiLCJ2aWV3c19jb3VudCIsImNsaWNrc0NvdW50IiwiY2xpY2tzX2NvdW50IiwiZW1haWxfc2VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/announcements/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/config.ts":
/*!******************************!*\
  !*** ./lib/config/config.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getConfig: () => (/* binding */ getConfig)\n/* harmony export */ });\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/config/env.ts\");\n\nconst profiles = {\n    local: {\n        frontendUrl: 'http://localhost:3000',\n        backendUrl: 'http://localhost:8787'\n    },\n    production: {\n        frontendUrl: 'https://sst-announcement.vercel.app',\n        backendUrl: 'https://sst-announcement.vercel.app'\n    }\n};\nfunction getConfig() {\n    const env = (0,_env__WEBPACK_IMPORTED_MODULE_0__.validateEnv)();\n    const deployment = env.DEPLOYMENT === 'production' ? 'production' : 'local';\n    const defaults = profiles[deployment];\n    const config = {\n        deployment,\n        frontendUrl: env.FRONTEND_URL || defaults.frontendUrl,\n        backendUrl: env.BACKEND_URL || defaults.backendUrl\n    };\n    return config;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQztBQUlwQyxNQUFNQyxXQUFtRjtJQUN2RkMsT0FBTztRQUNMQyxhQUFhO1FBQ2JDLFlBQVk7SUFDZDtJQUNBQyxZQUFZO1FBQ1ZGLGFBQWE7UUFDYkMsWUFBWTtJQUNkO0FBQ0Y7QUFRTyxTQUFTRTtJQUNkLE1BQU1DLE1BQU1QLGlEQUFXQTtJQUN2QixNQUFNUSxhQUFjRCxJQUFJRSxVQUFVLEtBQUssZUFBZSxlQUFlO0lBQ3JFLE1BQU1DLFdBQVdULFFBQVEsQ0FBQ08sV0FBVztJQUVyQyxNQUFNRyxTQUFTO1FBQ2JIO1FBQ0FMLGFBQWFJLElBQUlLLFlBQVksSUFBSUYsU0FBU1AsV0FBVztRQUNyREMsWUFBWUcsSUFBSU0sV0FBVyxJQUFJSCxTQUFTTixVQUFVO0lBQ3BEO0lBRUEsT0FBT087QUFDVCIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcY29uZmlnXFxjb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmFsaWRhdGVFbnYgfSBmcm9tICcuL2Vudic7XHJcblxyXG50eXBlIERlcGxveW1lbnRQcm9maWxlID0gJ2xvY2FsJyB8ICdwcm9kdWN0aW9uJztcclxuXHJcbmNvbnN0IHByb2ZpbGVzOiBSZWNvcmQ8RGVwbG95bWVudFByb2ZpbGUsIHsgZnJvbnRlbmRVcmw6IHN0cmluZzsgYmFja2VuZFVybDogc3RyaW5nIH0+ID0ge1xyXG4gIGxvY2FsOiB7XHJcbiAgICBmcm9udGVuZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXHJcbiAgICBiYWNrZW5kVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4Nzg3JyxcclxuICB9LFxyXG4gIHByb2R1Y3Rpb246IHtcclxuICAgIGZyb250ZW5kVXJsOiAnaHR0cHM6Ly9zc3QtYW5ub3VuY2VtZW50LnZlcmNlbC5hcHAnLFxyXG4gICAgYmFja2VuZFVybDogJ2h0dHBzOi8vc3N0LWFubm91bmNlbWVudC52ZXJjZWwuYXBwJyxcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSdW50aW1lQ29uZmlnIHtcclxuICBkZXBsb3ltZW50OiBEZXBsb3ltZW50UHJvZmlsZTtcclxuICBmcm9udGVuZFVybDogc3RyaW5nO1xyXG4gIGJhY2tlbmRVcmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpOiBSdW50aW1lQ29uZmlnIHtcclxuICBjb25zdCBlbnYgPSB2YWxpZGF0ZUVudigpO1xyXG4gIGNvbnN0IGRlcGxveW1lbnQgPSAoZW52LkRFUExPWU1FTlQgPT09ICdwcm9kdWN0aW9uJyA/ICdwcm9kdWN0aW9uJyA6ICdsb2NhbCcpIGFzIERlcGxveW1lbnRQcm9maWxlO1xyXG4gIGNvbnN0IGRlZmF1bHRzID0gcHJvZmlsZXNbZGVwbG95bWVudF07XHJcblxyXG4gIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGRlcGxveW1lbnQsXHJcbiAgICBmcm9udGVuZFVybDogZW52LkZST05URU5EX1VSTCB8fCBkZWZhdWx0cy5mcm9udGVuZFVybCxcclxuICAgIGJhY2tlbmRVcmw6IGVudi5CQUNLRU5EX1VSTCB8fCBkZWZhdWx0cy5iYWNrZW5kVXJsLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBjb25maWc7XHJcbn1cclxuIl0sIm5hbWVzIjpbInZhbGlkYXRlRW52IiwicHJvZmlsZXMiLCJsb2NhbCIsImZyb250ZW5kVXJsIiwiYmFja2VuZFVybCIsInByb2R1Y3Rpb24iLCJnZXRDb25maWciLCJlbnYiLCJkZXBsb3ltZW50IiwiREVQTE9ZTUVOVCIsImRlZmF1bHRzIiwiY29uZmlnIiwiRlJPTlRFTkRfVVJMIiwiQkFDS0VORF9VUkwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/db.ts":
/*!**************************!*\
  !*** ./lib/config/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   verifyConnection: () => (/* binding */ verifyConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/node-postgres */ \"drizzle-orm/node-postgres\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/config/env.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_3__]);\n([pg__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst globalForDb = globalThis;\nfunction getPool() {\n    if (globalForDb.pool) {\n        return globalForDb.pool;\n    }\n    const env = (0,_env__WEBPACK_IMPORTED_MODULE_2__.validateEnv)();\n    const pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        connectionString: env.DATABASE_URL,\n        ssl: env.DATABASE_URL?.includes('localhost') ? undefined : {\n            rejectUnauthorized: false\n        }\n    });\n    globalForDb.pool = pool;\n    return pool;\n}\nfunction getDb() {\n    if (globalForDb.db) {\n        return globalForDb.db;\n    }\n    const pool = getPool();\n    const db = (0,drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__.drizzle)(pool, {\n        schema: _schema__WEBPACK_IMPORTED_MODULE_3__\n    });\n    globalForDb.db = db;\n    return db;\n}\nasync function verifyConnection() {\n    const pool = getPool();\n    await pool.query('SELECT 1');\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDMEI7QUFFaEI7QUFDQTtBQU9wQyxNQUFNSSxjQUFjQztBQUViLFNBQVNDO0lBQ2QsSUFBSUYsWUFBWUcsSUFBSSxFQUFFO1FBQ3BCLE9BQU9ILFlBQVlHLElBQUk7SUFDekI7SUFFQSxNQUFNQyxNQUFNTixpREFBV0E7SUFFdkIsTUFBTUssT0FBTyxJQUFJUCxvQ0FBSUEsQ0FBQztRQUNwQlMsa0JBQWtCRCxJQUFJRSxZQUFZO1FBQ2xDQyxLQUFLSCxJQUFJRSxZQUFZLEVBQUVFLFNBQVMsZUFBZUMsWUFBWTtZQUFFQyxvQkFBb0I7UUFBTTtJQUN6RjtJQUVBVixZQUFZRyxJQUFJLEdBQUdBO0lBQ25CLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTUTtJQUNkLElBQUlYLFlBQVlZLEVBQUUsRUFBRTtRQUNsQixPQUFPWixZQUFZWSxFQUFFO0lBQ3ZCO0lBRUEsTUFBTVQsT0FBT0Q7SUFDYixNQUFNVSxLQUFLZixrRUFBT0EsQ0FBQ00sTUFBTTtRQUFFSixNQUFNQSxzQ0FBQUE7SUFBQztJQUNsQ0MsWUFBWVksRUFBRSxHQUFHQTtJQUNqQixPQUFPQTtBQUNUO0FBRU8sZUFBZUM7SUFDcEIsTUFBTVYsT0FBT0Q7SUFDYixNQUFNQyxLQUFLVyxLQUFLLENBQUM7QUFDbkIiLCJzb3VyY2VzIjpbIkU6XFxQcm9qZWN0XFxzc3RfYW5ub3VuY2VtZW50XFxsaWJcXGNvbmZpZ1xcZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCB9IGZyb20gJ3BnJztcclxuaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL25vZGUtcG9zdGdyZXMnO1xyXG5pbXBvcnQgdHlwZSB7IE5vZGVQZ0RhdGFiYXNlIH0gZnJvbSAnZHJpenpsZS1vcm0vbm9kZS1wb3N0Z3Jlcyc7XHJcbmltcG9ydCB7IHZhbGlkYXRlRW52IH0gZnJvbSAnLi9lbnYnO1xyXG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi4vc2NoZW1hJztcclxuXHJcbmludGVyZmFjZSBHbG9iYWxEYiB7XHJcbiAgcG9vbD86IFBvb2w7XHJcbiAgZGI/OiBOb2RlUGdEYXRhYmFzZTx0eXBlb2Ygc2NoZW1hPjtcclxufVxyXG5cclxuY29uc3QgZ2xvYmFsRm9yRGIgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgR2xvYmFsRGI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbCgpOiBQb29sIHtcclxuICBpZiAoZ2xvYmFsRm9yRGIucG9vbCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbEZvckRiLnBvb2w7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlbnYgPSB2YWxpZGF0ZUVudigpO1xyXG5cclxuICBjb25zdCBwb29sID0gbmV3IFBvb2woe1xyXG4gICAgY29ubmVjdGlvblN0cmluZzogZW52LkRBVEFCQVNFX1VSTCxcclxuICAgIHNzbDogZW52LkRBVEFCQVNFX1VSTD8uaW5jbHVkZXMoJ2xvY2FsaG9zdCcpID8gdW5kZWZpbmVkIDogeyByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIH0sXHJcbiAgfSk7XHJcblxyXG4gIGdsb2JhbEZvckRiLnBvb2wgPSBwb29sO1xyXG4gIHJldHVybiBwb29sO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGIoKTogTm9kZVBnRGF0YWJhc2U8dHlwZW9mIHNjaGVtYT4ge1xyXG4gIGlmIChnbG9iYWxGb3JEYi5kYikge1xyXG4gICAgcmV0dXJuIGdsb2JhbEZvckRiLmRiO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woKTtcclxuICBjb25zdCBkYiA9IGRyaXp6bGUocG9vbCwgeyBzY2hlbWEgfSk7XHJcbiAgZ2xvYmFsRm9yRGIuZGIgPSBkYjtcclxuICByZXR1cm4gZGI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHBvb2wgPSBnZXRQb29sKCk7XHJcbiAgYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUIDEnKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUG9vbCIsImRyaXp6bGUiLCJ2YWxpZGF0ZUVudiIsInNjaGVtYSIsImdsb2JhbEZvckRiIiwiZ2xvYmFsVGhpcyIsImdldFBvb2wiLCJwb29sIiwiZW52IiwiY29ubmVjdGlvblN0cmluZyIsIkRBVEFCQVNFX1VSTCIsInNzbCIsImluY2x1ZGVzIiwidW5kZWZpbmVkIiwicmVqZWN0VW5hdXRob3JpemVkIiwiZ2V0RGIiLCJkYiIsInZlcmlmeUNvbm5lY3Rpb24iLCJxdWVyeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/env.ts":
/*!***************************!*\
  !*** ./lib/config/env.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvConfig: () => (/* binding */ getEnvConfig),\n/* harmony export */   getOptionalEnv: () => (/* binding */ getOptionalEnv),\n/* harmony export */   getRequiredEnv: () => (/* binding */ getRequiredEnv),\n/* harmony export */   validateEnv: () => (/* binding */ validateEnv)\n/* harmony export */ });\nconst requiredEnvVars = [\n    'DATABASE_URL',\n    'SESSION_SECRET',\n    'CLERK_SECRET_KEY'\n];\nconst optionalEnvVars = [\n    'JWT_SECRET',\n    'FRONTEND_URL',\n    'BACKEND_URL',\n    'GOOGLE_CLIENT_ID',\n    'GOOGLE_CLIENT_SECRET',\n    'GOOGLE_CALLBACK_URL',\n    'RESEND_API_KEY',\n    'RESEND_FROM_EMAIL',\n    'DEPLOYMENT',\n    'CRON_SECRET'\n];\nlet validated = false;\nfunction validateEnv() {\n    if (validated) {\n        return getEnvConfig();\n    }\n    const missing = [];\n    for (const key of requiredEnvVars){\n        if (!process.env[key]) {\n            missing.push(key);\n        }\n    }\n    if (missing.length > 0) {\n        const message = `Missing required environment variables: ${missing.join(', ')}`;\n        console.error(' Environment validation failed');\n        console.error(message);\n        throw new Error(message);\n    }\n    validated = true;\n    return getEnvConfig();\n}\nfunction getEnvConfig() {\n    return {\n        DATABASE_URL: \"postgresql://sst_database_user:zefoqA6HXo616kXZMyWl8BXlkQBPIqx2@dpg-d3t8nve3jp1c738js3l0-a.oregon-postgres.render.com/sst_database\",\n        SESSION_SECRET: \"testsessionsecret\",\n        CLERK_SECRET_KEY: \"sk_test_d5FnQ6CDfpTB1mKdjveMGUdiCVAfs3OdAg4XIH0ZCf\",\n        JWT_SECRET: \"devsecret123\",\n        FRONTEND_URL: \"http://localhost:3000\",\n        BACKEND_URL: process.env.BACKEND_URL,\n        GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n        GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n        GOOGLE_CALLBACK_URL: process.env.GOOGLE_CALLBACK_URL,\n        RESEND_API_KEY: \"re_2Kn711pT_CjTUiSrn7JXCoqV9hgXECpKc\",\n        RESEND_FROM_EMAIL: \"onboarding@resend.dev\",\n        DEPLOYMENT: \"local\",\n        CRON_SECRET: \"replace_me_with_random_string\"\n    };\n}\nfunction getRequiredEnv(key) {\n    validateEnv();\n    const value = process.env[key];\n    if (!value) {\n        throw new Error(`Environment variable ${key} is required`);\n    }\n    return value;\n}\nfunction getOptionalEnv(key, fallback) {\n    validateEnv();\n    const value = process.env[key];\n    if (!value) {\n        if (optionalEnvVars.includes(key) && fallback) {\n            return fallback;\n        }\n        return fallback;\n    }\n    return value;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtDQUNEO0FBRUQsTUFBTUMsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCxJQUFJQyxZQUFZO0FBa0JULFNBQVNDO0lBQ2QsSUFBSUQsV0FBVztRQUNiLE9BQU9FO0lBQ1Q7SUFFQSxNQUFNQyxVQUFvQixFQUFFO0lBRTVCLEtBQUssTUFBTUMsT0FBT04sZ0JBQWlCO1FBQ2pDLElBQUksQ0FBQ08sUUFBUUMsR0FBRyxDQUFDRixJQUFJLEVBQUU7WUFDckJELFFBQVFJLElBQUksQ0FBQ0g7UUFDZjtJQUNGO0lBRUEsSUFBSUQsUUFBUUssTUFBTSxHQUFHLEdBQUc7UUFDdEIsTUFBTUMsVUFBVSxDQUFDLHdDQUF3QyxFQUFFTixRQUFRTyxJQUFJLENBQUMsT0FBTztRQUMvRUMsUUFBUUMsS0FBSyxDQUFDO1FBQ2RELFFBQVFDLEtBQUssQ0FBQ0g7UUFDZCxNQUFNLElBQUlJLE1BQU1KO0lBQ2xCO0lBRUFULFlBQVk7SUFDWixPQUFPRTtBQUNUO0FBRU8sU0FBU0E7SUFDZCxPQUFPO1FBQ0xZLGNBQWNULG9JQUF3QjtRQUN0Q1UsZ0JBQWdCVixtQkFBMEI7UUFDMUNXLGtCQUFrQlgsb0RBQTRCO1FBQzlDWSxZQUFZWixjQUFzQjtRQUNsQ2EsY0FBY2IsdUJBQXdCO1FBQ3RDYyxhQUFhZCxRQUFRQyxHQUFHLENBQUNhLFdBQVc7UUFDcENDLGtCQUFrQmYsUUFBUUMsR0FBRyxDQUFDYyxnQkFBZ0I7UUFDOUNDLHNCQUFzQmhCLFFBQVFDLEdBQUcsQ0FBQ2Usb0JBQW9CO1FBQ3REQyxxQkFBcUJqQixRQUFRQyxHQUFHLENBQUNnQixtQkFBbUI7UUFDcERDLGdCQUFnQmxCLHNDQUEwQjtRQUMxQ21CLG1CQUFtQm5CLHVCQUE2QjtRQUNoRG9CLFlBQVlwQixPQUFzQjtRQUNsQ3FCLGFBQWFyQiwrQkFBdUI7SUFDdEM7QUFDRjtBQUVPLFNBQVNzQixlQUFldkIsR0FBb0I7SUFDakRIO0lBQ0EsTUFBTTJCLFFBQVF2QixRQUFRQyxHQUFHLENBQUNGLElBQWM7SUFDeEMsSUFBSSxDQUFDd0IsT0FBTztRQUNWLE1BQU0sSUFBSWYsTUFBTSxDQUFDLHFCQUFxQixFQUFFVCxJQUFjLFlBQVksQ0FBQztJQUNyRTtJQUNBLE9BQU93QjtBQUNUO0FBRU8sU0FBU0MsZUFBZXpCLEdBQW9CLEVBQUUwQixRQUFpQjtJQUNwRTdCO0lBQ0EsTUFBTTJCLFFBQVF2QixRQUFRQyxHQUFHLENBQUNGLElBQWM7SUFDeEMsSUFBSSxDQUFDd0IsT0FBTztRQUNWLElBQUk3QixnQkFBZ0JnQyxRQUFRLENBQUMzQixRQUFrQjBCLFVBQVU7WUFDdkQsT0FBT0E7UUFDVDtRQUNBLE9BQU9BO0lBQ1Q7SUFDQSxPQUFPRjtBQUNUIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxjb25maWdcXGVudi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1aXJlZEVudlZhcnMgPSBbXHJcbiAgJ0RBVEFCQVNFX1VSTCcsXHJcbiAgJ1NFU1NJT05fU0VDUkVUJyxcclxuICAnQ0xFUktfU0VDUkVUX0tFWScsXHJcbl07XHJcblxyXG5jb25zdCBvcHRpb25hbEVudlZhcnMgPSBbXHJcbiAgJ0pXVF9TRUNSRVQnLFxyXG4gICdGUk9OVEVORF9VUkwnLFxyXG4gICdCQUNLRU5EX1VSTCcsXHJcbiAgJ0dPT0dMRV9DTElFTlRfSUQnLFxyXG4gICdHT09HTEVfQ0xJRU5UX1NFQ1JFVCcsXHJcbiAgJ0dPT0dMRV9DQUxMQkFDS19VUkwnLFxyXG4gICdSRVNFTkRfQVBJX0tFWScsXHJcbiAgJ1JFU0VORF9GUk9NX0VNQUlMJyxcclxuICAnREVQTE9ZTUVOVCcsXHJcbiAgJ0NST05fU0VDUkVUJyxcclxuXTtcclxuXHJcbmxldCB2YWxpZGF0ZWQgPSBmYWxzZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW52Q29uZmlnIHtcclxuICBEQVRBQkFTRV9VUkw6IHN0cmluZztcclxuICBTRVNTSU9OX1NFQ1JFVDogc3RyaW5nO1xyXG4gIENMRVJLX1NFQ1JFVF9LRVk6IHN0cmluZztcclxuICBKV1RfU0VDUkVUPzogc3RyaW5nO1xyXG4gIEZST05URU5EX1VSTD86IHN0cmluZztcclxuICBCQUNLRU5EX1VSTD86IHN0cmluZztcclxuICBHT09HTEVfQ0xJRU5UX0lEPzogc3RyaW5nO1xyXG4gIEdPT0dMRV9DTElFTlRfU0VDUkVUPzogc3RyaW5nO1xyXG4gIEdPT0dMRV9DQUxMQkFDS19VUkw/OiBzdHJpbmc7XHJcbiAgUkVTRU5EX0FQSV9LRVk/OiBzdHJpbmc7XHJcbiAgUkVTRU5EX0ZST01fRU1BSUw/OiBzdHJpbmc7XHJcbiAgREVQTE9ZTUVOVD86IHN0cmluZztcclxuICBDUk9OX1NFQ1JFVD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW52KCk6IEVudkNvbmZpZyB7XHJcbiAgaWYgKHZhbGlkYXRlZCkge1xyXG4gICAgcmV0dXJuIGdldEVudkNvbmZpZygpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBrZXkgb2YgcmVxdWlyZWRFbnZWYXJzKSB7XHJcbiAgICBpZiAoIXByb2Nlc3MuZW52W2tleV0pIHtcclxuICAgICAgbWlzc2luZy5wdXNoKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzOiAke21pc3Npbmcuam9pbignLCAnKX1gO1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkJyk7XHJcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgdmFsaWRhdGVkID0gdHJ1ZTtcclxuICByZXR1cm4gZ2V0RW52Q29uZmlnKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZDb25maWcoKTogRW52Q29uZmlnIHtcclxuICByZXR1cm4ge1xyXG4gICAgREFUQUJBU0VfVVJMOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwhLFxyXG4gICAgU0VTU0lPTl9TRUNSRVQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUISxcclxuICAgIENMRVJLX1NFQ1JFVF9LRVk6IHByb2Nlc3MuZW52LkNMRVJLX1NFQ1JFVF9LRVkhLFxyXG4gICAgSldUX1NFQ1JFVDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcclxuICAgIEZST05URU5EX1VSTDogcHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMLFxyXG4gICAgQkFDS0VORF9VUkw6IHByb2Nlc3MuZW52LkJBQ0tFTkRfVVJMLFxyXG4gICAgR09PR0xFX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcclxuICAgIEdPT0dMRV9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIEdPT0dMRV9DQUxMQkFDS19VUkw6IHByb2Nlc3MuZW52LkdPT0dMRV9DQUxMQkFDS19VUkwsXHJcbiAgICBSRVNFTkRfQVBJX0tFWTogcHJvY2Vzcy5lbnYuUkVTRU5EX0FQSV9LRVksXHJcbiAgICBSRVNFTkRfRlJPTV9FTUFJTDogcHJvY2Vzcy5lbnYuUkVTRU5EX0ZST01fRU1BSUwsXHJcbiAgICBERVBMT1lNRU5UOiBwcm9jZXNzLmVudi5ERVBMT1lNRU5ULFxyXG4gICAgQ1JPTl9TRUNSRVQ6IHByb2Nlc3MuZW52LkNST05fU0VDUkVULFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1aXJlZEVudihrZXk6IGtleW9mIEVudkNvbmZpZyk6IHN0cmluZyB7XHJcbiAgdmFsaWRhdGVFbnYoKTtcclxuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleSBhcyBzdHJpbmddO1xyXG4gIGlmICghdmFsdWUpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtrZXkgYXMgc3RyaW5nfSBpcyByZXF1aXJlZGApO1xyXG4gIH1cclxuICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25hbEVudihrZXk6IGtleW9mIEVudkNvbmZpZywgZmFsbGJhY2s/OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIHZhbGlkYXRlRW52KCk7XHJcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltrZXkgYXMgc3RyaW5nXTtcclxuICBpZiAoIXZhbHVlKSB7XHJcbiAgICBpZiAob3B0aW9uYWxFbnZWYXJzLmluY2x1ZGVzKGtleSBhcyBzdHJpbmcpICYmIGZhbGxiYWNrKSB7XHJcbiAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxsYmFjaztcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJyZXF1aXJlZEVudlZhcnMiLCJvcHRpb25hbEVudlZhcnMiLCJ2YWxpZGF0ZWQiLCJ2YWxpZGF0ZUVudiIsImdldEVudkNvbmZpZyIsIm1pc3NpbmciLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwicHVzaCIsImxlbmd0aCIsIm1lc3NhZ2UiLCJqb2luIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJEQVRBQkFTRV9VUkwiLCJTRVNTSU9OX1NFQ1JFVCIsIkNMRVJLX1NFQ1JFVF9LRVkiLCJKV1RfU0VDUkVUIiwiRlJPTlRFTkRfVVJMIiwiQkFDS0VORF9VUkwiLCJHT09HTEVfQ0xJRU5UX0lEIiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJHT09HTEVfQ0FMTEJBQ0tfVVJMIiwiUkVTRU5EX0FQSV9LRVkiLCJSRVNFTkRfRlJPTV9FTUFJTCIsIkRFUExPWU1FTlQiLCJDUk9OX1NFQ1JFVCIsImdldFJlcXVpcmVkRW52IiwidmFsdWUiLCJnZXRPcHRpb25hbEVudiIsImZhbGxiYWNrIiwiaW5jbHVkZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/env.ts\n");

/***/ }),

/***/ "(rsc)/./lib/data/announcements.ts":
/*!***********************************!*\
  !*** ./lib/data/announcements.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchAllAnnouncements: () => (/* binding */ fetchAllAnnouncements),\n/* harmony export */   fetchAnnouncementById: () => (/* binding */ fetchAnnouncementById),\n/* harmony export */   mapAnnouncement: () => (/* binding */ mapAnnouncement),\n/* harmony export */   mapAnnouncements: () => (/* binding */ mapAnnouncements)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__]);\n([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nfunction mapAnnouncement(record) {\n    return {\n        id: record.id,\n        title: record.title,\n        description: record.description,\n        category: record.category,\n        author_id: record.authorId,\n        created_at: record.createdAt,\n        updated_at: record.updatedAt,\n        expiry_date: record.expiryDate,\n        scheduled_at: record.scheduledAt,\n        reminder_time: record.reminderTime,\n        is_active: record.isActive,\n        status: record.status,\n        views_count: record.viewsCount,\n        clicks_count: record.clicksCount,\n        send_email: record.sendEmail,\n        email_sent: record.emailSent,\n        priority_until: record.priorityUntil\n    };\n}\nfunction mapAnnouncements(records) {\n    return records.map(mapAnnouncement);\n}\nasync function fetchAllAnnouncements(options) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    let query = db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.announcements).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.desc)(_schema__WEBPACK_IMPORTED_MODULE_2__.announcements.createdAt));\n    if (options?.limit !== undefined) {\n        query = query.limit(options.limit);\n    }\n    if (options?.offset !== undefined) {\n        query = query.offset(options.offset);\n    }\n    const rows = await query;\n    return mapAnnouncements(rows);\n}\nasync function fetchAnnouncementById(id) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const rows = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.announcements).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.announcements.id, id)).limit(1);\n    return rows.length > 0 ? mapAnnouncement(rows[0]) : null;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGF0YS9hbm5vdW5jZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUM7QUFDRjtBQUNLO0FBSW5DLFNBQVNJLGdCQUFnQkMsTUFBMEI7SUFDeEQsT0FBTztRQUNMQyxJQUFJRCxPQUFPQyxFQUFFO1FBQ2JDLE9BQU9GLE9BQU9FLEtBQUs7UUFDbkJDLGFBQWFILE9BQU9HLFdBQVc7UUFDL0JDLFVBQVVKLE9BQU9JLFFBQVE7UUFDekJDLFdBQVdMLE9BQU9NLFFBQVE7UUFDMUJDLFlBQVlQLE9BQU9RLFNBQVM7UUFDNUJDLFlBQVlULE9BQU9VLFNBQVM7UUFDNUJDLGFBQWFYLE9BQU9ZLFVBQVU7UUFDOUJDLGNBQWNiLE9BQU9jLFdBQVc7UUFDaENDLGVBQWVmLE9BQU9nQixZQUFZO1FBQ2xDQyxXQUFXakIsT0FBT2tCLFFBQVE7UUFDMUJDLFFBQVFuQixPQUFPbUIsTUFBTTtRQUNyQkMsYUFBYXBCLE9BQU9xQixVQUFVO1FBQzlCQyxjQUFjdEIsT0FBT3VCLFdBQVc7UUFDaENDLFlBQVl4QixPQUFPeUIsU0FBUztRQUM1QkMsWUFBWTFCLE9BQU8yQixTQUFTO1FBQzVCQyxnQkFBZ0I1QixPQUFPNkIsYUFBYTtJQUN0QztBQUNGO0FBRU8sU0FBU0MsaUJBQWlCQyxPQUE2QjtJQUM1RCxPQUFPQSxRQUFRQyxHQUFHLENBQUNqQztBQUNyQjtBQUVPLGVBQWVrQyxzQkFBc0JDLE9BQTZDO0lBQ3ZGLE1BQU1DLEtBQUt0QyxpREFBS0E7SUFDaEIsSUFBSXVDLFFBQVFELEdBQUdFLE1BQU0sR0FBR0MsSUFBSSxDQUFDeEMsa0RBQWFBLEVBQUV5QyxPQUFPLENBQUM1QyxpREFBSUEsQ0FBQ0csa0RBQWFBLENBQUNVLFNBQVM7SUFFaEYsSUFBSTBCLFNBQVNNLFVBQVVDLFdBQVc7UUFDaENMLFFBQVFBLE1BQU1JLEtBQUssQ0FBQ04sUUFBUU0sS0FBSztJQUNuQztJQUNBLElBQUlOLFNBQVNRLFdBQVdELFdBQVc7UUFDakNMLFFBQVFBLE1BQU1NLE1BQU0sQ0FBQ1IsUUFBUVEsTUFBTTtJQUNyQztJQUVBLE1BQU1DLE9BQU8sTUFBTVA7SUFDbkIsT0FBT04saUJBQWlCYTtBQUMxQjtBQUVPLGVBQWVDLHNCQUFzQjNDLEVBQVU7SUFDcEQsTUFBTWtDLEtBQUt0QyxpREFBS0E7SUFDaEIsTUFBTThDLE9BQU8sTUFBTVIsR0FBR0UsTUFBTSxHQUFHQyxJQUFJLENBQUN4QyxrREFBYUEsRUFBRStDLEtBQUssQ0FBQ2pELCtDQUFFQSxDQUFDRSxrREFBYUEsQ0FBQ0csRUFBRSxFQUFFQSxLQUFLdUMsS0FBSyxDQUFDO0lBQ3pGLE9BQU9HLEtBQUtHLE1BQU0sR0FBRyxJQUFJL0MsZ0JBQWdCNEMsSUFBSSxDQUFDLEVBQUUsSUFBSTtBQUN0RCIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcZGF0YVxcYW5ub3VuY2VtZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXNjLCBlcSB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2V0RGIgfSBmcm9tICcuLi9jb25maWcvZGInO1xyXG5pbXBvcnQgeyBhbm5vdW5jZW1lbnRzIH0gZnJvbSAnLi4vc2NoZW1hJztcclxuXHJcbmV4cG9ydCB0eXBlIEFubm91bmNlbWVudFJlY29yZCA9IHR5cGVvZiBhbm5vdW5jZW1lbnRzLiRpbmZlclNlbGVjdDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXBBbm5vdW5jZW1lbnQocmVjb3JkOiBBbm5vdW5jZW1lbnRSZWNvcmQpIHtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IHJlY29yZC5pZCxcclxuICAgIHRpdGxlOiByZWNvcmQudGl0bGUsXHJcbiAgICBkZXNjcmlwdGlvbjogcmVjb3JkLmRlc2NyaXB0aW9uLFxyXG4gICAgY2F0ZWdvcnk6IHJlY29yZC5jYXRlZ29yeSxcclxuICAgIGF1dGhvcl9pZDogcmVjb3JkLmF1dGhvcklkLFxyXG4gICAgY3JlYXRlZF9hdDogcmVjb3JkLmNyZWF0ZWRBdCxcclxuICAgIHVwZGF0ZWRfYXQ6IHJlY29yZC51cGRhdGVkQXQsXHJcbiAgICBleHBpcnlfZGF0ZTogcmVjb3JkLmV4cGlyeURhdGUsXHJcbiAgICBzY2hlZHVsZWRfYXQ6IHJlY29yZC5zY2hlZHVsZWRBdCxcclxuICAgIHJlbWluZGVyX3RpbWU6IHJlY29yZC5yZW1pbmRlclRpbWUsXHJcbiAgICBpc19hY3RpdmU6IHJlY29yZC5pc0FjdGl2ZSxcclxuICAgIHN0YXR1czogcmVjb3JkLnN0YXR1cyxcclxuICAgIHZpZXdzX2NvdW50OiByZWNvcmQudmlld3NDb3VudCxcclxuICAgIGNsaWNrc19jb3VudDogcmVjb3JkLmNsaWNrc0NvdW50LFxyXG4gICAgc2VuZF9lbWFpbDogcmVjb3JkLnNlbmRFbWFpbCxcclxuICAgIGVtYWlsX3NlbnQ6IHJlY29yZC5lbWFpbFNlbnQsXHJcbiAgICBwcmlvcml0eV91bnRpbDogcmVjb3JkLnByaW9yaXR5VW50aWwsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcEFubm91bmNlbWVudHMocmVjb3JkczogQW5ub3VuY2VtZW50UmVjb3JkW10pIHtcclxuICByZXR1cm4gcmVjb3Jkcy5tYXAobWFwQW5ub3VuY2VtZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQWxsQW5ub3VuY2VtZW50cyhvcHRpb25zPzogeyBsaW1pdD86IG51bWJlcjsgb2Zmc2V0PzogbnVtYmVyIH0pIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgbGV0IHF1ZXJ5ID0gZGIuc2VsZWN0KCkuZnJvbShhbm5vdW5jZW1lbnRzKS5vcmRlckJ5KGRlc2MoYW5ub3VuY2VtZW50cy5jcmVhdGVkQXQpKTtcclxuICBcclxuICBpZiAob3B0aW9ucz8ubGltaXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgcXVlcnkgPSBxdWVyeS5saW1pdChvcHRpb25zLmxpbWl0KSBhcyBhbnk7XHJcbiAgfVxyXG4gIGlmIChvcHRpb25zPy5vZmZzZXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgcXVlcnkgPSBxdWVyeS5vZmZzZXQob3B0aW9ucy5vZmZzZXQpIGFzIGFueTtcclxuICB9XHJcbiAgXHJcbiAgY29uc3Qgcm93cyA9IGF3YWl0IHF1ZXJ5O1xyXG4gIHJldHVybiBtYXBBbm5vdW5jZW1lbnRzKHJvd3MpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbm5vdW5jZW1lbnRCeUlkKGlkOiBudW1iZXIpIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgY29uc3Qgcm93cyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYW5ub3VuY2VtZW50cykud2hlcmUoZXEoYW5ub3VuY2VtZW50cy5pZCwgaWQpKS5saW1pdCgxKTtcclxuICByZXR1cm4gcm93cy5sZW5ndGggPiAwID8gbWFwQW5ub3VuY2VtZW50KHJvd3NbMF0pIDogbnVsbDtcclxufVxyXG4iXSwibmFtZXMiOlsiZGVzYyIsImVxIiwiZ2V0RGIiLCJhbm5vdW5jZW1lbnRzIiwibWFwQW5ub3VuY2VtZW50IiwicmVjb3JkIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJhdXRob3JfaWQiLCJhdXRob3JJZCIsImNyZWF0ZWRfYXQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkX2F0IiwidXBkYXRlZEF0IiwiZXhwaXJ5X2RhdGUiLCJleHBpcnlEYXRlIiwic2NoZWR1bGVkX2F0Iiwic2NoZWR1bGVkQXQiLCJyZW1pbmRlcl90aW1lIiwicmVtaW5kZXJUaW1lIiwiaXNfYWN0aXZlIiwiaXNBY3RpdmUiLCJzdGF0dXMiLCJ2aWV3c19jb3VudCIsInZpZXdzQ291bnQiLCJjbGlja3NfY291bnQiLCJjbGlja3NDb3VudCIsInNlbmRfZW1haWwiLCJzZW5kRW1haWwiLCJlbWFpbF9zZW50IiwiZW1haWxTZW50IiwicHJpb3JpdHlfdW50aWwiLCJwcmlvcml0eVVudGlsIiwibWFwQW5ub3VuY2VtZW50cyIsInJlY29yZHMiLCJtYXAiLCJmZXRjaEFsbEFubm91bmNlbWVudHMiLCJvcHRpb25zIiwiZGIiLCJxdWVyeSIsInNlbGVjdCIsImZyb20iLCJvcmRlckJ5IiwibGltaXQiLCJ1bmRlZmluZWQiLCJvZmZzZXQiLCJyb3dzIiwiZmV0Y2hBbm5vdW5jZW1lbnRCeUlkIiwid2hlcmUiLCJsZW5ndGgiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/data/announcements.ts\n");

/***/ }),

/***/ "(rsc)/./lib/data/users.ts":
/*!***************************!*\
  !*** ./lib/data/users.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findOrCreateUser: () => (/* binding */ findOrCreateUser),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   mapUser: () => (/* binding */ mapUser),\n/* harmony export */   updateUserAdminStatus: () => (/* binding */ updateUserAdminStatus),\n/* harmony export */   updateUserEmail: () => (/* binding */ updateUserEmail),\n/* harmony export */   updateUserRole: () => (/* binding */ updateUserRole)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__]);\n([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nasync function findOrCreateUser(clerkId, email, displayName) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const existingUser = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.clerkId, clerkId)).limit(1);\n    if (existingUser.length > 0) {\n        const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n            lastLogin: new Date()\n        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, existingUser[0].id)).returning();\n        return mapUser(updatedUser);\n    }\n    const [newUser] = await db.insert(_schema__WEBPACK_IMPORTED_MODULE_2__.users).values({\n        clerkId,\n        email,\n        username: displayName || null,\n        role: 'user',\n        lastLogin: new Date()\n    }).returning();\n    return mapUser(newUser);\n}\nasync function updateUserEmail(userId, newEmail) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n        email: newEmail\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).returning();\n    if (!updatedUser) {\n        throw new Error('User not found');\n    }\n    return mapUser(updatedUser);\n}\nasync function getUserById(userId) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [user] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).limit(1);\n    return user ? mapUser(user) : null;\n}\nasync function getAllUsers() {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const result = await db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_2__.users.id,\n        clerkId: _schema__WEBPACK_IMPORTED_MODULE_2__.users.clerkId,\n        email: _schema__WEBPACK_IMPORTED_MODULE_2__.users.email,\n        username: _schema__WEBPACK_IMPORTED_MODULE_2__.users.username,\n        role: _schema__WEBPACK_IMPORTED_MODULE_2__.users.role,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_2__.users.createdAt,\n        lastLogin: _schema__WEBPACK_IMPORTED_MODULE_2__.users.lastLogin\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.desc)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.createdAt));\n    return result.map((user)=>({\n            id: user.id,\n            clerk_id: user.clerkId,\n            email: user.email,\n            username: user.username,\n            role: user.role || 'student',\n            is_admin: user.role === 'admin' || user.role === 'super_admin' || user.role === 'student_admin',\n            created_at: user.createdAt,\n            last_login: user.lastLogin\n        }));\n}\nasync function updateUserAdminStatus(userId, isAdmin) {\n    const role = isAdmin ? 'admin' : 'student';\n    return updateUserRole(userId, role);\n}\nasync function updateUserRole(userId, role) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n        role\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).returning();\n    if (!updatedUser) {\n        throw new Error('User not found');\n    }\n    return mapUser(updatedUser);\n}\nasync function getUserByEmail(email) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [user] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.email, email)).limit(1);\n    return user ? mapUser(user) : null;\n}\nfunction mapUser(user) {\n    const role = user.role || 'user';\n    return {\n        id: user.id,\n        clerk_id: user.clerkId,\n        email: user.email,\n        username: user.username,\n        role,\n        is_admin: role === 'admin' || role === 'super_admin' || role === 'student_admin',\n        created_at: user.createdAt,\n        last_login: user.lastLogin\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUTtRQUN2QkM7UUFDQWEsVUFBVWIsU0FBUyxXQUFXQSxTQUFTLGlCQUFpQkEsU0FBUztRQUNqRWMsWUFBWVIsS0FBS0csU0FBUztRQUMxQk0sWUFBWVQsS0FBS2YsU0FBUztJQUM1QjtBQUNGIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxkYXRhXFx1c2Vycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlcSB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZGVzYyB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2V0RGIgfSBmcm9tICcuLi9jb25maWcvZGInO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4uL3NjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgVXNlclJvbGUgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZE9yQ3JlYXRlVXNlcihjbGVya0lkOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGRpc3BsYXlOYW1lPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBnZXREYigpO1xyXG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKGVxKHVzZXJzLmNsZXJrSWQsIGNsZXJrSWQpKS5saW1pdCgxKTtcclxuXHJcbiAgaWYgKGV4aXN0aW5nVXNlci5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBbdXBkYXRlZFVzZXJdID0gYXdhaXQgZGJcclxuICAgICAgLnVwZGF0ZSh1c2VycylcclxuICAgICAgLnNldCh7IGxhc3RMb2dpbjogbmV3IERhdGUoKSB9KVxyXG4gICAgICAud2hlcmUoZXEodXNlcnMuaWQsIGV4aXN0aW5nVXNlclswXS5pZCEpKVxyXG4gICAgICAucmV0dXJuaW5nKCk7XHJcbiAgICByZXR1cm4gbWFwVXNlcih1cGRhdGVkVXNlcik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBbbmV3VXNlcl0gPSBhd2FpdCBkYlxyXG4gICAgLmluc2VydCh1c2VycylcclxuICAgIC52YWx1ZXMoe1xyXG4gICAgICBjbGVya0lkLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgdXNlcm5hbWU6IGRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgbGFzdExvZ2luOiBuZXcgRGF0ZSgpLFxyXG4gICAgfSlcclxuICAgIC5yZXR1cm5pbmcoKTtcclxuXHJcbiAgcmV0dXJuIG1hcFVzZXIobmV3VXNlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyRW1haWwodXNlcklkOiBudW1iZXIsIG5ld0VtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgY29uc3QgW3VwZGF0ZWRVc2VyXSA9IGF3YWl0IGRiXHJcbiAgICAudXBkYXRlKHVzZXJzKVxyXG4gICAgLnNldCh7IGVtYWlsOiBuZXdFbWFpbCB9KVxyXG4gICAgLndoZXJlKGVxKHVzZXJzLmlkLCB1c2VySWQpKVxyXG4gICAgLnJldHVybmluZygpO1xyXG5cclxuICBpZiAoIXVwZGF0ZWRVc2VyKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWFwVXNlcih1cGRhdGVkVXNlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZCh1c2VySWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCBbdXNlcl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pZCwgdXNlcklkKSkubGltaXQoMSk7XHJcbiAgcmV0dXJuIHVzZXIgPyBtYXBVc2VyKHVzZXIpIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgLnNlbGVjdCh7XHJcbiAgICAgIGlkOiB1c2Vycy5pZCxcclxuICAgICAgY2xlcmtJZDogdXNlcnMuY2xlcmtJZCxcclxuICAgICAgZW1haWw6IHVzZXJzLmVtYWlsLFxyXG4gICAgICB1c2VybmFtZTogdXNlcnMudXNlcm5hbWUsXHJcbiAgICAgIHJvbGU6IHVzZXJzLnJvbGUsXHJcbiAgICAgIGNyZWF0ZWRBdDogdXNlcnMuY3JlYXRlZEF0LFxyXG4gICAgICBsYXN0TG9naW46IHVzZXJzLmxhc3RMb2dpbixcclxuICAgIH0pXHJcbiAgICAuZnJvbSh1c2VycylcclxuICAgIC5vcmRlckJ5KGRlc2ModXNlcnMuY3JlYXRlZEF0KSk7XHJcblxyXG4gIHJldHVybiByZXN1bHQubWFwKCh1c2VyKTogYW55ID0+ICh7XHJcbiAgICBpZDogdXNlci5pZCxcclxuICAgIGNsZXJrX2lkOiB1c2VyLmNsZXJrSWQsXHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgcm9sZTogKHVzZXIgYXMgYW55KS5yb2xlIHx8ICdzdHVkZW50JyxcclxuICAgIGlzX2FkbWluOiAodXNlciBhcyBhbnkpLnJvbGUgPT09ICdhZG1pbicgfHwgKHVzZXIgYXMgYW55KS5yb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8ICh1c2VyIGFzIGFueSkucm9sZSA9PT0gJ3N0dWRlbnRfYWRtaW4nLFxyXG4gICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkQXQsXHJcbiAgICBsYXN0X2xvZ2luOiB1c2VyLmxhc3RMb2dpbixcclxuICB9KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyQWRtaW5TdGF0dXModXNlcklkOiBudW1iZXIsIGlzQWRtaW46IGJvb2xlYW4pIHtcclxuICBjb25zdCByb2xlOiBVc2VyUm9sZSA9IGlzQWRtaW4gPyAnYWRtaW4nIDogJ3N0dWRlbnQnO1xyXG4gIHJldHVybiB1cGRhdGVVc2VyUm9sZSh1c2VySWQsIHJvbGUpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclJvbGUodXNlcklkOiBudW1iZXIsIHJvbGU6IFVzZXJSb2xlKSB7XHJcbiAgY29uc3QgZGIgPSBnZXREYigpO1xyXG4gIGNvbnN0IFt1cGRhdGVkVXNlcl0gPSBhd2FpdCBkYlxyXG4gICAgLnVwZGF0ZSh1c2VycylcclxuICAgIC5zZXQoeyByb2xlIH0pXHJcbiAgICAud2hlcmUoZXEodXNlcnMuaWQsIHVzZXJJZCkpXHJcbiAgICAucmV0dXJuaW5nKCk7XHJcblxyXG4gIGlmICghdXBkYXRlZFVzZXIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXBVc2VyKHVwZGF0ZWRVc2VyKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuZW1haWwsIGVtYWlsKSkubGltaXQoMSk7XHJcbiAgcmV0dXJuIHVzZXIgPyBtYXBVc2VyKHVzZXIpIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcFVzZXIodXNlcjogdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdCkge1xyXG4gIGNvbnN0IHJvbGUgPSAodXNlciBhcyBhbnkpLnJvbGUgfHwgJ3VzZXInO1xyXG4gIHJldHVybiB7XHJcbiAgICBpZDogdXNlci5pZCxcclxuICAgIGNsZXJrX2lkOiB1c2VyLmNsZXJrSWQsXHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgcm9sZSxcclxuICAgIGlzX2FkbWluOiByb2xlID09PSAnYWRtaW4nIHx8IHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgcm9sZSA9PT0gJ3N0dWRlbnRfYWRtaW4nLFxyXG4gICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkQXQsXHJcbiAgICBsYXN0X2xvZ2luOiB1c2VyLmxhc3RMb2dpbixcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJlcSIsImRlc2MiLCJnZXREYiIsInVzZXJzIiwiZmluZE9yQ3JlYXRlVXNlciIsImNsZXJrSWQiLCJlbWFpbCIsImRpc3BsYXlOYW1lIiwiZGIiLCJleGlzdGluZ1VzZXIiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJsaW1pdCIsImxlbmd0aCIsInVwZGF0ZWRVc2VyIiwidXBkYXRlIiwic2V0IiwibGFzdExvZ2luIiwiRGF0ZSIsImlkIiwicmV0dXJuaW5nIiwibWFwVXNlciIsIm5ld1VzZXIiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJ1c2VybmFtZSIsInJvbGUiLCJ1cGRhdGVVc2VyRW1haWwiLCJ1c2VySWQiLCJuZXdFbWFpbCIsIkVycm9yIiwiZ2V0VXNlckJ5SWQiLCJ1c2VyIiwiZ2V0QWxsVXNlcnMiLCJyZXN1bHQiLCJjcmVhdGVkQXQiLCJvcmRlckJ5IiwibWFwIiwiY2xlcmtfaWQiLCJpc19hZG1pbiIsImNyZWF0ZWRfYXQiLCJsYXN0X2xvZ2luIiwidXBkYXRlVXNlckFkbWluU3RhdHVzIiwiaXNBZG1pbiIsInVwZGF0ZVVzZXJSb2xlIiwiZ2V0VXNlckJ5RW1haWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/data/users.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractBearerToken: () => (/* binding */ extractBearerToken),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   hasAdminAccess: () => (/* binding */ hasAdminAccess),\n/* harmony export */   hasAnnouncementPriority: () => (/* binding */ hasAnnouncementPriority),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   requireStudentAdmin: () => (/* binding */ requireStudentAdmin),\n/* harmony export */   requireSuperAdmin: () => (/* binding */ requireSuperAdmin)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n/* harmony import */ var _domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./domain */ \"(rsc)/./lib/middleware/domain.ts\");\n/* harmony import */ var _services_clerk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/clerk */ \"(rsc)/./lib/services/clerk.ts\");\n/* harmony import */ var _utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/roleUtils */ \"(rsc)/./lib/utils/roleUtils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_clerk__WEBPACK_IMPORTED_MODULE_2__]);\n_services_clerk__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction extractBearerToken(request) {\n    const authHeader = request.headers.get('authorization');\n    if (!authHeader) {\n        return null;\n    }\n    if (authHeader.startsWith('Bearer ')) {\n        return authHeader.substring(7);\n    }\n    return null;\n}\nfunction extractSessionCookie(request) {\n    const sessionCookie = request.cookies.get('__session');\n    return sessionCookie?.value || null;\n}\nasync function getUserFromRequest(request) {\n    const token = extractBearerToken(request) ?? extractSessionCookie(request);\n    if (!token) {\n        return null;\n    }\n    const claims = await (0,_services_clerk__WEBPACK_IMPORTED_MODULE_2__.verifyClerkToken)(token);\n    if (!claims) {\n        return null;\n    }\n    const user = await (0,_services_clerk__WEBPACK_IMPORTED_MODULE_2__.syncClerkUser)(claims);\n    return user;\n}\nasync function requireAuth(request, options) {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError('Authentication required');\n    }\n    if (options?.enforceDomain) {\n        (0,_domain__WEBPACK_IMPORTED_MODULE_1__.requireAllowedDomain)(user);\n    }\n    return user;\n}\nfunction requireRole(user, role) {\n    const hierarchy = {\n        student: 1,\n        student_admin: 2,\n        admin: 2,\n        super_admin: 3\n    };\n    // Normalize the user's role to handle old formats\n    const normalizedUserRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    const userRoleLevel = hierarchy[normalizedUserRole] ?? 1;\n    if (userRoleLevel < hierarchy[role]) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError(`This resource requires ${role} role or higher`);\n    }\n}\n/**\r\n * Check if user has admin-level access (student_admin, admin, or super_admin)\r\n */ function hasAdminAccess(user) {\n    const normalizedRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    return [\n        'student_admin',\n        'admin',\n        'super_admin'\n    ].includes(normalizedRole);\n}\n/**\r\n * Check if user has announcement priority over another role\r\n */ function hasAnnouncementPriority(user, targetRole) {\n    const announcementPriority = {\n        student: 1,\n        student_admin: 2,\n        admin: 3,\n        super_admin: 4\n    };\n    const normalizedUserRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    const userPriority = announcementPriority[normalizedUserRole] ?? 1;\n    const targetPriority = announcementPriority[targetRole] ?? 1;\n    return userPriority > targetPriority;\n}\nfunction requireAdmin(user) {\n    if (!hasAdminAccess(user)) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('This resource requires admin access');\n    }\n}\n/**\r\n * Require student admin level or higher (student_admin, admin, super_admin)\r\n */ function requireStudentAdmin(user) {\n    requireRole(user, 'student_admin');\n}\nfunction requireSuperAdmin(user) {\n    requireRole(user, 'super_admin');\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIkU6XFxQcm9qZWN0XFxzc3RfYW5ub3VuY2VtZW50XFxsaWJcXG1pZGRsZXdhcmVcXGF1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIsIFVzZXJSb2xlIH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnO1xyXG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciwgVW5hdXRob3JpemVkRXJyb3IgfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xyXG5pbXBvcnQgeyByZXF1aXJlQWxsb3dlZERvbWFpbiB9IGZyb20gJy4vZG9tYWluJztcclxuaW1wb3J0IHsgc3luY0NsZXJrVXNlciwgdmVyaWZ5Q2xlcmtUb2tlbiB9IGZyb20gJy4uL3NlcnZpY2VzL2NsZXJrJztcclxuaW1wb3J0IHsgbm9ybWFsaXplVXNlclJvbGUgfSBmcm9tICcuLi91dGlscy9yb2xlVXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RCZWFyZXJUb2tlbihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGlmIChhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgcmV0dXJuIGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFNlc3Npb25Db29raWUocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBzZXNzaW9uQ29va2llID0gcmVxdWVzdC5jb29raWVzLmdldCgnX19zZXNzaW9uJyk7XHJcbiAgcmV0dXJuIHNlc3Npb25Db29raWU/LnZhbHVlIHx8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPEF1dGhlbnRpY2F0ZWRVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHRva2VuID0gZXh0cmFjdEJlYXJlclRva2VuKHJlcXVlc3QpID8/IGV4dHJhY3RTZXNzaW9uQ29va2llKHJlcXVlc3QpO1xyXG4gIFxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY2xhaW1zID0gYXdhaXQgdmVyaWZ5Q2xlcmtUb2tlbih0b2tlbik7XHJcbiAgXHJcbiAgaWYgKCFjbGFpbXMpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHN5bmNDbGVya1VzZXIoY2xhaW1zKTtcclxuICBcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBvcHRpb25zPzogeyBlbmZvcmNlRG9tYWluPzogYm9vbGVhbiB9KTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVJlcXVlc3QocmVxdWVzdCk7XHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyk7XHJcbiAgfVxyXG5cclxuICBpZiAob3B0aW9ucz8uZW5mb3JjZURvbWFpbikge1xyXG4gICAgcmVxdWlyZUFsbG93ZWREb21haW4odXNlcik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKHVzZXI6IEF1dGhlbnRpY2F0ZWRVc2VyLCByb2xlOiBVc2VyUm9sZSk6IHZvaWQge1xyXG4gIGNvbnN0IGhpZXJhcmNoeTogUmVjb3JkPFVzZXJSb2xlLCBudW1iZXI+ID0ge1xyXG4gICAgc3R1ZGVudDogMSxcclxuICAgIHN0dWRlbnRfYWRtaW46IDIsICAvLyBTYW1lIGFjY2VzcyBsZXZlbCBhcyBhZG1pblxyXG4gICAgYWRtaW46IDIsICAgICAgICAgIC8vIFNhbWUgYWNjZXNzIGxldmVsIGFzIHN0dWRlbnRfYWRtaW5cclxuICAgIHN1cGVyX2FkbWluOiAzLFxyXG4gIH07XHJcblxyXG4gIC8vIE5vcm1hbGl6ZSB0aGUgdXNlcidzIHJvbGUgdG8gaGFuZGxlIG9sZCBmb3JtYXRzXHJcbiAgY29uc3Qgbm9ybWFsaXplZFVzZXJSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICBjb25zdCB1c2VyUm9sZUxldmVsID0gaGllcmFyY2h5W25vcm1hbGl6ZWRVc2VyUm9sZV0gPz8gMTtcclxuICBpZiAodXNlclJvbGVMZXZlbCA8IGhpZXJhcmNoeVtyb2xlXSkge1xyXG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKGBUaGlzIHJlc291cmNlIHJlcXVpcmVzICR7cm9sZX0gcm9sZSBvciBoaWdoZXJgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB1c2VyIGhhcyBhZG1pbi1sZXZlbCBhY2Nlc3MgKHN0dWRlbnRfYWRtaW4sIGFkbWluLCBvciBzdXBlcl9hZG1pbilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBZG1pbkFjY2Vzcyh1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWRSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICByZXR1cm4gWydzdHVkZW50X2FkbWluJywgJ2FkbWluJywgJ3N1cGVyX2FkbWluJ10uaW5jbHVkZXMobm9ybWFsaXplZFJvbGUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBoYXMgYW5ub3VuY2VtZW50IHByaW9yaXR5IG92ZXIgYW5vdGhlciByb2xlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaGFzQW5ub3VuY2VtZW50UHJpb3JpdHkodXNlcjogQXV0aGVudGljYXRlZFVzZXIsIHRhcmdldFJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgYW5ub3VuY2VtZW50UHJpb3JpdHk6IFJlY29yZDxVc2VyUm9sZSwgbnVtYmVyPiA9IHtcclxuICAgIHN0dWRlbnQ6IDEsXHJcbiAgICBzdHVkZW50X2FkbWluOiAyLFxyXG4gICAgYWRtaW46IDMsICAgICAgICAgIC8vIEhpZ2hlciBwcmlvcml0eSB0aGFuIHN0dWRlbnRfYWRtaW5cclxuICAgIHN1cGVyX2FkbWluOiA0LFxyXG4gIH07XHJcbiAgXHJcbiAgY29uc3Qgbm9ybWFsaXplZFVzZXJSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICBjb25zdCB1c2VyUHJpb3JpdHkgPSBhbm5vdW5jZW1lbnRQcmlvcml0eVtub3JtYWxpemVkVXNlclJvbGVdID8/IDE7XHJcbiAgY29uc3QgdGFyZ2V0UHJpb3JpdHkgPSBhbm5vdW5jZW1lbnRQcmlvcml0eVt0YXJnZXRSb2xlXSA/PyAxO1xyXG4gIHJldHVybiB1c2VyUHJpb3JpdHkgPiB0YXJnZXRQcmlvcml0eTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIGlmICghaGFzQWRtaW5BY2Nlc3ModXNlcikpIHtcclxuICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcignVGhpcyByZXNvdXJjZSByZXF1aXJlcyBhZG1pbiBhY2Nlc3MnKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXF1aXJlIHN0dWRlbnQgYWRtaW4gbGV2ZWwgb3IgaGlnaGVyIChzdHVkZW50X2FkbWluLCBhZG1pbiwgc3VwZXJfYWRtaW4pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZVN0dWRlbnRBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIHJlcXVpcmVSb2xlKHVzZXIsICdzdHVkZW50X2FkbWluJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlU3VwZXJBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIHJlcXVpcmVSb2xlKHVzZXIsICdzdXBlcl9hZG1pbicpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JiaWRkZW5FcnJvciIsIlVuYXV0aG9yaXplZEVycm9yIiwicmVxdWlyZUFsbG93ZWREb21haW4iLCJzeW5jQ2xlcmtVc2VyIiwidmVyaWZ5Q2xlcmtUb2tlbiIsIm5vcm1hbGl6ZVVzZXJSb2xlIiwiZXh0cmFjdEJlYXJlclRva2VuIiwicmVxdWVzdCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImV4dHJhY3RTZXNzaW9uQ29va2llIiwic2Vzc2lvbkNvb2tpZSIsImNvb2tpZXMiLCJ2YWx1ZSIsImdldFVzZXJGcm9tUmVxdWVzdCIsInRva2VuIiwiY2xhaW1zIiwidXNlciIsInJlcXVpcmVBdXRoIiwib3B0aW9ucyIsImVuZm9yY2VEb21haW4iLCJyZXF1aXJlUm9sZSIsInJvbGUiLCJoaWVyYXJjaHkiLCJzdHVkZW50Iiwic3R1ZGVudF9hZG1pbiIsImFkbWluIiwic3VwZXJfYWRtaW4iLCJub3JtYWxpemVkVXNlclJvbGUiLCJpc19hZG1pbiIsInVzZXJSb2xlTGV2ZWwiLCJoYXNBZG1pbkFjY2VzcyIsIm5vcm1hbGl6ZWRSb2xlIiwiaW5jbHVkZXMiLCJoYXNBbm5vdW5jZW1lbnRQcmlvcml0eSIsInRhcmdldFJvbGUiLCJhbm5vdW5jZW1lbnRQcmlvcml0eSIsInVzZXJQcmlvcml0eSIsInRhcmdldFByaW9yaXR5IiwicmVxdWlyZUFkbWluIiwicmVxdWlyZVN0dWRlbnRBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/domain.ts":
/*!**********************************!*\
  !*** ./lib/middleware/domain.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEmailDomain: () => (/* binding */ getEmailDomain),\n/* harmony export */   isAllowedDomain: () => (/* binding */ isAllowedDomain),\n/* harmony export */   requireAllowedDomain: () => (/* binding */ requireAllowedDomain)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n\nconst ALLOWED_DOMAINS = [\n    'scaler.com',\n    'sst.scaler.com'\n];\nfunction getEmailDomain(email) {\n    if (!email || typeof email !== 'string') {\n        return null;\n    }\n    const parts = email.split('@');\n    if (parts.length !== 2) {\n        return null;\n    }\n    return parts[1].toLowerCase();\n}\nfunction isAllowedDomain(email) {\n    const domain = getEmailDomain(email);\n    return domain ? ALLOWED_DOMAINS.includes(domain) : false;\n}\nfunction requireAllowedDomain(user) {\n    if (!user) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError('Authentication required');\n    }\n    if (!user.email) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Invalid user');\n    }\n    if (!isAllowedDomain(user.email)) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Domain access restricted');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS9kb21haW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNvRTtBQUVwRSxNQUFNRSxrQkFBa0I7SUFBQztJQUFjO0NBQWlCO0FBRWpELFNBQVNDLGVBQWVDLEtBQWE7SUFDMUMsSUFBSSxDQUFDQSxTQUFTLE9BQU9BLFVBQVUsVUFBVTtRQUN2QyxPQUFPO0lBQ1Q7SUFDQSxNQUFNQyxRQUFRRCxNQUFNRSxLQUFLLENBQUM7SUFDMUIsSUFBSUQsTUFBTUUsTUFBTSxLQUFLLEdBQUc7UUFDdEIsT0FBTztJQUNUO0lBQ0EsT0FBT0YsS0FBSyxDQUFDLEVBQUUsQ0FBQ0csV0FBVztBQUM3QjtBQUVPLFNBQVNDLGdCQUFnQkwsS0FBYTtJQUMzQyxNQUFNTSxTQUFTUCxlQUFlQztJQUM5QixPQUFPTSxTQUFTUixnQkFBZ0JTLFFBQVEsQ0FBQ0QsVUFBVTtBQUNyRDtBQUVPLFNBQVNFLHFCQUFxQkMsSUFBMEM7SUFDN0UsSUFBSSxDQUFDQSxNQUFNO1FBQ1QsTUFBTSxJQUFJWiw0REFBaUJBLENBQUM7SUFDOUI7SUFFQSxJQUFJLENBQUNZLEtBQUtULEtBQUssRUFBRTtRQUNmLE1BQU0sSUFBSUoseURBQWNBLENBQUM7SUFDM0I7SUFFQSxJQUFJLENBQUNTLGdCQUFnQkksS0FBS1QsS0FBSyxHQUFHO1FBQ2hDLE1BQU0sSUFBSUoseURBQWNBLENBQUM7SUFDM0I7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcbWlkZGxld2FyZVxcZG9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcbmltcG9ydCB7IEZvcmJpZGRlbkVycm9yLCBVbmF1dGhvcml6ZWRFcnJvciB9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XHJcblxyXG5jb25zdCBBTExPV0VEX0RPTUFJTlMgPSBbJ3NjYWxlci5jb20nLCAnc3N0LnNjYWxlci5jb20nXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbWFpbERvbWFpbihlbWFpbDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgaWYgKCFlbWFpbCB8fCB0eXBlb2YgZW1haWwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgY29uc3QgcGFydHMgPSBlbWFpbC5zcGxpdCgnQCcpO1xyXG4gIGlmIChwYXJ0cy5sZW5ndGggIT09IDIpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICByZXR1cm4gcGFydHNbMV0udG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWxsb3dlZERvbWFpbihlbWFpbDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgZG9tYWluID0gZ2V0RW1haWxEb21haW4oZW1haWwpO1xyXG4gIHJldHVybiBkb21haW4gPyBBTExPV0VEX0RPTUFJTlMuaW5jbHVkZXMoZG9tYWluKSA6IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUFsbG93ZWREb21haW4odXNlcjogQXV0aGVudGljYXRlZFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkKTogYXNzZXJ0cyB1c2VyIGlzIEF1dGhlbnRpY2F0ZWRVc2VyIHtcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcclxuICB9XHJcblxyXG4gIGlmICghdXNlci5lbWFpbCkge1xyXG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKCdJbnZhbGlkIHVzZXInKTtcclxuICB9XHJcblxyXG4gIGlmICghaXNBbGxvd2VkRG9tYWluKHVzZXIuZW1haWwpKSB7XHJcbiAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoJ0RvbWFpbiBhY2Nlc3MgcmVzdHJpY3RlZCcpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9yYmlkZGVuRXJyb3IiLCJVbmF1dGhvcml6ZWRFcnJvciIsIkFMTE9XRURfRE9NQUlOUyIsImdldEVtYWlsRG9tYWluIiwiZW1haWwiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJpc0FsbG93ZWREb21haW4iLCJkb21haW4iLCJpbmNsdWRlcyIsInJlcXVpcmVBbGxvd2VkRG9tYWluIiwidXNlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/domain.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/rateLimit.ts":
/*!*************************************!*\
  !*** ./lib/middleware/rateLimit.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminLimiterOptions: () => (/* binding */ adminLimiterOptions),\n/* harmony export */   applyRateLimit: () => (/* binding */ applyRateLimit),\n/* harmony export */   authLimiterOptions: () => (/* binding */ authLimiterOptions),\n/* harmony export */   generalLimiterOptions: () => (/* binding */ generalLimiterOptions),\n/* harmony export */   strictLimiterOptions: () => (/* binding */ strictLimiterOptions)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n\nconst limiterStore = new Map();\nfunction getClientIp(request) {\n    // Try to get IP from various headers\n    const forwarded = request.headers.get('x-forwarded-for');\n    if (forwarded) {\n        return forwarded.split(',')[0]?.trim() || 'unknown';\n    }\n    const realIp = request.headers.get('x-real-ip');\n    if (realIp) {\n        return realIp;\n    }\n    // Fallback to request IP (available in Edge Runtime)\n    return request.ip || 'unknown';\n}\nasync function applyRateLimit(request, options) {\n    const ip = getClientIp(request);\n    const key = `${options.keyPrefix}:${ip}`;\n    const now = Date.now();\n    const existing = limiterStore.get(key);\n    if (!existing || existing.expiresAt < now) {\n        limiterStore.set(key, {\n            count: 1,\n            expiresAt: now + options.windowMs\n        });\n        return;\n    }\n    if (existing.count >= options.max) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Too many requests, please try again later.');\n    }\n    existing.count += 1;\n    limiterStore.set(key, existing);\n}\nconst generalLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 100,\n    keyPrefix: 'general'\n};\nconst authLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 25,\n    keyPrefix: 'auth'\n};\nconst adminLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 200,\n    keyPrefix: 'admin'\n};\nconst strictLimiterOptions = {\n    windowMs: 60 * 60 * 1000,\n    max: 3,\n    keyPrefix: 'strict'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS9yYXRlTGltaXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ2lEO0FBYWpELE1BQU1DLGVBQWUsSUFBSUM7QUFFekIsU0FBU0MsWUFBWUMsT0FBb0I7SUFDdkMscUNBQXFDO0lBQ3JDLE1BQU1DLFlBQVlELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLElBQUlGLFdBQVc7UUFDYixPQUFPQSxVQUFVRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRUMsVUFBVTtJQUM1QztJQUVBLE1BQU1DLFNBQVNOLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ25DLElBQUlHLFFBQVE7UUFDVixPQUFPQTtJQUNUO0lBRUEscURBQXFEO0lBQ3JELE9BQU8sUUFBaUJDLEVBQUUsSUFBSTtBQUNoQztBQUVPLGVBQWVDLGVBQWVSLE9BQW9CLEVBQUVTLE9BQXlCO0lBQ2xGLE1BQU1GLEtBQUtSLFlBQVlDO0lBQ3ZCLE1BQU1VLE1BQU0sR0FBR0QsUUFBUUUsU0FBUyxDQUFDLENBQUMsRUFBRUosSUFBSTtJQUN4QyxNQUFNSyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLFdBQVdqQixhQUFhTSxHQUFHLENBQUNPO0lBRWxDLElBQUksQ0FBQ0ksWUFBWUEsU0FBU0MsU0FBUyxHQUFHSCxLQUFLO1FBQ3pDZixhQUFhbUIsR0FBRyxDQUFDTixLQUFLO1lBQUVPLE9BQU87WUFBR0YsV0FBV0gsTUFBTUgsUUFBUVMsUUFBUTtRQUFDO1FBQ3BFO0lBQ0Y7SUFFQSxJQUFJSixTQUFTRyxLQUFLLElBQUlSLFFBQVFVLEdBQUcsRUFBRTtRQUNqQyxNQUFNLElBQUl2Qix5REFBY0EsQ0FBQztJQUMzQjtJQUVBa0IsU0FBU0csS0FBSyxJQUFJO0lBQ2xCcEIsYUFBYW1CLEdBQUcsQ0FBQ04sS0FBS0k7QUFDeEI7QUFFTyxNQUFNTSx3QkFBMEM7SUFDckRGLFVBQVUsS0FBSyxLQUFLO0lBQ3BCQyxLQUFLO0lBQ0xSLFdBQVc7QUFDYixFQUFFO0FBRUssTUFBTVUscUJBQXVDO0lBQ2xESCxVQUFVLEtBQUssS0FBSztJQUNwQkMsS0FBSztJQUNMUixXQUFXO0FBQ2IsRUFBRTtBQUVLLE1BQU1XLHNCQUF3QztJQUNuREosVUFBVSxLQUFLLEtBQUs7SUFDcEJDLEtBQUs7SUFDTFIsV0FBVztBQUNiLEVBQUU7QUFFSyxNQUFNWSx1QkFBeUM7SUFDcERMLFVBQVUsS0FBSyxLQUFLO0lBQ3BCQyxLQUFLO0lBQ0xSLFdBQVc7QUFDYixFQUFFIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxtaWRkbGV3YXJlXFxyYXRlTGltaXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IEZvcmJpZGRlbkVycm9yIH0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcclxuXHJcbmludGVyZmFjZSBSYXRlTGltaXRPcHRpb25zIHtcclxuICB3aW5kb3dNczogbnVtYmVyO1xyXG4gIG1heDogbnVtYmVyO1xyXG4gIGtleVByZWZpeDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmF0ZUxpbWl0U3RhdGUge1xyXG4gIGNvdW50OiBudW1iZXI7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn1cclxuXHJcbmNvbnN0IGxpbWl0ZXJTdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBSYXRlTGltaXRTdGF0ZT4oKTtcclxuXHJcbmZ1bmN0aW9uIGdldENsaWVudElwKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHtcclxuICAvLyBUcnkgdG8gZ2V0IElQIGZyb20gdmFyaW91cyBoZWFkZXJzXHJcbiAgY29uc3QgZm9yd2FyZGVkID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJyk7XHJcbiAgaWYgKGZvcndhcmRlZCkge1xyXG4gICAgcmV0dXJuIGZvcndhcmRlZC5zcGxpdCgnLCcpWzBdPy50cmltKCkgfHwgJ3Vua25vd24nO1xyXG4gIH1cclxuICBcclxuICBjb25zdCByZWFsSXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKTtcclxuICBpZiAocmVhbElwKSB7XHJcbiAgICByZXR1cm4gcmVhbElwO1xyXG4gIH1cclxuICBcclxuICAvLyBGYWxsYmFjayB0byByZXF1ZXN0IElQIChhdmFpbGFibGUgaW4gRWRnZSBSdW50aW1lKVxyXG4gIHJldHVybiAocmVxdWVzdCBhcyBhbnkpLmlwIHx8ICd1bmtub3duJztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGx5UmF0ZUxpbWl0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBvcHRpb25zOiBSYXRlTGltaXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgaXAgPSBnZXRDbGllbnRJcChyZXF1ZXN0KTtcclxuICBjb25zdCBrZXkgPSBgJHtvcHRpb25zLmtleVByZWZpeH06JHtpcH1gO1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgY29uc3QgZXhpc3RpbmcgPSBsaW1pdGVyU3RvcmUuZ2V0KGtleSk7XHJcblxyXG4gIGlmICghZXhpc3RpbmcgfHwgZXhpc3RpbmcuZXhwaXJlc0F0IDwgbm93KSB7XHJcbiAgICBsaW1pdGVyU3RvcmUuc2V0KGtleSwgeyBjb3VudDogMSwgZXhwaXJlc0F0OiBub3cgKyBvcHRpb25zLndpbmRvd01zIH0pO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaWYgKGV4aXN0aW5nLmNvdW50ID49IG9wdGlvbnMubWF4KSB7XHJcbiAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoJ1RvbyBtYW55IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xyXG4gIH1cclxuXHJcbiAgZXhpc3RpbmcuY291bnQgKz0gMTtcclxuICBsaW1pdGVyU3RvcmUuc2V0KGtleSwgZXhpc3RpbmcpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhbExpbWl0ZXJPcHRpb25zOiBSYXRlTGltaXRPcHRpb25zID0ge1xyXG4gIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCxcclxuICBtYXg6IDEwMCxcclxuICBrZXlQcmVmaXg6ICdnZW5lcmFsJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoTGltaXRlck9wdGlvbnM6IFJhdGVMaW1pdE9wdGlvbnMgPSB7XHJcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLFxyXG4gIG1heDogMjUsXHJcbiAga2V5UHJlZml4OiAnYXV0aCcsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRtaW5MaW1pdGVyT3B0aW9uczogUmF0ZUxpbWl0T3B0aW9ucyA9IHtcclxuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsXHJcbiAgbWF4OiAyMDAsXHJcbiAga2V5UHJlZml4OiAnYWRtaW4nLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmljdExpbWl0ZXJPcHRpb25zOiBSYXRlTGltaXRPcHRpb25zID0ge1xyXG4gIHdpbmRvd01zOiA2MCAqIDYwICogMTAwMCxcclxuICBtYXg6IDMsXHJcbiAga2V5UHJlZml4OiAnc3RyaWN0JyxcclxufTtcclxuIl0sIm5hbWVzIjpbIkZvcmJpZGRlbkVycm9yIiwibGltaXRlclN0b3JlIiwiTWFwIiwiZ2V0Q2xpZW50SXAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsInNwbGl0IiwidHJpbSIsInJlYWxJcCIsImlwIiwiYXBwbHlSYXRlTGltaXQiLCJvcHRpb25zIiwia2V5Iiwia2V5UHJlZml4Iiwibm93IiwiRGF0ZSIsImV4aXN0aW5nIiwiZXhwaXJlc0F0Iiwic2V0IiwiY291bnQiLCJ3aW5kb3dNcyIsIm1heCIsImdlbmVyYWxMaW1pdGVyT3B0aW9ucyIsImF1dGhMaW1pdGVyT3B0aW9ucyIsImFkbWluTGltaXRlck9wdGlvbnMiLCJzdHJpY3RMaW1pdGVyT3B0aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schema.ts":
/*!***********************!*\
  !*** ./lib/schema.ts ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   announcementComments: () => (/* binding */ announcementComments),\n/* harmony export */   announcementCommentsRelations: () => (/* binding */ announcementCommentsRelations),\n/* harmony export */   announcementEngagements: () => (/* binding */ announcementEngagements),\n/* harmony export */   announcementEngagementsRelations: () => (/* binding */ announcementEngagementsRelations),\n/* harmony export */   announcementStatusEnum: () => (/* binding */ announcementStatusEnum),\n/* harmony export */   announcements: () => (/* binding */ announcements),\n/* harmony export */   announcementsRelations: () => (/* binding */ announcementsRelations),\n/* harmony export */   eventTypeEnum: () => (/* binding */ eventTypeEnum),\n/* harmony export */   userRoleEnum: () => (/* binding */ userRoleEnum),\n/* harmony export */   users: () => (/* binding */ users),\n/* harmony export */   usersRelations: () => (/* binding */ usersRelations)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"drizzle-orm/pg-core\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm__WEBPACK_IMPORTED_MODULE_1__]);\n([drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst userRoleEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('user_role', [\n    'student',\n    'student_admin',\n    'admin',\n    'super_admin',\n    'user'\n]);\nconst eventTypeEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('event_type', [\n    'view',\n    'click',\n    'dismiss'\n]);\n// Enum for announcement status\nconst announcementStatusEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('announcement_status', [\n    'draft',\n    'under_review',\n    'approved',\n    'rejected',\n    'scheduled',\n    'active',\n    'urgent',\n    'expired'\n]);\n// Users table\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('users', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    clerkId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('clerk_id').notNull().unique(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('email').notNull().unique(),\n    username: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('username', {\n        length: 100\n    }),\n    role: userRoleEnum('role').default('student').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow(),\n    lastLogin: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('last_login', {\n        withTimezone: true\n    })\n});\nconst announcements = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcements', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('title', {\n        length: 255\n    }).notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('description').notNull(),\n    category: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('category', {\n        length: 100\n    }).notNull(),\n    authorId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('author_id').references(()=>users.id, {\n        onDelete: 'set null'\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('updated_at', {\n        withTimezone: true\n    }),\n    expiryDate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('expiry_date', {\n        withTimezone: true\n    }),\n    scheduledAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('scheduled_at', {\n        withTimezone: true\n    }),\n    reminderTime: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('reminder_time', {\n        withTimezone: true\n    }),\n    isActive: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('is_active').default(true),\n    status: announcementStatusEnum('status').default('draft').notNull(),\n    viewsCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('views_count').default(0),\n    clicksCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('clicks_count').default(0),\n    sendEmail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('send_email').default(false),\n    emailSent: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('email_sent').default(false),\n    priorityUntil: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('priority_until', {\n        withTimezone: true\n    }),\n    isEmergency: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('is_emergency').default(false).notNull(),\n    emergencyExpiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('emergency_expires_at', {\n        withTimezone: true\n    }),\n    visibleAfter: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('visible_after', {\n        withTimezone: true\n    })\n});\nconst announcementEngagements = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcement_engagements', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    announcementId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('announcement_id').notNull().references(()=>announcements.id, {\n        onDelete: 'cascade'\n    }),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('user_id').references(()=>users.id, {\n        onDelete: 'set null'\n    }),\n    eventType: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('event_type').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow()\n});\n// Announcement comments table\nconst announcementComments = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcement_comments', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    announcementId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('announcement_id').notNull().references(()=>announcements.id, {\n        onDelete: 'cascade'\n    }),\n    authorId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('author_id').notNull().references(()=>users.id, {\n        onDelete: 'cascade'\n    }),\n    targetAdminId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('target_admin_id').notNull().references(()=>users.id, {\n        onDelete: 'cascade'\n    }),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('content').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n// Relations (optional, for easier joins)\nconst usersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(users, ({ many })=>({\n        announcements: many(announcements),\n        engagements: many(announcementEngagements)\n    }));\nconst announcementsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcements, ({ one, many })=>({\n        author: one(users, {\n            fields: [\n                announcements.authorId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        engagements: many(announcementEngagements)\n    }));\nconst announcementEngagementsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcementEngagements, ({ one })=>({\n        announcement: one(announcements, {\n            fields: [\n                announcementEngagements.announcementId\n            ],\n            references: [\n                announcements.id\n            ]\n        }),\n        user: one(users, {\n            fields: [\n                announcementEngagements.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst announcementCommentsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcementComments, ({ one })=>({\n        announcement: one(announcements, {\n            fields: [\n                announcementComments.announcementId\n            ],\n            references: [\n                announcements.id\n            ]\n        }),\n        author: one(users, {\n            fields: [\n                announcementComments.authorId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        targetAdmin: one(users, {\n            fields: [\n                announcementComments.targetAdminId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBQztZQUM1Q3JCLFlBQVk7Z0JBQUNwQixNQUFNQyxFQUFFO2FBQUM7UUFDeEI7SUFDRixJQUFJIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxzY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGdUYWJsZSwgc2VyaWFsLCB0ZXh0LCB2YXJjaGFyLCBib29sZWFuLCBpbnRlZ2VyLCB0aW1lc3RhbXAsIHBnRW51bSB9IGZyb20gJ2RyaXp6bGUtb3JtL3BnLWNvcmUnO1xyXG5pbXBvcnQgeyByZWxhdGlvbnMgfSBmcm9tICdkcml6emxlLW9ybSc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlclJvbGVFbnVtID0gcGdFbnVtKCd1c2VyX3JvbGUnLCBbJ3N0dWRlbnQnLCAnc3R1ZGVudF9hZG1pbicsICdhZG1pbicsICdzdXBlcl9hZG1pbicsICd1c2VyJ10pO1xyXG5leHBvcnQgY29uc3QgZXZlbnRUeXBlRW51bSA9IHBnRW51bSgnZXZlbnRfdHlwZScsIFsndmlldycsICdjbGljaycsICdkaXNtaXNzJ10pO1xyXG5cclxuLy8gRW51bSBmb3IgYW5ub3VuY2VtZW50IHN0YXR1c1xyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50U3RhdHVzRW51bSA9IHBnRW51bSgnYW5ub3VuY2VtZW50X3N0YXR1cycsIFtcclxuICAnZHJhZnQnLFxyXG4gICd1bmRlcl9yZXZpZXcnLFxyXG4gICdhcHByb3ZlZCcsXHJcbiAgJ3JlamVjdGVkJyxcclxuICAnc2NoZWR1bGVkJyxcclxuICAnYWN0aXZlJyxcclxuICAndXJnZW50JyxcclxuICAnZXhwaXJlZCdcclxuXSk7XHJcblxyXG4vLyBVc2VycyB0YWJsZVxyXG5leHBvcnQgY29uc3QgdXNlcnMgPSBwZ1RhYmxlKCd1c2VycycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBjbGVya0lkOiB0ZXh0KCdjbGVya19pZCcpLm5vdE51bGwoKS51bmlxdWUoKSxcclxuICBlbWFpbDogdGV4dCgnZW1haWwnKS5ub3ROdWxsKCkudW5pcXVlKCksXHJcbiAgdXNlcm5hbWU6IHZhcmNoYXIoJ3VzZXJuYW1lJywgeyBsZW5ndGg6IDEwMCB9KSxcclxuICByb2xlOiB1c2VyUm9sZUVudW0oJ3JvbGUnKS5kZWZhdWx0KCdzdHVkZW50Jykubm90TnVsbCgpLFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSkuZGVmYXVsdE5vdygpLFxyXG4gIGxhc3RMb2dpbjogdGltZXN0YW1wKCdsYXN0X2xvZ2luJywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFubm91bmNlbWVudHMgPSBwZ1RhYmxlKCdhbm5vdW5jZW1lbnRzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIHRpdGxlOiB2YXJjaGFyKCd0aXRsZScsIHsgbGVuZ3RoOiAyNTUgfSkubm90TnVsbCgpLFxyXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLm5vdE51bGwoKSxcclxuICBjYXRlZ29yeTogdmFyY2hhcignY2F0ZWdvcnknLCB7IGxlbmd0aDogMTAwIH0pLm5vdE51bGwoKSxcclxuICBhdXRob3JJZDogaW50ZWdlcignYXV0aG9yX2lkJykucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ3NldCBudWxsJyB9KSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKSxcclxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIGV4cGlyeURhdGU6IHRpbWVzdGFtcCgnZXhwaXJ5X2RhdGUnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICBzY2hlZHVsZWRBdDogdGltZXN0YW1wKCdzY2hlZHVsZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICByZW1pbmRlclRpbWU6IHRpbWVzdGFtcCgncmVtaW5kZXJfdGltZScsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5kZWZhdWx0KHRydWUpLFxyXG4gIHN0YXR1czogYW5ub3VuY2VtZW50U3RhdHVzRW51bSgnc3RhdHVzJykuZGVmYXVsdCgnZHJhZnQnKS5ub3ROdWxsKCksXHJcbiAgdmlld3NDb3VudDogaW50ZWdlcigndmlld3NfY291bnQnKS5kZWZhdWx0KDApLFxyXG4gIGNsaWNrc0NvdW50OiBpbnRlZ2VyKCdjbGlja3NfY291bnQnKS5kZWZhdWx0KDApLFxyXG4gIHNlbmRFbWFpbDogYm9vbGVhbignc2VuZF9lbWFpbCcpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGVtYWlsU2VudDogYm9vbGVhbignZW1haWxfc2VudCcpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIHByaW9yaXR5VW50aWw6IHRpbWVzdGFtcCgncHJpb3JpdHlfdW50aWwnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICBpc0VtZXJnZW5jeTogYm9vbGVhbignaXNfZW1lcmdlbmN5JykuZGVmYXVsdChmYWxzZSkubm90TnVsbCgpLFxyXG4gIGVtZXJnZW5jeUV4cGlyZXNBdDogdGltZXN0YW1wKCdlbWVyZ2VuY3lfZXhwaXJlc19hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIHZpc2libGVBZnRlcjogdGltZXN0YW1wKCd2aXNpYmxlX2FmdGVyJywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFubm91bmNlbWVudEVuZ2FnZW1lbnRzID0gcGdUYWJsZSgnYW5ub3VuY2VtZW50X2VuZ2FnZW1lbnRzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIGFubm91bmNlbWVudElkOiBpbnRlZ2VyKCdhbm5vdW5jZW1lbnRfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBhbm5vdW5jZW1lbnRzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdXNlcklkOiBpbnRlZ2VyKCd1c2VyX2lkJykucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ3NldCBudWxsJyB9KSxcclxuICBldmVudFR5cGU6IHRleHQoJ2V2ZW50X3R5cGUnKS5ub3ROdWxsKCksXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KS5kZWZhdWx0Tm93KCksXHJcbn0pO1xyXG5cclxuLy8gQW5ub3VuY2VtZW50IGNvbW1lbnRzIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBhbm5vdW5jZW1lbnRDb21tZW50cyA9IHBnVGFibGUoJ2Fubm91bmNlbWVudF9jb21tZW50cycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBhbm5vdW5jZW1lbnRJZDogaW50ZWdlcignYW5ub3VuY2VtZW50X2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gYW5ub3VuY2VtZW50cy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIGF1dGhvcklkOiBpbnRlZ2VyKCdhdXRob3JfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHRhcmdldEFkbWluSWQ6IGludGVnZXIoJ3RhcmdldF9hZG1pbl9pZCcpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgY29udGVudDogdGV4dCgnY29udGVudCcpLm5vdE51bGwoKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXHJcbn0pO1xyXG5cclxuLy8gUmVsYXRpb25zIChvcHRpb25hbCwgZm9yIGVhc2llciBqb2lucylcclxuZXhwb3J0IGNvbnN0IHVzZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKHVzZXJzLCAoeyBtYW55IH0pID0+ICh7XHJcbiAgYW5ub3VuY2VtZW50czogbWFueShhbm5vdW5jZW1lbnRzKSxcclxuICBlbmdhZ2VtZW50czogbWFueShhbm5vdW5jZW1lbnRFbmdhZ2VtZW50cyksXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhbm5vdW5jZW1lbnRzUmVsYXRpb25zID0gcmVsYXRpb25zKGFubm91bmNlbWVudHMsICh7IG9uZSwgbWFueSB9KSA9PiAoe1xyXG4gIGF1dGhvcjogb25lKHVzZXJzLCB7XHJcbiAgICBmaWVsZHM6IFthbm5vdW5jZW1lbnRzLmF1dGhvcklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgfSksXHJcbiAgZW5nYWdlbWVudHM6IG1hbnkoYW5ub3VuY2VtZW50RW5nYWdlbWVudHMpLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50RW5nYWdlbWVudHNSZWxhdGlvbnMgPSByZWxhdGlvbnMoYW5ub3VuY2VtZW50RW5nYWdlbWVudHMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIGFubm91bmNlbWVudDogb25lKGFubm91bmNlbWVudHMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudEVuZ2FnZW1lbnRzLmFubm91bmNlbWVudElkXSxcclxuICAgIHJlZmVyZW5jZXM6IFthbm5vdW5jZW1lbnRzLmlkXSxcclxuICB9KSxcclxuICB1c2VyOiBvbmUodXNlcnMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudEVuZ2FnZW1lbnRzLnVzZXJJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxyXG4gIH0pLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50Q29tbWVudHNSZWxhdGlvbnMgPSByZWxhdGlvbnMoYW5ub3VuY2VtZW50Q29tbWVudHMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIGFubm91bmNlbWVudDogb25lKGFubm91bmNlbWVudHMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudENvbW1lbnRzLmFubm91bmNlbWVudElkXSxcclxuICAgIHJlZmVyZW5jZXM6IFthbm5vdW5jZW1lbnRzLmlkXSxcclxuICB9KSxcclxuICBhdXRob3I6IG9uZSh1c2Vycywge1xyXG4gICAgZmllbGRzOiBbYW5ub3VuY2VtZW50Q29tbWVudHMuYXV0aG9ySWRdLFxyXG4gICAgcmVmZXJlbmNlczogW3VzZXJzLmlkXSxcclxuICB9KSxcclxuICB0YXJnZXRBZG1pbjogb25lKHVzZXJzLCB7XHJcbiAgICBmaWVsZHM6IFthbm5vdW5jZW1lbnRDb21tZW50cy50YXJnZXRBZG1pbklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgfSksXHJcbn0pKTtcclxuXHJcbi8vIFR5cGUgZXhwb3J0cyBmb3IgVHlwZVNjcmlwdFxyXG5leHBvcnQgdHlwZSBVc2VyID0gdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3VXNlciA9IHR5cGVvZiB1c2Vycy4kaW5mZXJJbnNlcnQ7XHJcbmV4cG9ydCB0eXBlIEFubm91bmNlbWVudCA9IHR5cGVvZiBhbm5vdW5jZW1lbnRzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3QW5ub3VuY2VtZW50ID0gdHlwZW9mIGFubm91bmNlbWVudHMuJGluZmVySW5zZXJ0O1xyXG5leHBvcnQgdHlwZSBBbm5vdW5jZW1lbnRFbmdhZ2VtZW50ID0gdHlwZW9mIGFubm91bmNlbWVudEVuZ2FnZW1lbnRzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3QW5ub3VuY2VtZW50RW5nYWdlbWVudCA9IHR5cGVvZiBhbm5vdW5jZW1lbnRFbmdhZ2VtZW50cy4kaW5mZXJJbnNlcnQ7XHJcbmV4cG9ydCB0eXBlIEFubm91bmNlbWVudENvbW1lbnQgPSB0eXBlb2YgYW5ub3VuY2VtZW50Q29tbWVudHMuJGluZmVyU2VsZWN0O1xyXG5leHBvcnQgdHlwZSBOZXdBbm5vdW5jZW1lbnRDb21tZW50ID0gdHlwZW9mIGFubm91bmNlbWVudENvbW1lbnRzLiRpbmZlckluc2VydDtcclxuIl0sIm5hbWVzIjpbInBnVGFibGUiLCJzZXJpYWwiLCJ0ZXh0IiwidmFyY2hhciIsImJvb2xlYW4iLCJpbnRlZ2VyIiwidGltZXN0YW1wIiwicGdFbnVtIiwicmVsYXRpb25zIiwidXNlclJvbGVFbnVtIiwiZXZlbnRUeXBlRW51bSIsImFubm91bmNlbWVudFN0YXR1c0VudW0iLCJ1c2VycyIsImlkIiwicHJpbWFyeUtleSIsImNsZXJrSWQiLCJub3ROdWxsIiwidW5pcXVlIiwiZW1haWwiLCJ1c2VybmFtZSIsImxlbmd0aCIsInJvbGUiLCJkZWZhdWx0IiwiY3JlYXRlZEF0Iiwid2l0aFRpbWV6b25lIiwiZGVmYXVsdE5vdyIsImxhc3RMb2dpbiIsImFubm91bmNlbWVudHMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJhdXRob3JJZCIsInJlZmVyZW5jZXMiLCJvbkRlbGV0ZSIsInVwZGF0ZWRBdCIsImV4cGlyeURhdGUiLCJzY2hlZHVsZWRBdCIsInJlbWluZGVyVGltZSIsImlzQWN0aXZlIiwic3RhdHVzIiwidmlld3NDb3VudCIsImNsaWNrc0NvdW50Iiwic2VuZEVtYWlsIiwiZW1haWxTZW50IiwicHJpb3JpdHlVbnRpbCIsImlzRW1lcmdlbmN5IiwiZW1lcmdlbmN5RXhwaXJlc0F0IiwidmlzaWJsZUFmdGVyIiwiYW5ub3VuY2VtZW50RW5nYWdlbWVudHMiLCJhbm5vdW5jZW1lbnRJZCIsInVzZXJJZCIsImV2ZW50VHlwZSIsImFubm91bmNlbWVudENvbW1lbnRzIiwidGFyZ2V0QWRtaW5JZCIsImNvbnRlbnQiLCJ1c2Vyc1JlbGF0aW9ucyIsIm1hbnkiLCJlbmdhZ2VtZW50cyIsImFubm91bmNlbWVudHNSZWxhdGlvbnMiLCJvbmUiLCJhdXRob3IiLCJmaWVsZHMiLCJhbm5vdW5jZW1lbnRFbmdhZ2VtZW50c1JlbGF0aW9ucyIsImFubm91bmNlbWVudCIsInVzZXIiLCJhbm5vdW5jZW1lbnRDb21tZW50c1JlbGF0aW9ucyIsInRhcmdldEFkbWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/clerk.ts":
/*!*******************************!*\
  !*** ./lib/services/clerk.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   syncClerkUser: () => (/* binding */ syncClerkUser),\n/* harmony export */   verifyClerkToken: () => (/* binding */ verifyClerkToken)\n/* harmony export */ });\n/* harmony import */ var _clerk_backend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @clerk/backend */ \"(rsc)/./node_modules/@clerk/backend/dist/index.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\n/* harmony import */ var _config_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/env */ \"(rsc)/./lib/config/env.ts\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\n/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/users */ \"(rsc)/./lib/data/users.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm__WEBPACK_IMPORTED_MODULE_1__, _config_db__WEBPACK_IMPORTED_MODULE_3__, _schema__WEBPACK_IMPORTED_MODULE_4__, _data_users__WEBPACK_IMPORTED_MODULE_5__]);\n([drizzle_orm__WEBPACK_IMPORTED_MODULE_1__, _config_db__WEBPACK_IMPORTED_MODULE_3__, _schema__WEBPACK_IMPORTED_MODULE_4__, _data_users__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nlet cachedSecretKey = null;\nlet clerkClient = null;\nfunction getSecretKey() {\n    if (cachedSecretKey) {\n        return cachedSecretKey;\n    }\n    const env = (0,_config_env__WEBPACK_IMPORTED_MODULE_2__.getEnvConfig)();\n    if (!env.CLERK_SECRET_KEY) {\n        throw new Error('CLERK_SECRET_KEY is not configured');\n    }\n    cachedSecretKey = env.CLERK_SECRET_KEY;\n    return cachedSecretKey;\n}\nfunction getClerkClient() {\n    if (clerkClient) {\n        return clerkClient;\n    }\n    clerkClient = (0,_clerk_backend__WEBPACK_IMPORTED_MODULE_0__.createClerkClient)({\n        secretKey: getSecretKey()\n    });\n    return clerkClient;\n}\nasync function verifyClerkToken(token) {\n    try {\n        const payload = await (0,_clerk_backend__WEBPACK_IMPORTED_MODULE_0__.verifyToken)(token, {\n            secretKey: getSecretKey()\n        });\n        return payload;\n    } catch (error) {\n        console.warn('Clerk token verification failed:', error);\n        return null;\n    }\n}\nasync function syncClerkUser(claims) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_3__.getDb)();\n    const externalId = claims.sub;\n    if (!externalId) {\n        throw new Error('Clerk token missing subject');\n    }\n    // Try to get email from token claims first (faster than API call)\n    let email = claims.email;\n    let displayName = claims.username || claims.first_name || claims.last_name || null;\n    // Only call Clerk API if we don't have email in claims\n    if (!email) {\n        const clerk = getClerkClient();\n        const clerkUser = await clerk.users.getUser(externalId);\n        email = clerkUser.emailAddresses.find((e)=>e.id === clerkUser.primaryEmailAddressId)?.emailAddress;\n        if (!email) {\n            throw new Error('Clerk user has no email address');\n        }\n        displayName = clerkUser.username || clerkUser.firstName || clerkUser.lastName || null;\n    }\n    // First, try to find by clerk_id (most common case, uses index)\n    const [existingByClerkId] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_4__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.clerkId, externalId)).limit(1);\n    if (existingByClerkId) {\n        // Only update if email or username changed, or lastLogin is old (> 1 hour)\n        const needsUpdate = existingByClerkId.email !== email || existingByClerkId.username !== displayName || !existingByClerkId.lastLogin || Date.now() - new Date(existingByClerkId.lastLogin).getTime() > 3600000; // 1 hour\n        if (needsUpdate) {\n            const [updated] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_4__.users).set({\n                email,\n                username: displayName ?? existingByClerkId.username,\n                lastLogin: new Date()\n            }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.id, existingByClerkId.id)).returning();\n            return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(updated ?? existingByClerkId);\n        }\n        // No update needed, return existing user\n        return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(existingByClerkId);\n    }\n    // If not found by clerk_id, check if email exists (uses index)\n    const [existingByEmail] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_4__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.email, email)).limit(1);\n    if (existingByEmail) {\n        // Update the existing user with the new clerk_id\n        const [updated] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_4__.users).set({\n            clerkId: externalId,\n            username: displayName ?? existingByEmail.username,\n            lastLogin: new Date()\n        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.id, existingByEmail.id)).returning();\n        return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(updated);\n    }\n    // Create new user\n    const [created] = await db.insert(_schema__WEBPACK_IMPORTED_MODULE_4__.users).values({\n        clerkId: externalId,\n        email,\n        username: displayName,\n        role: 'user',\n        lastLogin: new Date()\n    }).returning();\n    return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(created);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDekMsT0FBT3BDLG9EQUFPQSxDQUFDb0M7SUFDakI7SUFFQSwrREFBK0Q7SUFDL0QsTUFBTSxDQUFDZSxnQkFBZ0IsR0FBRyxNQUFNbEMsR0FBR29CLE1BQU0sR0FBR0MsSUFBSSxDQUFDdkMsMENBQUtBLEVBQUV3QyxLQUFLLENBQUMzQywrQ0FBRUEsQ0FBQ0csMENBQUtBLENBQUNxQixLQUFLLEVBQUVBLFFBQVFxQixLQUFLLENBQUM7SUFDNUYsSUFBSVUsaUJBQWlCO1FBQ25CLGlEQUFpRDtRQUNqRCxNQUFNLENBQUNKLFFBQVEsR0FBRyxNQUFNOUIsR0FDckIrQixNQUFNLENBQUNqRCwwQ0FBS0EsRUFDWmtELEdBQUcsQ0FBQztZQUNIVCxTQUFTdEI7WUFDVEksVUFBVUQsZUFBZThCLGdCQUFnQjdCLFFBQVE7WUFDakRxQixXQUFXLElBQUlDO1FBQ2pCLEdBQ0NMLEtBQUssQ0FBQzNDLCtDQUFFQSxDQUFDRywwQ0FBS0EsQ0FBQ2dDLEVBQUUsRUFBRW9CLGdCQUFnQnBCLEVBQUUsR0FDckNtQixTQUFTO1FBRVosT0FBT2xELG9EQUFPQSxDQUFDK0M7SUFDakI7SUFFQSxrQkFBa0I7SUFDbEIsTUFBTSxDQUFDSyxRQUFRLEdBQUcsTUFBTW5DLEdBQ3JCb0MsTUFBTSxDQUFDdEQsMENBQUtBLEVBQ1p1RCxNQUFNLENBQUM7UUFDTmQsU0FBU3RCO1FBQ1RFO1FBQ0FFLFVBQVVEO1FBQ1ZrQyxNQUFNO1FBQ05aLFdBQVcsSUFBSUM7SUFDakIsR0FDQ00sU0FBUztJQUVaLE9BQU9sRCxvREFBT0EsQ0FBQ29EO0FBQ2pCIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxzZXJ2aWNlc1xcY2xlcmsudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xlcmtDbGllbnQsIHZlcmlmeVRva2VuIH0gZnJvbSAnQGNsZXJrL2JhY2tlbmQnO1xyXG5pbXBvcnQgdHlwZSB7IEp3dFBheWxvYWQgfSBmcm9tICdAY2xlcmsvdHlwZXMnO1xyXG5pbXBvcnQgeyBlcSB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2V0RW52Q29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2Vudic7XHJcbmltcG9ydCB7IGdldERiIH0gZnJvbSAnLi4vY29uZmlnL2RiJztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9zY2hlbWEnO1xyXG5pbXBvcnQgeyBtYXBVc2VyIH0gZnJvbSAnLi4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG50eXBlIENsZXJrSnd0UGF5bG9hZCA9IEp3dFBheWxvYWQgJiB7XHJcbiAgc3ViOiBzdHJpbmc7XHJcbiAgZW1haWw/OiBzdHJpbmc7XHJcbiAgZmlyc3RfbmFtZT86IHN0cmluZztcclxuICBsYXN0X25hbWU/OiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5sZXQgY2FjaGVkU2VjcmV0S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxubGV0IGNsZXJrQ2xpZW50OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGVya0NsaWVudD4gfCBudWxsID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIGdldFNlY3JldEtleSgpOiBzdHJpbmcge1xyXG4gIGlmIChjYWNoZWRTZWNyZXRLZXkpIHtcclxuICAgIHJldHVybiBjYWNoZWRTZWNyZXRLZXk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlbnYgPSBnZXRFbnZDb25maWcoKTtcclxuICBpZiAoIWVudi5DTEVSS19TRUNSRVRfS0VZKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NMRVJLX1NFQ1JFVF9LRVkgaXMgbm90IGNvbmZpZ3VyZWQnKTtcclxuICB9XHJcbiAgY2FjaGVkU2VjcmV0S2V5ID0gZW52LkNMRVJLX1NFQ1JFVF9LRVk7XHJcbiAgcmV0dXJuIGNhY2hlZFNlY3JldEtleSE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENsZXJrQ2xpZW50KCkge1xyXG4gIGlmIChjbGVya0NsaWVudCkge1xyXG4gICAgcmV0dXJuIGNsZXJrQ2xpZW50O1xyXG4gIH1cclxuICBcclxuICBjbGVya0NsaWVudCA9IGNyZWF0ZUNsZXJrQ2xpZW50KHtcclxuICAgIHNlY3JldEtleTogZ2V0U2VjcmV0S2V5KCksXHJcbiAgfSk7XHJcbiAgXHJcbiAgcmV0dXJuIGNsZXJrQ2xpZW50O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5Q2xlcmtUb2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxDbGVya0p3dFBheWxvYWQgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbiwge1xyXG4gICAgICBzZWNyZXRLZXk6IGdldFNlY3JldEtleSgpLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcGF5bG9hZCBhcyBDbGVya0p3dFBheWxvYWQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybignQ2xlcmsgdG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzeW5jQ2xlcmtVc2VyKGNsYWltczogQ2xlcmtKd3RQYXlsb2FkKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCBleHRlcm5hbElkID0gY2xhaW1zLnN1YjtcclxuICBpZiAoIWV4dGVybmFsSWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ2xlcmsgdG9rZW4gbWlzc2luZyBzdWJqZWN0Jyk7XHJcbiAgfVxyXG5cclxuICAvLyBUcnkgdG8gZ2V0IGVtYWlsIGZyb20gdG9rZW4gY2xhaW1zIGZpcnN0IChmYXN0ZXIgdGhhbiBBUEkgY2FsbClcclxuICBsZXQgZW1haWwgPSBjbGFpbXMuZW1haWw7XHJcbiAgbGV0IGRpc3BsYXlOYW1lID0gY2xhaW1zLnVzZXJuYW1lIHx8IGNsYWltcy5maXJzdF9uYW1lIHx8IGNsYWltcy5sYXN0X25hbWUgfHwgbnVsbDtcclxuXHJcbiAgLy8gT25seSBjYWxsIENsZXJrIEFQSSBpZiB3ZSBkb24ndCBoYXZlIGVtYWlsIGluIGNsYWltc1xyXG4gIGlmICghZW1haWwpIHtcclxuICAgIGNvbnN0IGNsZXJrID0gZ2V0Q2xlcmtDbGllbnQoKTtcclxuICAgIGNvbnN0IGNsZXJrVXNlciA9IGF3YWl0IGNsZXJrLnVzZXJzLmdldFVzZXIoZXh0ZXJuYWxJZCk7XHJcbiAgICBlbWFpbCA9IGNsZXJrVXNlci5lbWFpbEFkZHJlc3Nlcy5maW5kKGUgPT4gZS5pZCA9PT0gY2xlcmtVc2VyLnByaW1hcnlFbWFpbEFkZHJlc3NJZCk/LmVtYWlsQWRkcmVzcztcclxuICAgIFxyXG4gICAgaWYgKCFlbWFpbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsZXJrIHVzZXIgaGFzIG5vIGVtYWlsIGFkZHJlc3MnKTtcclxuICAgIH1cclxuICAgIGRpc3BsYXlOYW1lID0gY2xlcmtVc2VyLnVzZXJuYW1lIHx8IGNsZXJrVXNlci5maXJzdE5hbWUgfHwgY2xlcmtVc2VyLmxhc3ROYW1lIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBGaXJzdCwgdHJ5IHRvIGZpbmQgYnkgY2xlcmtfaWQgKG1vc3QgY29tbW9uIGNhc2UsIHVzZXMgaW5kZXgpXHJcbiAgY29uc3QgW2V4aXN0aW5nQnlDbGVya0lkXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKGVxKHVzZXJzLmNsZXJrSWQsIGV4dGVybmFsSWQpKS5saW1pdCgxKTtcclxuICBpZiAoZXhpc3RpbmdCeUNsZXJrSWQpIHtcclxuICAgIC8vIE9ubHkgdXBkYXRlIGlmIGVtYWlsIG9yIHVzZXJuYW1lIGNoYW5nZWQsIG9yIGxhc3RMb2dpbiBpcyBvbGQgKD4gMSBob3VyKVxyXG4gICAgY29uc3QgbmVlZHNVcGRhdGUgPSBcclxuICAgICAgZXhpc3RpbmdCeUNsZXJrSWQuZW1haWwgIT09IGVtYWlsIHx8IFxyXG4gICAgICBleGlzdGluZ0J5Q2xlcmtJZC51c2VybmFtZSAhPT0gZGlzcGxheU5hbWUgfHxcclxuICAgICAgIWV4aXN0aW5nQnlDbGVya0lkLmxhc3RMb2dpbiB8fFxyXG4gICAgICAoRGF0ZS5ub3coKSAtIG5ldyBEYXRlKGV4aXN0aW5nQnlDbGVya0lkLmxhc3RMb2dpbikuZ2V0VGltZSgpKSA+IDM2MDAwMDA7IC8vIDEgaG91clxyXG5cclxuICAgIGlmIChuZWVkc1VwZGF0ZSkge1xyXG4gICAgICBjb25zdCBbdXBkYXRlZF0gPSBhd2FpdCBkYlxyXG4gICAgICAgIC51cGRhdGUodXNlcnMpXHJcbiAgICAgICAgLnNldCh7XHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHVzZXJuYW1lOiBkaXNwbGF5TmFtZSA/PyBleGlzdGluZ0J5Q2xlcmtJZC51c2VybmFtZSxcclxuICAgICAgICAgIGxhc3RMb2dpbjogbmV3IERhdGUoKSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVyZShlcSh1c2Vycy5pZCwgZXhpc3RpbmdCeUNsZXJrSWQuaWQhKSlcclxuICAgICAgICAucmV0dXJuaW5nKCk7XHJcblxyXG4gICAgICByZXR1cm4gbWFwVXNlcih1cGRhdGVkID8/IGV4aXN0aW5nQnlDbGVya0lkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTm8gdXBkYXRlIG5lZWRlZCwgcmV0dXJuIGV4aXN0aW5nIHVzZXJcclxuICAgIHJldHVybiBtYXBVc2VyKGV4aXN0aW5nQnlDbGVya0lkKTtcclxuICB9XHJcblxyXG4gIC8vIElmIG5vdCBmb3VuZCBieSBjbGVya19pZCwgY2hlY2sgaWYgZW1haWwgZXhpc3RzICh1c2VzIGluZGV4KVxyXG4gIGNvbnN0IFtleGlzdGluZ0J5RW1haWxdID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuZW1haWwsIGVtYWlsKSkubGltaXQoMSk7XHJcbiAgaWYgKGV4aXN0aW5nQnlFbWFpbCkge1xyXG4gICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyB1c2VyIHdpdGggdGhlIG5ldyBjbGVya19pZFxyXG4gICAgY29uc3QgW3VwZGF0ZWRdID0gYXdhaXQgZGJcclxuICAgICAgLnVwZGF0ZSh1c2VycylcclxuICAgICAgLnNldCh7XHJcbiAgICAgICAgY2xlcmtJZDogZXh0ZXJuYWxJZCxcclxuICAgICAgICB1c2VybmFtZTogZGlzcGxheU5hbWUgPz8gZXhpc3RpbmdCeUVtYWlsLnVzZXJuYW1lLFxyXG4gICAgICAgIGxhc3RMb2dpbjogbmV3IERhdGUoKSxcclxuICAgICAgfSlcclxuICAgICAgLndoZXJlKGVxKHVzZXJzLmlkLCBleGlzdGluZ0J5RW1haWwuaWQhKSlcclxuICAgICAgLnJldHVybmluZygpO1xyXG5cclxuICAgIHJldHVybiBtYXBVc2VyKHVwZGF0ZWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIG5ldyB1c2VyXHJcbiAgY29uc3QgW2NyZWF0ZWRdID0gYXdhaXQgZGJcclxuICAgIC5pbnNlcnQodXNlcnMpXHJcbiAgICAudmFsdWVzKHtcclxuICAgICAgY2xlcmtJZDogZXh0ZXJuYWxJZCxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIHVzZXJuYW1lOiBkaXNwbGF5TmFtZSxcclxuICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICBsYXN0TG9naW46IG5ldyBEYXRlKCksXHJcbiAgICB9KVxyXG4gICAgLnJldHVybmluZygpO1xyXG5cclxuICByZXR1cm4gbWFwVXNlcihjcmVhdGVkKTtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xlcmtDbGllbnQiLCJ2ZXJpZnlUb2tlbiIsImVxIiwiZ2V0RW52Q29uZmlnIiwiZ2V0RGIiLCJ1c2VycyIsIm1hcFVzZXIiLCJjYWNoZWRTZWNyZXRLZXkiLCJjbGVya0NsaWVudCIsImdldFNlY3JldEtleSIsImVudiIsIkNMRVJLX1NFQ1JFVF9LRVkiLCJFcnJvciIsImdldENsZXJrQ2xpZW50Iiwic2VjcmV0S2V5IiwidmVyaWZ5Q2xlcmtUb2tlbiIsInRva2VuIiwicGF5bG9hZCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzeW5jQ2xlcmtVc2VyIiwiY2xhaW1zIiwiZGIiLCJleHRlcm5hbElkIiwic3ViIiwiZW1haWwiLCJkaXNwbGF5TmFtZSIsInVzZXJuYW1lIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImNsZXJrIiwiY2xlcmtVc2VyIiwiZ2V0VXNlciIsImVtYWlsQWRkcmVzc2VzIiwiZmluZCIsImUiLCJpZCIsInByaW1hcnlFbWFpbEFkZHJlc3NJZCIsImVtYWlsQWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZXhpc3RpbmdCeUNsZXJrSWQiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJjbGVya0lkIiwibGltaXQiLCJuZWVkc1VwZGF0ZSIsImxhc3RMb2dpbiIsIkRhdGUiLCJub3ciLCJnZXRUaW1lIiwidXBkYXRlZCIsInVwZGF0ZSIsInNldCIsInJldHVybmluZyIsImV4aXN0aW5nQnlFbWFpbCIsImNyZWF0ZWQiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJyb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/clerk.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/email.ts":
/*!*******************************!*\
  !*** ./lib/services/email.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendAnnouncementEmail: () => (/* binding */ sendAnnouncementEmail)\n/* harmony export */ });\n/* harmony import */ var resend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! resend */ \"(rsc)/./node_modules/resend/dist/index.mjs\");\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/config */ \"(rsc)/./lib/config/config.ts\");\n/* harmony import */ var _config_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/env */ \"(rsc)/./lib/config/env.ts\");\n\n\n\nconst env = (0,_config_env__WEBPACK_IMPORTED_MODULE_2__.getEnvConfig)();\nconst resend = env.RESEND_API_KEY ? new resend__WEBPACK_IMPORTED_MODULE_0__.Resend(env.RESEND_API_KEY) : null;\nasync function sendAnnouncementEmail({ title, description, category, recipientEmails, expiryDate, scheduledAt }) {\n    try {\n        if (!resend) {\n            console.warn('Resend API key is not configured - email functionality disabled');\n            return {\n                success: false,\n                error: 'Email service is not configured. Please set RESEND_API_KEY.'\n            };\n        }\n        const cfg = (0,_config_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\n        const fromEmail = env.RESEND_FROM_EMAIL || 'onboarding@resend.dev';\n        if (recipientEmails.length === 0) {\n            return {\n                success: false,\n                error: 'No recipients specified'\n            };\n        }\n        const formatDate = (dateString)=>{\n            if (!dateString) return 'Not specified';\n            return new Date(dateString).toLocaleString('en-US', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n                hour: '2-digit',\n                minute: '2-digit'\n            });\n        };\n        const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n          <title>New Announcement: ${title}</title>\n        </head>\n        <body style=\"font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n          <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 10px 10px 0 0;\">\n            <h1 style=\"color: white; margin: 0; font-size: 24px;\"> New Announcement</h1>\n          </div>\n          <div style=\"background: #f9f9f9; padding: 30px; border: 1px solid #e0e0e0; border-top: none; border-radius: 0 0 10px 10px;\">\n            <h2 style=\"color: #667eea; margin-top: 0; font-size: 22px;\">${title}</h2>\n            <div style=\"background: white; padding: 20px; border-radius: 8px; margin: 20px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n              <p style=\"margin: 0 0 15px 0; color: #555; font-size: 16px; white-space: pre-wrap;\">${description}</p>\n            </div>\n            <div style=\"background: white; padding: 15px; border-radius: 8px; margin: 20px 0;\">\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #667eea;\">Category:</td>\n                  <td style=\"padding: 8px 0; color: #555; text-transform: capitalize;\">${category}</td>\n                </tr>\n                ${expiryDate ? `\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #667eea;\">Expiry Date:</td>\n                  <td style=\"padding: 8px 0; color: #555;\">${formatDate(expiryDate)}</td>\n                </tr>\n                ` : ''}\n                ${scheduledAt ? `\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #667eea;\">Scheduled For:</td>\n                  <td style=\"padding: 8px 0; color: #555;\">${formatDate(scheduledAt)}</td>\n                </tr>\n                ` : ''}\n              </table>\n            </div>\n            <div style=\"text-align: center; margin-top: 30px;\">\n              <a href=\"${cfg.frontendUrl}\" style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;\">View All Announcements</a>\n            </div>\n          </div>\n          <div style=\"text-align: center; margin-top: 20px; color: #999; font-size: 12px;\">\n            <p>This is an automated notification from the SST Announcement System.</p>\n          </div>\n        </body>\n      </html>\n    `;\n        const textContent = `\nNew Announcement: ${title}\n\n${description}\n\nCategory: ${category}\n${expiryDate ? `Expiry Date: ${formatDate(expiryDate)}` : ''}\n${scheduledAt ? `Scheduled For: ${formatDate(scheduledAt)}` : ''}\n\nView all announcements: ${cfg.frontendUrl}\n\nThis is an automated notification from the SST Announcement System.\n    `.trim();\n        const { error } = await resend.emails.send({\n            from: fromEmail,\n            to: recipientEmails,\n            subject: ` New Announcement: ${title}`,\n            html: htmlContent,\n            text: textContent\n        });\n        if (error) {\n            console.error('Error sending email via Resend:', error);\n            return {\n                success: false,\n                error: error.message || 'Failed to send email'\n            };\n        }\n        return {\n            success: true,\n            message: `Email sent successfully to ${recipientEmails.length} recipient(s)`\n        };\n    } catch (error) {\n        console.error('Unexpected error sending email:', error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to send email'\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmljZXMvZW1haWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNhO0FBQ0E7QUFFN0MsTUFBTUcsTUFBTUQseURBQVlBO0FBQ3hCLE1BQU1FLFNBQVNELElBQUlFLGNBQWMsR0FBRyxJQUFJTCwwQ0FBTUEsQ0FBQ0csSUFBSUUsY0FBYyxJQUFJO0FBVzlELGVBQWVDLHNCQUFzQixFQUMxQ0MsS0FBSyxFQUNMQyxXQUFXLEVBQ1hDLFFBQVEsRUFDUkMsZUFBZSxFQUNmQyxVQUFVLEVBQ1ZDLFdBQVcsRUFDaUI7SUFDNUIsSUFBSTtRQUNGLElBQUksQ0FBQ1IsUUFBUTtZQUNYUyxRQUFRQyxJQUFJLENBQUM7WUFDYixPQUFPO2dCQUNMQyxTQUFTO2dCQUNUQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLE1BQU1DLE1BQU1oQix5REFBU0E7UUFDckIsTUFBTWlCLFlBQVlmLElBQUlnQixpQkFBaUIsSUFBSTtRQUUzQyxJQUFJVCxnQkFBZ0JVLE1BQU0sS0FBSyxHQUFHO1lBQ2hDLE9BQU87Z0JBQUVMLFNBQVM7Z0JBQU9DLE9BQU87WUFBMEI7UUFDNUQ7UUFFQSxNQUFNSyxhQUFhLENBQUNDO1lBQ2xCLElBQUksQ0FBQ0EsWUFBWSxPQUFPO1lBQ3hCLE9BQU8sSUFBSUMsS0FBS0QsWUFBWUUsY0FBYyxDQUFDLFNBQVM7Z0JBQ2xEQyxNQUFNO2dCQUNOQyxPQUFPO2dCQUNQQyxLQUFLO2dCQUNMQyxNQUFNO2dCQUNOQyxRQUFRO1lBQ1Y7UUFDRjtRQUVBLE1BQU1DLGNBQWMsQ0FBQzs7Ozs7O21DQU1VLEVBQUV2QixNQUFNOzs7Ozs7O3dFQU82QixFQUFFQSxNQUFNOztrR0FFa0IsRUFBRUMsWUFBWTs7Ozs7O3VGQU16QixFQUFFQyxTQUFTOztnQkFFbEYsRUFBRUUsYUFBYSxDQUFDOzs7MkRBRzJCLEVBQUVVLFdBQVdWLFlBQVk7O2dCQUVwRSxDQUFDLEdBQUcsR0FBRztnQkFDUCxFQUFFQyxjQUFjLENBQUM7OzsyREFHMEIsRUFBRVMsV0FBV1QsYUFBYTs7Z0JBRXJFLENBQUMsR0FBRyxHQUFHOzs7O3VCQUlBLEVBQUVLLElBQUljLFdBQVcsQ0FBQzs7Ozs7Ozs7SUFRckMsQ0FBQztRQUVELE1BQU1DLGNBQWMsQ0FBQztrQkFDUCxFQUFFekIsTUFBTTs7QUFFMUIsRUFBRUMsWUFBWTs7VUFFSixFQUFFQyxTQUFTO0FBQ3JCLEVBQUVFLGFBQWEsQ0FBQyxhQUFhLEVBQUVVLFdBQVdWLGFBQWEsR0FBRyxHQUFHO0FBQzdELEVBQUVDLGNBQWMsQ0FBQyxlQUFlLEVBQUVTLFdBQVdULGNBQWMsR0FBRyxHQUFHOzt3QkFFekMsRUFBRUssSUFBSWMsV0FBVyxDQUFDOzs7SUFHdEMsQ0FBQyxDQUFDRSxJQUFJO1FBRU4sTUFBTSxFQUFFakIsS0FBSyxFQUFFLEdBQUcsTUFBTVosT0FBTzhCLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDO1lBQ3pDQyxNQUFNbEI7WUFDTm1CLElBQUkzQjtZQUNKNEIsU0FBUyxDQUFDLHFCQUFxQixFQUFFL0IsT0FBTztZQUN4Q2dDLE1BQU1UO1lBQ05VLE1BQU1SO1FBQ1I7UUFFQSxJQUFJaEIsT0FBTztZQUNUSCxRQUFRRyxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRCxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPQSxNQUFNeUIsT0FBTyxJQUFJO1lBQzFCO1FBQ0Y7UUFFQSxPQUFPO1lBQ0wxQixTQUFTO1lBQ1QwQixTQUFTLENBQUMsMkJBQTJCLEVBQUUvQixnQkFBZ0JVLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDOUU7SUFDRixFQUFFLE9BQU9KLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBTztZQUNMRCxTQUFTO1lBQ1RDLE9BQU9BLGlCQUFpQjBCLFFBQVExQixNQUFNeUIsT0FBTyxHQUFHO1FBQ2xEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcc2VydmljZXNcXGVtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc2VuZCB9IGZyb20gJ3Jlc2VuZCc7XHJcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJy4uL2NvbmZpZy9jb25maWcnO1xyXG5pbXBvcnQgeyBnZXRFbnZDb25maWcgfSBmcm9tICcuLi9jb25maWcvZW52JztcclxuXHJcbmNvbnN0IGVudiA9IGdldEVudkNvbmZpZygpO1xyXG5jb25zdCByZXNlbmQgPSBlbnYuUkVTRU5EX0FQSV9LRVkgPyBuZXcgUmVzZW5kKGVudi5SRVNFTkRfQVBJX0tFWSkgOiBudWxsO1xyXG5cclxuaW50ZXJmYWNlIFNlbmRBbm5vdW5jZW1lbnRFbWFpbFBhcmFtcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgcmVjaXBpZW50RW1haWxzOiBzdHJpbmdbXTtcclxuICBleHBpcnlEYXRlPzogc3RyaW5nIHwgbnVsbDtcclxuICBzY2hlZHVsZWRBdD86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kQW5ub3VuY2VtZW50RW1haWwoe1xyXG4gIHRpdGxlLFxyXG4gIGRlc2NyaXB0aW9uLFxyXG4gIGNhdGVnb3J5LFxyXG4gIHJlY2lwaWVudEVtYWlscyxcclxuICBleHBpcnlEYXRlLFxyXG4gIHNjaGVkdWxlZEF0LFxyXG59OiBTZW5kQW5ub3VuY2VtZW50RW1haWxQYXJhbXMpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZT86IHN0cmluZzsgZXJyb3I/OiBzdHJpbmcgfT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoIXJlc2VuZCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1Jlc2VuZCBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkIC0gZW1haWwgZnVuY3Rpb25hbGl0eSBkaXNhYmxlZCcpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRW1haWwgc2VydmljZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBSRVNFTkRfQVBJX0tFWS4nLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNmZyA9IGdldENvbmZpZygpO1xyXG4gICAgY29uc3QgZnJvbUVtYWlsID0gZW52LlJFU0VORF9GUk9NX0VNQUlMIHx8ICdvbmJvYXJkaW5nQHJlc2VuZC5kZXYnO1xyXG5cclxuICAgIGlmIChyZWNpcGllbnRFbWFpbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHJlY2lwaWVudHMgc3BlY2lmaWVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZVN0cmluZz86IHN0cmluZyB8IG51bGwpID0+IHtcclxuICAgICAgaWYgKCFkYXRlU3RyaW5nKSByZXR1cm4gJ05vdCBzcGVjaWZpZWQnO1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZykudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge1xyXG4gICAgICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgICAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgICAgIGRheTogJ251bWVyaWMnLFxyXG4gICAgICAgIGhvdXI6ICcyLWRpZ2l0JyxcclxuICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIiAvPlxyXG4gICAgICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIiAvPlxyXG4gICAgICAgICAgPHRpdGxlPk5ldyBBbm5vdW5jZW1lbnQ6ICR7dGl0bGV9PC90aXRsZT5cclxuICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgPGJvZHkgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjBweDtcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBwYWRkaW5nOiAzMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDEwcHggMTBweCAwIDA7XCI+XHJcbiAgICAgICAgICAgIDxoMSBzdHlsZT1cImNvbG9yOiB3aGl0ZTsgbWFyZ2luOiAwOyBmb250LXNpemU6IDI0cHg7XCI+8J+ToiBOZXcgQW5ub3VuY2VtZW50PC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmOWY5Zjk7IHBhZGRpbmc6IDMwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IGJvcmRlci10b3A6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAgMCAxMHB4IDEwcHg7XCI+XHJcbiAgICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjNjY3ZWVhOyBtYXJnaW4tdG9wOiAwOyBmb250LXNpemU6IDIycHg7XCI+JHt0aXRsZX08L2gyPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luOiAyMHB4IDA7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7XCI+XHJcbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDAgMCAxNXB4IDA7IGNvbG9yOiAjNTU1OyBmb250LXNpemU6IDE2cHg7IHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcIj4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDtcIj5cclxuICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9XCJ3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcIj5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4IDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzY2N2VlYTtcIj5DYXRlZ29yeTo8L3RkPlxyXG4gICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHggMDsgY29sb3I6ICM1NTU7IHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1wiPiR7Y2F0ZWdvcnl9PC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAke2V4cGlyeURhdGUgPyBgXHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweCAwOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjdlZWE7XCI+RXhwaXJ5IERhdGU6PC90ZD5cclxuICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4IDA7IGNvbG9yOiAjNTU1O1wiPiR7Zm9ybWF0RGF0ZShleHBpcnlEYXRlKX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIGAgOiAnJ31cclxuICAgICAgICAgICAgICAgICR7c2NoZWR1bGVkQXQgPyBgXHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweCAwOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2NjdlZWE7XCI+U2NoZWR1bGVkIEZvcjo8L3RkPlxyXG4gICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHggMDsgY29sb3I6ICM1NTU7XCI+JHtmb3JtYXREYXRlKHNjaGVkdWxlZEF0KX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIGAgOiAnJ31cclxuICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLXRvcDogMzBweDtcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtjZmcuZnJvbnRlbmRVcmx9XCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNjY3ZWVhIDAlLCAjNzY0YmEyIDEwMCUpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMzBweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+VmlldyBBbGwgQW5ub3VuY2VtZW50czwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDIwcHg7IGNvbG9yOiAjOTk5OyBmb250LXNpemU6IDEycHg7XCI+XHJcbiAgICAgICAgICAgIDxwPlRoaXMgaXMgYW4gYXV0b21hdGVkIG5vdGlmaWNhdGlvbiBmcm9tIHRoZSBTU1QgQW5ub3VuY2VtZW50IFN5c3RlbS48L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgdGV4dENvbnRlbnQgPSBgXHJcbk5ldyBBbm5vdW5jZW1lbnQ6ICR7dGl0bGV9XHJcblxyXG4ke2Rlc2NyaXB0aW9ufVxyXG5cclxuQ2F0ZWdvcnk6ICR7Y2F0ZWdvcnl9XHJcbiR7ZXhwaXJ5RGF0ZSA/IGBFeHBpcnkgRGF0ZTogJHtmb3JtYXREYXRlKGV4cGlyeURhdGUpfWAgOiAnJ31cclxuJHtzY2hlZHVsZWRBdCA/IGBTY2hlZHVsZWQgRm9yOiAke2Zvcm1hdERhdGUoc2NoZWR1bGVkQXQpfWAgOiAnJ31cclxuXHJcblZpZXcgYWxsIGFubm91bmNlbWVudHM6ICR7Y2ZnLmZyb250ZW5kVXJsfVxyXG5cclxuVGhpcyBpcyBhbiBhdXRvbWF0ZWQgbm90aWZpY2F0aW9uIGZyb20gdGhlIFNTVCBBbm5vdW5jZW1lbnQgU3lzdGVtLlxyXG4gICAgYC50cmltKCk7XHJcblxyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgcmVzZW5kLmVtYWlscy5zZW5kKHtcclxuICAgICAgZnJvbTogZnJvbUVtYWlsLFxyXG4gICAgICB0bzogcmVjaXBpZW50RW1haWxzLFxyXG4gICAgICBzdWJqZWN0OiBg8J+ToiBOZXcgQW5ub3VuY2VtZW50OiAke3RpdGxlfWAsXHJcbiAgICAgIGh0bWw6IGh0bWxDb250ZW50LFxyXG4gICAgICB0ZXh0OiB0ZXh0Q29udGVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGVtYWlsIHZpYSBSZXNlbmQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc2VuZCBlbWFpbCcsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogYEVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IHRvICR7cmVjaXBpZW50RW1haWxzLmxlbmd0aH0gcmVjaXBpZW50KHMpYCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzZW5kIGVtYWlsJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJSZXNlbmQiLCJnZXRDb25maWciLCJnZXRFbnZDb25maWciLCJlbnYiLCJyZXNlbmQiLCJSRVNFTkRfQVBJX0tFWSIsInNlbmRBbm5vdW5jZW1lbnRFbWFpbCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInJlY2lwaWVudEVtYWlscyIsImV4cGlyeURhdGUiLCJzY2hlZHVsZWRBdCIsImNvbnNvbGUiLCJ3YXJuIiwic3VjY2VzcyIsImVycm9yIiwiY2ZnIiwiZnJvbUVtYWlsIiwiUkVTRU5EX0ZST01fRU1BSUwiLCJsZW5ndGgiLCJmb3JtYXREYXRlIiwiZGF0ZVN0cmluZyIsIkRhdGUiLCJ0b0xvY2FsZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsImhvdXIiLCJtaW51dGUiLCJodG1sQ29udGVudCIsImZyb250ZW5kVXJsIiwidGV4dENvbnRlbnQiLCJ0cmltIiwiZW1haWxzIiwic2VuZCIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwidGV4dCIsIm1lc3NhZ2UiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/email.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/errors.ts":
/*!*****************************!*\
  !*** ./lib/utils/errors.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiError: () => (/* binding */ ApiError),\n/* harmony export */   BadRequestError: () => (/* binding */ BadRequestError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   ForbiddenError: () => (/* binding */ ForbiddenError),\n/* harmony export */   InternalServerError: () => (/* binding */ InternalServerError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   UnauthorizedError: () => (/* binding */ UnauthorizedError),\n/* harmony export */   formatErrorResponse: () => (/* binding */ formatErrorResponse)\n/* harmony export */ });\nclass ApiError extends Error {\n    constructor(statusCode, message, code, details){\n        super(message);\n        this.name = 'ApiError';\n        this.statusCode = statusCode;\n        this.code = code;\n        this.details = details;\n    }\n}\nclass NotFoundError extends ApiError {\n    constructor(resource, id){\n        super(404, `${resource}${id ? ` with id ${id}` : ''} not found`, 'NOT_FOUND');\n    }\n}\nclass BadRequestError extends ApiError {\n    constructor(message, details){\n        super(400, message, 'BAD_REQUEST', details);\n    }\n}\nclass UnauthorizedError extends ApiError {\n    constructor(message = 'Unauthorized'){\n        super(401, message, 'UNAUTHORIZED');\n    }\n}\nclass ForbiddenError extends ApiError {\n    constructor(message = 'Forbidden'){\n        super(403, message, 'FORBIDDEN');\n    }\n}\nclass ConflictError extends ApiError {\n    constructor(message, details){\n        super(409, message, 'CONFLICT', details);\n    }\n}\nclass InternalServerError extends ApiError {\n    constructor(message = 'Internal server error', details){\n        super(500, message, 'INTERNAL_SERVER_ERROR', details);\n    }\n}\nfunction formatErrorResponse(error) {\n    if (error instanceof ApiError) {\n        return {\n            success: false,\n            error: error.message,\n            message: error.message,\n            code: error.code,\n            details: error.details\n        };\n    }\n    if (error instanceof Error) {\n        return {\n            success: false,\n            error: error.message,\n            message: error.message\n        };\n    }\n    return {\n        success: false,\n        error: 'An unexpected error occurred',\n        message: 'An unexpected error occurred'\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvZXJyb3JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsaUJBQWlCQztJQUs1QkMsWUFBWUMsVUFBa0IsRUFBRUMsT0FBZSxFQUFFQyxJQUFhLEVBQUVDLE9BQWlCLENBQUU7UUFDakYsS0FBSyxDQUFDRjtRQUNOLElBQUksQ0FBQ0csSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDSixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0UsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNqQjtBQUNGO0FBRU8sTUFBTUUsc0JBQXNCUjtJQUNqQ0UsWUFBWU8sUUFBZ0IsRUFBRUMsRUFBb0IsQ0FBRTtRQUNsRCxLQUFLLENBQUMsS0FBSyxHQUFHRCxXQUFXQyxLQUFLLENBQUMsU0FBUyxFQUFFQSxJQUFJLEdBQUcsR0FBRyxVQUFVLENBQUMsRUFBRTtJQUNuRTtBQUNGO0FBRU8sTUFBTUMsd0JBQXdCWDtJQUNuQ0UsWUFBWUUsT0FBZSxFQUFFRSxPQUFpQixDQUFFO1FBQzlDLEtBQUssQ0FBQyxLQUFLRixTQUFTLGVBQWVFO0lBQ3JDO0FBQ0Y7QUFFTyxNQUFNTSwwQkFBMEJaO0lBQ3JDRSxZQUFZRSxVQUFVLGNBQWMsQ0FBRTtRQUNwQyxLQUFLLENBQUMsS0FBS0EsU0FBUztJQUN0QjtBQUNGO0FBRU8sTUFBTVMsdUJBQXVCYjtJQUNsQ0UsWUFBWUUsVUFBVSxXQUFXLENBQUU7UUFDakMsS0FBSyxDQUFDLEtBQUtBLFNBQVM7SUFDdEI7QUFDRjtBQUVPLE1BQU1VLHNCQUFzQmQ7SUFDakNFLFlBQVlFLE9BQWUsRUFBRUUsT0FBaUIsQ0FBRTtRQUM5QyxLQUFLLENBQUMsS0FBS0YsU0FBUyxZQUFZRTtJQUNsQztBQUNGO0FBRU8sTUFBTVMsNEJBQTRCZjtJQUN2Q0UsWUFBWUUsVUFBVSx1QkFBdUIsRUFBRUUsT0FBaUIsQ0FBRTtRQUNoRSxLQUFLLENBQUMsS0FBS0YsU0FBUyx5QkFBeUJFO0lBQy9DO0FBQ0Y7QUFFTyxTQUFTVSxvQkFBb0JDLEtBQWM7SUFDaEQsSUFBSUEsaUJBQWlCakIsVUFBVTtRQUM3QixPQUFPO1lBQ0xrQixTQUFTO1lBQ1RELE9BQU9BLE1BQU1iLE9BQU87WUFDcEJBLFNBQVNhLE1BQU1iLE9BQU87WUFDdEJDLE1BQU1ZLE1BQU1aLElBQUk7WUFDaEJDLFNBQVNXLE1BQU1YLE9BQU87UUFDeEI7SUFDRjtJQUVBLElBQUlXLGlCQUFpQmhCLE9BQU87UUFDMUIsT0FBTztZQUNMaUIsU0FBUztZQUNURCxPQUFPQSxNQUFNYixPQUFPO1lBQ3BCQSxTQUFTYSxNQUFNYixPQUFPO1FBQ3hCO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xjLFNBQVM7UUFDVEQsT0FBTztRQUNQYixTQUFTO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcdXRpbHNcXGVycm9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAgZGV0YWlscz86IHVua25vd247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nLCBjb2RlPzogc3RyaW5nLCBkZXRhaWxzPzogdW5rbm93bikge1xyXG4gICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB0aGlzLm5hbWUgPSAnQXBpRXJyb3InO1xyXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XHJcbiAgY29uc3RydWN0b3IocmVzb3VyY2U6IHN0cmluZywgaWQ/OiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgIHN1cGVyKDQwNCwgYCR7cmVzb3VyY2V9JHtpZCA/IGAgd2l0aCBpZCAke2lkfWAgOiAnJ30gbm90IGZvdW5kYCwgJ05PVF9GT1VORCcpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGRldGFpbHM/OiB1bmtub3duKSB7XHJcbiAgICBzdXBlcig0MDAsIG1lc3NhZ2UsICdCQURfUkVRVUVTVCcsIGRldGFpbHMpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVuYXV0aG9yaXplZEVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnVW5hdXRob3JpemVkJykge1xyXG4gICAgc3VwZXIoNDAxLCBtZXNzYWdlLCAnVU5BVVRIT1JJWkVEJyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRm9yYmlkZGVuRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XHJcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdGb3JiaWRkZW4nKSB7XHJcbiAgICBzdXBlcig0MDMsIG1lc3NhZ2UsICdGT1JCSURERU4nKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IHVua25vd24pIHtcclxuICAgIHN1cGVyKDQwOSwgbWVzc2FnZSwgJ0NPTkZMSUNUJywgZGV0YWlscyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXJ2ZXJFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGRldGFpbHM/OiB1bmtub3duKSB7XHJcbiAgICBzdXBlcig1MDAsIG1lc3NhZ2UsICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLCBkZXRhaWxzKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFcnJvclJlc3BvbnNlKGVycm9yOiB1bmtub3duKSB7XHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXBpRXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgY29kZTogZXJyb3IuY29kZSxcclxuICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcclxuICAgIH0gYXMgY29uc3Q7XHJcbiAgfVxyXG5cclxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSBhcyBjb25zdDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXHJcbiAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXHJcbiAgfSBhcyBjb25zdDtcclxufVxyXG4iXSwibmFtZXMiOlsiQXBpRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJjb2RlIiwiZGV0YWlscyIsIm5hbWUiLCJOb3RGb3VuZEVycm9yIiwicmVzb3VyY2UiLCJpZCIsIkJhZFJlcXVlc3RFcnJvciIsIlVuYXV0aG9yaXplZEVycm9yIiwiRm9yYmlkZGVuRXJyb3IiLCJDb25mbGljdEVycm9yIiwiSW50ZXJuYWxTZXJ2ZXJFcnJvciIsImZvcm1hdEVycm9yUmVzcG9uc2UiLCJlcnJvciIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/errors.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/roleUtils.ts":
/*!********************************!*\
  !*** ./lib/utils/roleUtils.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canManageUsers: () => (/* binding */ canManageUsers),\n/* harmony export */   getRoleDisplay: () => (/* binding */ getRoleDisplay),\n/* harmony export */   hasAdminAccess: () => (/* binding */ hasAdminAccess),\n/* harmony export */   normalizeUserRole: () => (/* binding */ normalizeUserRole)\n/* harmony export */ });\n/**\r\n * Normalize role from database format to frontend format\r\n * Handles backward compatibility with old role names\r\n */ function normalizeUserRole(role, isAdmin) {\n    if (!role) {\n        return isAdmin ? 'admin' : 'student';\n    }\n    // Handle old format mappings\n    const roleMapping = {\n        'user': 'student',\n        'superadmin': 'super_admin',\n        'student': 'student',\n        'student_admin': 'student_admin',\n        'admin': 'admin',\n        'super_admin': 'super_admin'\n    };\n    return roleMapping[role] || (isAdmin ? 'admin' : 'student');\n}\n/**\r\n * Check if user has admin-level access\r\n */ function hasAdminAccess(role) {\n    return [\n        'student_admin',\n        'admin',\n        'super_admin'\n    ].includes(role);\n}\n/**\r\n * Check if user can manage other users (super admin only)\r\n */ function canManageUsers(role) {\n    return role === 'super_admin';\n}\n/**\r\n * Get role display name\r\n */ function getRoleDisplay(role) {\n    const displays = {\n        student: 'Student',\n        student_admin: 'Student Admin',\n        admin: 'Admin',\n        super_admin: 'Super Admin'\n    };\n    return displays[role] || 'Student';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvcm9sZVV0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQSxrQkFBa0JDLElBQXdCLEVBQUVDLE9BQWlCO0lBQzNFLElBQUksQ0FBQ0QsTUFBTTtRQUNULE9BQU9DLFVBQVUsVUFBVTtJQUM3QjtJQUVBLDZCQUE2QjtJQUM3QixNQUFNQyxjQUF3QztRQUM1QyxRQUFRO1FBQ1IsY0FBYztRQUNkLFdBQVc7UUFDWCxpQkFBaUI7UUFDakIsU0FBUztRQUNULGVBQWU7SUFDakI7SUFFQSxPQUFPQSxXQUFXLENBQUNGLEtBQUssSUFBS0MsQ0FBQUEsVUFBVSxVQUFVLFNBQVE7QUFDM0Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFLGVBQWVILElBQWM7SUFDM0MsT0FBTztRQUFDO1FBQWlCO1FBQVM7S0FBYyxDQUFDSSxRQUFRLENBQUNKO0FBQzVEO0FBRUE7O0NBRUMsR0FDTSxTQUFTSyxlQUFlTCxJQUFjO0lBQzNDLE9BQU9BLFNBQVM7QUFDbEI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNNLGVBQWVOLElBQWM7SUFDM0MsTUFBTU8sV0FBcUM7UUFDekNDLFNBQVM7UUFDVEMsZUFBZTtRQUNmQyxPQUFPO1FBQ1BDLGFBQWE7SUFDZjtJQUNBLE9BQU9KLFFBQVEsQ0FBQ1AsS0FBSyxJQUFJO0FBQzNCIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFx1dGlsc1xccm9sZVV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXNlclJvbGUgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG4vKipcclxuICogTm9ybWFsaXplIHJvbGUgZnJvbSBkYXRhYmFzZSBmb3JtYXQgdG8gZnJvbnRlbmQgZm9ybWF0XHJcbiAqIEhhbmRsZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIG9sZCByb2xlIG5hbWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVXNlclJvbGUocm9sZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpc0FkbWluPzogYm9vbGVhbik6IFVzZXJSb2xlIHtcclxuICBpZiAoIXJvbGUpIHtcclxuICAgIHJldHVybiBpc0FkbWluID8gJ2FkbWluJyA6ICdzdHVkZW50JztcclxuICB9XHJcbiAgXHJcbiAgLy8gSGFuZGxlIG9sZCBmb3JtYXQgbWFwcGluZ3NcclxuICBjb25zdCByb2xlTWFwcGluZzogUmVjb3JkPHN0cmluZywgVXNlclJvbGU+ID0ge1xyXG4gICAgJ3VzZXInOiAnc3R1ZGVudCcsXHJcbiAgICAnc3VwZXJhZG1pbic6ICdzdXBlcl9hZG1pbicsXHJcbiAgICAnc3R1ZGVudCc6ICdzdHVkZW50JyxcclxuICAgICdzdHVkZW50X2FkbWluJzogJ3N0dWRlbnRfYWRtaW4nLCBcclxuICAgICdhZG1pbic6ICdhZG1pbicsXHJcbiAgICAnc3VwZXJfYWRtaW4nOiAnc3VwZXJfYWRtaW4nXHJcbiAgfTtcclxuICBcclxuICByZXR1cm4gcm9sZU1hcHBpbmdbcm9sZV0gfHwgKGlzQWRtaW4gPyAnYWRtaW4nIDogJ3N0dWRlbnQnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHVzZXIgaGFzIGFkbWluLWxldmVsIGFjY2Vzc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FkbWluQWNjZXNzKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIFsnc3R1ZGVudF9hZG1pbicsICdhZG1pbicsICdzdXBlcl9hZG1pbiddLmluY2x1ZGVzKHJvbGUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBjYW4gbWFuYWdlIG90aGVyIHVzZXJzIChzdXBlciBhZG1pbiBvbmx5KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbk1hbmFnZVVzZXJzKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHJvbGUgPT09ICdzdXBlcl9hZG1pbic7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgcm9sZSBkaXNwbGF5IG5hbWVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb2xlRGlzcGxheShyb2xlOiBVc2VyUm9sZSk6IHN0cmluZyB7XHJcbiAgY29uc3QgZGlzcGxheXM6IFJlY29yZDxVc2VyUm9sZSwgc3RyaW5nPiA9IHtcclxuICAgIHN0dWRlbnQ6ICdTdHVkZW50JyxcclxuICAgIHN0dWRlbnRfYWRtaW46ICdTdHVkZW50IEFkbWluJyxcclxuICAgIGFkbWluOiAnQWRtaW4nLFxyXG4gICAgc3VwZXJfYWRtaW46ICdTdXBlciBBZG1pbidcclxuICB9O1xyXG4gIHJldHVybiBkaXNwbGF5c1tyb2xlXSB8fCAnU3R1ZGVudCc7XHJcbn1cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVVzZXJSb2xlIiwicm9sZSIsImlzQWRtaW4iLCJyb2xlTWFwcGluZyIsImhhc0FkbWluQWNjZXNzIiwiaW5jbHVkZXMiLCJjYW5NYW5hZ2VVc2VycyIsImdldFJvbGVEaXNwbGF5IiwiZGlzcGxheXMiLCJzdHVkZW50Iiwic3R1ZGVudF9hZG1pbiIsImFkbWluIiwic3VwZXJfYWRtaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/roleUtils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/validation.ts":
/*!*********************************!*\
  !*** ./lib/utils/validation.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   validateAnnouncement: () => (/* binding */ validateAnnouncement),\n/* harmony export */   validateEmail: () => (/* binding */ validateEmail),\n/* harmony export */   validateUserId: () => (/* binding */ validateUserId)\n/* harmony export */ });\nclass ValidationError extends Error {\n    constructor(errors){\n        super('Validation failed');\n        this.name = 'ValidationError';\n        this.errors = errors;\n    }\n}\nfunction validateAnnouncement(data) {\n    const errors = [];\n    if (!data.title || typeof data.title !== 'string' || data.title.trim().length === 0) {\n        errors.push({\n            field: 'title',\n            message: 'Title is required and must be a non-empty string'\n        });\n    } else if (data.title.length > 200) {\n        errors.push({\n            field: 'title',\n            message: 'Title must be less than 200 characters'\n        });\n    }\n    if (!data.description || typeof data.description !== 'string' || data.description.trim().length === 0) {\n        errors.push({\n            field: 'description',\n            message: 'Description is required and must be a non-empty string'\n        });\n    } else if (data.description.length > 5000) {\n        errors.push({\n            field: 'description',\n            message: 'Description must be less than 5000 characters'\n        });\n    }\n    if (!data.category || typeof data.category !== 'string') {\n        errors.push({\n            field: 'category',\n            message: 'Category is required'\n        });\n    }\n    const validCategories = [\n        'college',\n        'tech',\n        'tech-events',\n        'tech-workshops',\n        'other'\n    ];\n    if (data.category && !validCategories.includes(data.category.toLowerCase())) {\n        errors.push({\n            field: 'category',\n            message: `Category must be one of: ${validCategories.join(', ')}`\n        });\n    }\n    if (data.expiry_date && !isValidDate(data.expiry_date)) {\n        errors.push({\n            field: 'expiry_date',\n            message: 'Expiry date must be a valid date'\n        });\n    }\n    if (data.scheduled_at && !isValidDate(data.scheduled_at)) {\n        errors.push({\n            field: 'scheduled_at',\n            message: 'Scheduled date must be a valid date'\n        });\n    }\n    if (data.reminder_time && !isValidDate(data.reminder_time)) {\n        errors.push({\n            field: 'reminder_time',\n            message: 'Reminder time must be a valid date'\n        });\n    }\n    if (data.priority_until && !isValidDate(data.priority_until)) {\n        errors.push({\n            field: 'priority_until',\n            message: 'Priority until must be a valid date'\n        });\n    }\n    if (data.emergency_expires_at && !isValidDate(data.emergency_expires_at)) {\n        errors.push({\n            field: 'emergency_expires_at',\n            message: 'Emergency expiration time must be a valid date'\n        });\n    }\n    if (data.is_active !== undefined && typeof data.is_active !== 'boolean') {\n        errors.push({\n            field: 'is_active',\n            message: 'is_active must be a boolean'\n        });\n    }\n    if (data.status && typeof data.status !== 'string') {\n        errors.push({\n            field: 'status',\n            message: 'Status must be a string'\n        });\n    }\n    const validStatuses = [\n        'active',\n        'scheduled',\n        'draft',\n        'archived',\n        'urgent'\n    ];\n    if (data.status && !validStatuses.includes(data.status.toLowerCase())) {\n        errors.push({\n            field: 'status',\n            message: `Status must be one of: ${validStatuses.join(', ')}`\n        });\n    }\n    return errors;\n}\nfunction validateEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\nfunction isValidDate(dateString) {\n    const date = new Date(dateString);\n    return date instanceof Date && !isNaN(date.getTime());\n}\nfunction validateUserId(id) {\n    return typeof id === 'number' && Number.isInteger(id) && id > 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDM0U7SUFFQSxJQUFJTixLQUFLcUIsTUFBTSxJQUFJLE9BQU9yQixLQUFLcUIsTUFBTSxLQUFLLFVBQVU7UUFDbER4QixPQUFPTyxJQUFJLENBQUM7WUFBRUMsT0FBTztZQUFVQyxTQUFTO1FBQTBCO0lBQ3BFO0lBRUEsTUFBTWdCLGdCQUFnQjtRQUFDO1FBQVU7UUFBYTtRQUFTO1FBQVk7S0FBUztJQUM1RSxJQUFJdEIsS0FBS3FCLE1BQU0sSUFBSSxDQUFDQyxjQUFjWixRQUFRLENBQUNWLEtBQUtxQixNQUFNLENBQUNWLFdBQVcsS0FBSztRQUNyRWQsT0FBT08sSUFBSSxDQUFDO1lBQUVDLE9BQU87WUFBVUMsU0FBUyxDQUFDLHVCQUF1QixFQUFFZ0IsY0FBY1YsSUFBSSxDQUFDLE9BQU87UUFBQztJQUMvRjtJQUVBLE9BQU9mO0FBQ1Q7QUFFTyxTQUFTMEIsY0FBY0MsS0FBYTtJQUN6QyxNQUFNQyxhQUFhO0lBQ25CLE9BQU9BLFdBQVdDLElBQUksQ0FBQ0Y7QUFDekI7QUFFQSxTQUFTVixZQUFZYSxVQUFrQjtJQUNyQyxNQUFNQyxPQUFPLElBQUlDLEtBQUtGO0lBQ3RCLE9BQU9DLGdCQUFnQkMsUUFBUSxDQUFDQyxNQUFNRixLQUFLRyxPQUFPO0FBQ3BEO0FBRU8sU0FBU0MsZUFBZUMsRUFBVztJQUN4QyxPQUFPLE9BQU9BLE9BQU8sWUFBWUMsT0FBT0MsU0FBUyxDQUFDRixPQUFPQSxLQUFLO0FBQ2hFIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFx1dGlsc1xcdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25FcnJvckl0ZW0ge1xyXG4gIGZpZWxkOiBzdHJpbmc7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIGVycm9yczogVmFsaWRhdGlvbkVycm9ySXRlbVtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihlcnJvcnM6IFZhbGlkYXRpb25FcnJvckl0ZW1bXSkge1xyXG4gICAgc3VwZXIoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XHJcbiAgICB0aGlzLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJztcclxuICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQW5ub3VuY2VtZW50KGRhdGE6IGFueSk6IFZhbGlkYXRpb25FcnJvckl0ZW1bXSB7XHJcbiAgY29uc3QgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JJdGVtW10gPSBbXTtcclxuXHJcbiAgaWYgKCFkYXRhLnRpdGxlIHx8IHR5cGVvZiBkYXRhLnRpdGxlICE9PSAnc3RyaW5nJyB8fCBkYXRhLnRpdGxlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICd0aXRsZScsIG1lc3NhZ2U6ICdUaXRsZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnIH0pO1xyXG4gIH0gZWxzZSBpZiAoZGF0YS50aXRsZS5sZW5ndGggPiAyMDApIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICd0aXRsZScsIG1lc3NhZ2U6ICdUaXRsZSBtdXN0IGJlIGxlc3MgdGhhbiAyMDAgY2hhcmFjdGVycycgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIWRhdGEuZGVzY3JpcHRpb24gfHwgdHlwZW9mIGRhdGEuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnIHx8IGRhdGEuZGVzY3JpcHRpb24udHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgZXJyb3JzLnB1c2goeyBmaWVsZDogJ2Rlc2NyaXB0aW9uJywgbWVzc2FnZTogJ0Rlc2NyaXB0aW9uIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycgfSk7XHJcbiAgfSBlbHNlIGlmIChkYXRhLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwMDApIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICdkZXNjcmlwdGlvbicsIG1lc3NhZ2U6ICdEZXNjcmlwdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiA1MDAwIGNoYXJhY3RlcnMnIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFkYXRhLmNhdGVnb3J5IHx8IHR5cGVvZiBkYXRhLmNhdGVnb3J5ICE9PSAnc3RyaW5nJykge1xyXG4gICAgZXJyb3JzLnB1c2goeyBmaWVsZDogJ2NhdGVnb3J5JywgbWVzc2FnZTogJ0NhdGVnb3J5IGlzIHJlcXVpcmVkJyB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHZhbGlkQ2F0ZWdvcmllcyA9IFsnY29sbGVnZScsICd0ZWNoJywgJ3RlY2gtZXZlbnRzJywgJ3RlY2gtd29ya3Nob3BzJywgJ290aGVyJ107XHJcbiAgaWYgKGRhdGEuY2F0ZWdvcnkgJiYgIXZhbGlkQ2F0ZWdvcmllcy5pbmNsdWRlcyhkYXRhLmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICBlcnJvcnMucHVzaCh7IGZpZWxkOiAnY2F0ZWdvcnknLCBtZXNzYWdlOiBgQ2F0ZWdvcnkgbXVzdCBiZSBvbmUgb2Y6ICR7dmFsaWRDYXRlZ29yaWVzLmpvaW4oJywgJyl9YCB9KTtcclxuICB9XHJcblxyXG4gIGlmIChkYXRhLmV4cGlyeV9kYXRlICYmICFpc1ZhbGlkRGF0ZShkYXRhLmV4cGlyeV9kYXRlKSkge1xyXG4gICAgZXJyb3JzLnB1c2goeyBmaWVsZDogJ2V4cGlyeV9kYXRlJywgbWVzc2FnZTogJ0V4cGlyeSBkYXRlIG11c3QgYmUgYSB2YWxpZCBkYXRlJyB9KTtcclxuICB9XHJcblxyXG4gIGlmIChkYXRhLnNjaGVkdWxlZF9hdCAmJiAhaXNWYWxpZERhdGUoZGF0YS5zY2hlZHVsZWRfYXQpKSB7XHJcbiAgICBlcnJvcnMucHVzaCh7IGZpZWxkOiAnc2NoZWR1bGVkX2F0JywgbWVzc2FnZTogJ1NjaGVkdWxlZCBkYXRlIG11c3QgYmUgYSB2YWxpZCBkYXRlJyB9KTtcclxuICB9XHJcblxyXG4gIGlmIChkYXRhLnJlbWluZGVyX3RpbWUgJiYgIWlzVmFsaWREYXRlKGRhdGEucmVtaW5kZXJfdGltZSkpIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICdyZW1pbmRlcl90aW1lJywgbWVzc2FnZTogJ1JlbWluZGVyIHRpbWUgbXVzdCBiZSBhIHZhbGlkIGRhdGUnIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRhdGEucHJpb3JpdHlfdW50aWwgJiYgIWlzVmFsaWREYXRlKGRhdGEucHJpb3JpdHlfdW50aWwpKSB7XHJcbiAgICBlcnJvcnMucHVzaCh7IGZpZWxkOiAncHJpb3JpdHlfdW50aWwnLCBtZXNzYWdlOiAnUHJpb3JpdHkgdW50aWwgbXVzdCBiZSBhIHZhbGlkIGRhdGUnIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRhdGEuZW1lcmdlbmN5X2V4cGlyZXNfYXQgJiYgIWlzVmFsaWREYXRlKGRhdGEuZW1lcmdlbmN5X2V4cGlyZXNfYXQpKSB7XHJcbiAgICBlcnJvcnMucHVzaCh7IGZpZWxkOiAnZW1lcmdlbmN5X2V4cGlyZXNfYXQnLCBtZXNzYWdlOiAnRW1lcmdlbmN5IGV4cGlyYXRpb24gdGltZSBtdXN0IGJlIGEgdmFsaWQgZGF0ZScgfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoZGF0YS5pc19hY3RpdmUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZGF0YS5pc19hY3RpdmUgIT09ICdib29sZWFuJykge1xyXG4gICAgZXJyb3JzLnB1c2goeyBmaWVsZDogJ2lzX2FjdGl2ZScsIG1lc3NhZ2U6ICdpc19hY3RpdmUgbXVzdCBiZSBhIGJvb2xlYW4nIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRhdGEuc3RhdHVzICYmIHR5cGVvZiBkYXRhLnN0YXR1cyAhPT0gJ3N0cmluZycpIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICdzdGF0dXMnLCBtZXNzYWdlOiAnU3RhdHVzIG11c3QgYmUgYSBzdHJpbmcnIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdmFsaWRTdGF0dXNlcyA9IFsnYWN0aXZlJywgJ3NjaGVkdWxlZCcsICdkcmFmdCcsICdhcmNoaXZlZCcsICd1cmdlbnQnXTtcclxuICBpZiAoZGF0YS5zdGF0dXMgJiYgIXZhbGlkU3RhdHVzZXMuaW5jbHVkZXMoZGF0YS5zdGF0dXMudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgIGVycm9ycy5wdXNoKHsgZmllbGQ6ICdzdGF0dXMnLCBtZXNzYWdlOiBgU3RhdHVzIG11c3QgYmUgb25lIG9mOiAke3ZhbGlkU3RhdHVzZXMuam9pbignLCAnKX1gIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVycm9ycztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IGVtYWlsUmVnZXggPSAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLztcclxuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNWYWxpZERhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xyXG4gIHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVc2VySWQoaWQ6IHVua25vd24pOiBpZCBpcyBudW1iZXIge1xyXG4gIHJldHVybiB0eXBlb2YgaWQgPT09ICdudW1iZXInICYmIE51bWJlci5pc0ludGVnZXIoaWQpICYmIGlkID4gMDtcclxufVxyXG4iXSwibmFtZXMiOlsiVmFsaWRhdGlvbkVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsImVycm9ycyIsIm5hbWUiLCJ2YWxpZGF0ZUFubm91bmNlbWVudCIsImRhdGEiLCJ0aXRsZSIsInRyaW0iLCJsZW5ndGgiLCJwdXNoIiwiZmllbGQiLCJtZXNzYWdlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInZhbGlkQ2F0ZWdvcmllcyIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJqb2luIiwiZXhwaXJ5X2RhdGUiLCJpc1ZhbGlkRGF0ZSIsInNjaGVkdWxlZF9hdCIsInJlbWluZGVyX3RpbWUiLCJwcmlvcml0eV91bnRpbCIsImVtZXJnZW5jeV9leHBpcmVzX2F0IiwiaXNfYWN0aXZlIiwidW5kZWZpbmVkIiwic3RhdHVzIiwidmFsaWRTdGF0dXNlcyIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwiZGF0ZVN0cmluZyIsImRhdGUiLCJEYXRlIiwiaXNOYU4iLCJnZXRUaW1lIiwidmFsaWRhdGVVc2VySWQiLCJpZCIsIk51bWJlciIsImlzSW50ZWdlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/validation.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@clerk","vendor-chunks/tslib","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/cookie","vendor-chunks/snakecase-keys","vendor-chunks/resend"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fannouncements%2Froute&page=%2Fapi%2Fannouncements%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fannouncements%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();