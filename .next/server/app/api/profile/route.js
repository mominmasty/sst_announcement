/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profile/route";
exports.ids = ["app/api/profile/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "drizzle-orm":
/*!******************************!*\
  !*** external "drizzle-orm" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm");;

/***/ }),

/***/ "drizzle-orm/node-postgres":
/*!********************************************!*\
  !*** external "drizzle-orm/node-postgres" ***!
  \********************************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm/node-postgres");;

/***/ }),

/***/ "drizzle-orm/pg-core":
/*!**************************************!*\
  !*** external "drizzle-orm/pg-core" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = import("drizzle-orm/pg-core");;

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Project_sst_announcement_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/profile/route.ts */ \"(rsc)/./app/api/profile/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([E_Project_sst_announcement_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nE_Project_sst_announcement_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profile/route\",\n        pathname: \"/api/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/profile/route\"\n    },\n    resolvedPagePath: \"E:\\\\Project\\\\sst_announcement\\\\app\\\\api\\\\profile\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Project_sst_announcement_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9maWxlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvZmlsZSUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUHJvamVjdCU1Q3NzdF9hbm5vdW5jZW1lbnQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUUlM0ElNUNQcm9qZWN0JTVDc3N0X2Fubm91bmNlbWVudCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDVTtBQUN2RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiRTpcXFxcUHJvamVjdFxcXFxzc3RfYW5ub3VuY2VtZW50XFxcXGFwcFxcXFxhcGlcXFxccHJvZmlsZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZmlsZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2ZpbGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2ZpbGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJFOlxcXFxQcm9qZWN0XFxcXHNzdF9hbm5vdW5jZW1lbnRcXFxcYXBwXFxcXGFwaVxcXFxwcm9maWxlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/profile/route.ts":
/*!**********************************!*\
  !*** ./app/api/profile/route.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/middleware/auth */ \"(rsc)/./lib/middleware/auth.ts\");\n/* harmony import */ var _lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/middleware/rateLimit */ \"(rsc)/./lib/middleware/rateLimit.ts\");\n/* harmony import */ var _lib_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils/roleUtils */ \"(rsc)/./lib/utils/roleUtils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nasync function GET(request) {\n    try {\n        await (0,_lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_2__.applyRateLimit)(request, _lib_middleware_rateLimit__WEBPACK_IMPORTED_MODULE_2__.generalLimiterOptions);\n        const user = await (0,_lib_middleware_auth__WEBPACK_IMPORTED_MODULE_1__.requireAuth)(request, {\n            enforceDomain: true\n        });\n        const role = (0,_lib_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                id: user.id,\n                email: user.email,\n                role,\n                google_id: user.google_id,\n                username: user.username,\n                is_admin: user.is_admin ?? (0,_lib_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.hasAdminAccess)(role),\n                created_at: user.created_at,\n                last_login: user.last_login\n            }\n        });\n    } catch (error) {\n        console.error('❌ Profile error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || 'Authentication required'\n        }, {\n            status: error.status || 401\n        });\n    }\n}\nasync function OPTIONS() {\n    return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200,\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET, OPTIONS',\n            'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2ZpbGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ0o7QUFDK0I7QUFDVDtBQUVuRSxlQUFlTSxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsTUFBTUwseUVBQWNBLENBQUNLLFNBQVNKLDRFQUFxQkE7UUFFbkQsTUFBTUssT0FBTyxNQUFNUCxpRUFBV0EsQ0FBQ00sU0FBUztZQUFFRSxlQUFlO1FBQUs7UUFDOUQsTUFBTUMsT0FBT04sdUVBQWlCQSxDQUFDSSxLQUFLRSxJQUFJLEVBQUVGLEtBQUtHLFFBQVE7UUFFdkQsT0FBT1gscURBQVlBLENBQUNZLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUQyxNQUFNO2dCQUNKQyxJQUFJUCxLQUFLTyxFQUFFO2dCQUNYQyxPQUFPUixLQUFLUSxLQUFLO2dCQUNqQk47Z0JBQ0FPLFdBQVdULEtBQUtTLFNBQVM7Z0JBQ3pCQyxVQUFVVixLQUFLVSxRQUFRO2dCQUN2QlAsVUFBVUgsS0FBS0csUUFBUSxJQUFJTixvRUFBY0EsQ0FBQ0s7Z0JBQzFDUyxZQUFZWCxLQUFLVyxVQUFVO2dCQUMzQkMsWUFBWVosS0FBS1ksVUFBVTtZQUM3QjtRQUNGO0lBRUYsRUFBRSxPQUFPQyxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsb0JBQW9CQTtRQUNsQyxPQUFPckIscURBQVlBLENBQUNZLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUUSxPQUFPQSxNQUFNRSxPQUFPLElBQUk7UUFDMUIsR0FDQTtZQUFFQyxRQUFRSCxNQUFNRyxNQUFNLElBQUk7UUFBSTtJQUVsQztBQUNGO0FBRU8sZUFBZUM7SUFDcEIsT0FBTyxJQUFJekIscURBQVlBLENBQUMsTUFBTTtRQUM1QndCLFFBQVE7UUFDUkUsU0FBUztZQUNQLCtCQUErQjtZQUMvQixnQ0FBZ0M7WUFDaEMsZ0NBQWdDO1FBQ2xDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGFwcFxcYXBpXFxwcm9maWxlXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyByZXF1aXJlQXV0aCB9IGZyb20gJ0AvbGliL21pZGRsZXdhcmUvYXV0aCc7XHJcbmltcG9ydCB7IGFwcGx5UmF0ZUxpbWl0LCBnZW5lcmFsTGltaXRlck9wdGlvbnMgfSBmcm9tICdAL2xpYi9taWRkbGV3YXJlL3JhdGVMaW1pdCc7XHJcbmltcG9ydCB7IG5vcm1hbGl6ZVVzZXJSb2xlLCBoYXNBZG1pbkFjY2VzcyB9IGZyb20gJ0AvbGliL3V0aWxzL3JvbGVVdGlscyc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGFwcGx5UmF0ZUxpbWl0KHJlcXVlc3QsIGdlbmVyYWxMaW1pdGVyT3B0aW9ucyk7XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlcXVpcmVBdXRoKHJlcXVlc3QsIHsgZW5mb3JjZURvbWFpbjogdHJ1ZSB9KTtcclxuICAgIGNvbnN0IHJvbGUgPSBub3JtYWxpemVVc2VyUm9sZSh1c2VyLnJvbGUsIHVzZXIuaXNfYWRtaW4pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICByb2xlLFxyXG4gICAgICAgIGdvb2dsZV9pZDogdXNlci5nb29nbGVfaWQsXHJcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgICAgaXNfYWRtaW46IHVzZXIuaXNfYWRtaW4gPz8gaGFzQWRtaW5BY2Nlc3Mocm9sZSksXHJcbiAgICAgICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkX2F0LFxyXG4gICAgICAgIGxhc3RfbG9naW46IHVzZXIubGFzdF9sb2dpbixcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgUHJvZmlsZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogZXJyb3Iuc3RhdHVzIHx8IDQwMSB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMoKSB7XHJcbiAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UobnVsbCwge1xyXG4gICAgc3RhdHVzOiAyMDAsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ0dFVCwgT1BUSU9OUycsXHJcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJzogJ0NvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvbicsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJyZXF1aXJlQXV0aCIsImFwcGx5UmF0ZUxpbWl0IiwiZ2VuZXJhbExpbWl0ZXJPcHRpb25zIiwibm9ybWFsaXplVXNlclJvbGUiLCJoYXNBZG1pbkFjY2VzcyIsIkdFVCIsInJlcXVlc3QiLCJ1c2VyIiwiZW5mb3JjZURvbWFpbiIsInJvbGUiLCJpc19hZG1pbiIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsImlkIiwiZW1haWwiLCJnb29nbGVfaWQiLCJ1c2VybmFtZSIsImNyZWF0ZWRfYXQiLCJsYXN0X2xvZ2luIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInN0YXR1cyIsIk9QVElPTlMiLCJoZWFkZXJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/profile/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/db.ts":
/*!**************************!*\
  !*** ./lib/config/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDb: () => (/* binding */ getDb),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   verifyConnection: () => (/* binding */ verifyConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/node-postgres */ \"drizzle-orm/node-postgres\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./env */ \"(rsc)/./lib/config/env.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_3__]);\n([pg__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst globalForDb = globalThis;\nfunction getPool() {\n    if (globalForDb.pool) {\n        return globalForDb.pool;\n    }\n    const env = (0,_env__WEBPACK_IMPORTED_MODULE_2__.validateEnv)();\n    const pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        connectionString: env.DATABASE_URL,\n        ssl: env.DATABASE_URL?.includes('localhost') ? undefined : {\n            rejectUnauthorized: false\n        }\n    });\n    globalForDb.pool = pool;\n    return pool;\n}\nfunction getDb() {\n    if (globalForDb.db) {\n        return globalForDb.db;\n    }\n    const pool = getPool();\n    const db = (0,drizzle_orm_node_postgres__WEBPACK_IMPORTED_MODULE_1__.drizzle)(pool, {\n        schema: _schema__WEBPACK_IMPORTED_MODULE_3__\n    });\n    globalForDb.db = db;\n    return db;\n}\nasync function verifyConnection() {\n    const pool = getPool();\n    await pool.query('SELECT 1');\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDMEI7QUFFaEI7QUFDQTtBQU9wQyxNQUFNSSxjQUFjQztBQUViLFNBQVNDO0lBQ2QsSUFBSUYsWUFBWUcsSUFBSSxFQUFFO1FBQ3BCLE9BQU9ILFlBQVlHLElBQUk7SUFDekI7SUFFQSxNQUFNQyxNQUFNTixpREFBV0E7SUFFdkIsTUFBTUssT0FBTyxJQUFJUCxvQ0FBSUEsQ0FBQztRQUNwQlMsa0JBQWtCRCxJQUFJRSxZQUFZO1FBQ2xDQyxLQUFLSCxJQUFJRSxZQUFZLEVBQUVFLFNBQVMsZUFBZUMsWUFBWTtZQUFFQyxvQkFBb0I7UUFBTTtJQUN6RjtJQUVBVixZQUFZRyxJQUFJLEdBQUdBO0lBQ25CLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTUTtJQUNkLElBQUlYLFlBQVlZLEVBQUUsRUFBRTtRQUNsQixPQUFPWixZQUFZWSxFQUFFO0lBQ3ZCO0lBRUEsTUFBTVQsT0FBT0Q7SUFDYixNQUFNVSxLQUFLZixrRUFBT0EsQ0FBQ00sTUFBTTtRQUFFSixNQUFNQSxzQ0FBQUE7SUFBQztJQUNsQ0MsWUFBWVksRUFBRSxHQUFHQTtJQUNqQixPQUFPQTtBQUNUO0FBRU8sZUFBZUM7SUFDcEIsTUFBTVYsT0FBT0Q7SUFDYixNQUFNQyxLQUFLVyxLQUFLLENBQUM7QUFDbkIiLCJzb3VyY2VzIjpbIkU6XFxQcm9qZWN0XFxzc3RfYW5ub3VuY2VtZW50XFxsaWJcXGNvbmZpZ1xcZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCB9IGZyb20gJ3BnJztcclxuaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL25vZGUtcG9zdGdyZXMnO1xyXG5pbXBvcnQgdHlwZSB7IE5vZGVQZ0RhdGFiYXNlIH0gZnJvbSAnZHJpenpsZS1vcm0vbm9kZS1wb3N0Z3Jlcyc7XHJcbmltcG9ydCB7IHZhbGlkYXRlRW52IH0gZnJvbSAnLi9lbnYnO1xyXG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi4vc2NoZW1hJztcclxuXHJcbmludGVyZmFjZSBHbG9iYWxEYiB7XHJcbiAgcG9vbD86IFBvb2w7XHJcbiAgZGI/OiBOb2RlUGdEYXRhYmFzZTx0eXBlb2Ygc2NoZW1hPjtcclxufVxyXG5cclxuY29uc3QgZ2xvYmFsRm9yRGIgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgR2xvYmFsRGI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbCgpOiBQb29sIHtcclxuICBpZiAoZ2xvYmFsRm9yRGIucG9vbCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbEZvckRiLnBvb2w7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlbnYgPSB2YWxpZGF0ZUVudigpO1xyXG5cclxuICBjb25zdCBwb29sID0gbmV3IFBvb2woe1xyXG4gICAgY29ubmVjdGlvblN0cmluZzogZW52LkRBVEFCQVNFX1VSTCxcclxuICAgIHNzbDogZW52LkRBVEFCQVNFX1VSTD8uaW5jbHVkZXMoJ2xvY2FsaG9zdCcpID8gdW5kZWZpbmVkIDogeyByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIH0sXHJcbiAgfSk7XHJcblxyXG4gIGdsb2JhbEZvckRiLnBvb2wgPSBwb29sO1xyXG4gIHJldHVybiBwb29sO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGIoKTogTm9kZVBnRGF0YWJhc2U8dHlwZW9mIHNjaGVtYT4ge1xyXG4gIGlmIChnbG9iYWxGb3JEYi5kYikge1xyXG4gICAgcmV0dXJuIGdsb2JhbEZvckRiLmRiO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woKTtcclxuICBjb25zdCBkYiA9IGRyaXp6bGUocG9vbCwgeyBzY2hlbWEgfSk7XHJcbiAgZ2xvYmFsRm9yRGIuZGIgPSBkYjtcclxuICByZXR1cm4gZGI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHBvb2wgPSBnZXRQb29sKCk7XHJcbiAgYXdhaXQgcG9vbC5xdWVyeSgnU0VMRUNUIDEnKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUG9vbCIsImRyaXp6bGUiLCJ2YWxpZGF0ZUVudiIsInNjaGVtYSIsImdsb2JhbEZvckRiIiwiZ2xvYmFsVGhpcyIsImdldFBvb2wiLCJwb29sIiwiZW52IiwiY29ubmVjdGlvblN0cmluZyIsIkRBVEFCQVNFX1VSTCIsInNzbCIsImluY2x1ZGVzIiwidW5kZWZpbmVkIiwicmVqZWN0VW5hdXRob3JpemVkIiwiZ2V0RGIiLCJkYiIsInZlcmlmeUNvbm5lY3Rpb24iLCJxdWVyeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config/env.ts":
/*!***************************!*\
  !*** ./lib/config/env.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvConfig: () => (/* binding */ getEnvConfig),\n/* harmony export */   getOptionalEnv: () => (/* binding */ getOptionalEnv),\n/* harmony export */   getRequiredEnv: () => (/* binding */ getRequiredEnv),\n/* harmony export */   validateEnv: () => (/* binding */ validateEnv)\n/* harmony export */ });\nconst requiredEnvVars = [\n    'DATABASE_URL',\n    'SESSION_SECRET',\n    'CLERK_SECRET_KEY'\n];\nconst optionalEnvVars = [\n    'JWT_SECRET',\n    'FRONTEND_URL',\n    'BACKEND_URL',\n    'GOOGLE_CLIENT_ID',\n    'GOOGLE_CLIENT_SECRET',\n    'GOOGLE_CALLBACK_URL',\n    'RESEND_API_KEY',\n    'RESEND_FROM_EMAIL',\n    'DEPLOYMENT',\n    'CRON_SECRET'\n];\nlet validated = false;\nfunction validateEnv() {\n    if (validated) {\n        return getEnvConfig();\n    }\n    const missing = [];\n    for (const key of requiredEnvVars){\n        if (!process.env[key]) {\n            missing.push(key);\n        }\n    }\n    if (missing.length > 0) {\n        const message = `Missing required environment variables: ${missing.join(', ')}`;\n        console.error('❌ Environment validation failed');\n        console.error(message);\n        throw new Error(message);\n    }\n    validated = true;\n    return getEnvConfig();\n}\nfunction getEnvConfig() {\n    return {\n        DATABASE_URL: \"postgresql://sst_database_user:zefoqA6HXo616kXZMyWl8BXlkQBPIqx2@dpg-d3t8nve3jp1c738js3l0-a.oregon-postgres.render.com/sst_database\",\n        SESSION_SECRET: \"testsessionsecret\",\n        CLERK_SECRET_KEY: \"sk_test_d5FnQ6CDfpTB1mKdjveMGUdiCVAfs3OdAg4XIH0ZCf\",\n        JWT_SECRET: \"devsecret123\",\n        FRONTEND_URL: \"http://localhost:3000\",\n        BACKEND_URL: process.env.BACKEND_URL,\n        GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n        GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n        GOOGLE_CALLBACK_URL: process.env.GOOGLE_CALLBACK_URL,\n        RESEND_API_KEY: \"re_2Kn711pT_CjTUiSrn7JXCoqV9hgXECpKc\",\n        RESEND_FROM_EMAIL: \"onboarding@resend.dev\",\n        DEPLOYMENT: \"local\",\n        CRON_SECRET: \"replace_me_with_random_string\"\n    };\n}\nfunction getRequiredEnv(key) {\n    validateEnv();\n    const value = process.env[key];\n    if (!value) {\n        throw new Error(`Environment variable ${key} is required`);\n    }\n    return value;\n}\nfunction getOptionalEnv(key, fallback) {\n    validateEnv();\n    const value = process.env[key];\n    if (!value) {\n        if (optionalEnvVars.includes(key) && fallback) {\n            return fallback;\n        }\n        return fallback;\n    }\n    return value;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtDQUNEO0FBRUQsTUFBTUMsa0JBQWtCO0lBQ3RCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCxJQUFJQyxZQUFZO0FBa0JULFNBQVNDO0lBQ2QsSUFBSUQsV0FBVztRQUNiLE9BQU9FO0lBQ1Q7SUFFQSxNQUFNQyxVQUFvQixFQUFFO0lBRTVCLEtBQUssTUFBTUMsT0FBT04sZ0JBQWlCO1FBQ2pDLElBQUksQ0FBQ08sUUFBUUMsR0FBRyxDQUFDRixJQUFJLEVBQUU7WUFDckJELFFBQVFJLElBQUksQ0FBQ0g7UUFDZjtJQUNGO0lBRUEsSUFBSUQsUUFBUUssTUFBTSxHQUFHLEdBQUc7UUFDdEIsTUFBTUMsVUFBVSxDQUFDLHdDQUF3QyxFQUFFTixRQUFRTyxJQUFJLENBQUMsT0FBTztRQUMvRUMsUUFBUUMsS0FBSyxDQUFDO1FBQ2RELFFBQVFDLEtBQUssQ0FBQ0g7UUFDZCxNQUFNLElBQUlJLE1BQU1KO0lBQ2xCO0lBRUFULFlBQVk7SUFDWixPQUFPRTtBQUNUO0FBRU8sU0FBU0E7SUFDZCxPQUFPO1FBQ0xZLGNBQWNULG9JQUF3QjtRQUN0Q1UsZ0JBQWdCVixtQkFBMEI7UUFDMUNXLGtCQUFrQlgsb0RBQTRCO1FBQzlDWSxZQUFZWixjQUFzQjtRQUNsQ2EsY0FBY2IsdUJBQXdCO1FBQ3RDYyxhQUFhZCxRQUFRQyxHQUFHLENBQUNhLFdBQVc7UUFDcENDLGtCQUFrQmYsUUFBUUMsR0FBRyxDQUFDYyxnQkFBZ0I7UUFDOUNDLHNCQUFzQmhCLFFBQVFDLEdBQUcsQ0FBQ2Usb0JBQW9CO1FBQ3REQyxxQkFBcUJqQixRQUFRQyxHQUFHLENBQUNnQixtQkFBbUI7UUFDcERDLGdCQUFnQmxCLHNDQUEwQjtRQUMxQ21CLG1CQUFtQm5CLHVCQUE2QjtRQUNoRG9CLFlBQVlwQixPQUFzQjtRQUNsQ3FCLGFBQWFyQiwrQkFBdUI7SUFDdEM7QUFDRjtBQUVPLFNBQVNzQixlQUFldkIsR0FBb0I7SUFDakRIO0lBQ0EsTUFBTTJCLFFBQVF2QixRQUFRQyxHQUFHLENBQUNGLElBQWM7SUFDeEMsSUFBSSxDQUFDd0IsT0FBTztRQUNWLE1BQU0sSUFBSWYsTUFBTSxDQUFDLHFCQUFxQixFQUFFVCxJQUFjLFlBQVksQ0FBQztJQUNyRTtJQUNBLE9BQU93QjtBQUNUO0FBRU8sU0FBU0MsZUFBZXpCLEdBQW9CLEVBQUUwQixRQUFpQjtJQUNwRTdCO0lBQ0EsTUFBTTJCLFFBQVF2QixRQUFRQyxHQUFHLENBQUNGLElBQWM7SUFDeEMsSUFBSSxDQUFDd0IsT0FBTztRQUNWLElBQUk3QixnQkFBZ0JnQyxRQUFRLENBQUMzQixRQUFrQjBCLFVBQVU7WUFDdkQsT0FBT0E7UUFDVDtRQUNBLE9BQU9BO0lBQ1Q7SUFDQSxPQUFPRjtBQUNUIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxjb25maWdcXGVudi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1aXJlZEVudlZhcnMgPSBbXHJcbiAgJ0RBVEFCQVNFX1VSTCcsXHJcbiAgJ1NFU1NJT05fU0VDUkVUJyxcclxuICAnQ0xFUktfU0VDUkVUX0tFWScsXHJcbl07XHJcblxyXG5jb25zdCBvcHRpb25hbEVudlZhcnMgPSBbXHJcbiAgJ0pXVF9TRUNSRVQnLFxyXG4gICdGUk9OVEVORF9VUkwnLFxyXG4gICdCQUNLRU5EX1VSTCcsXHJcbiAgJ0dPT0dMRV9DTElFTlRfSUQnLFxyXG4gICdHT09HTEVfQ0xJRU5UX1NFQ1JFVCcsXHJcbiAgJ0dPT0dMRV9DQUxMQkFDS19VUkwnLFxyXG4gICdSRVNFTkRfQVBJX0tFWScsXHJcbiAgJ1JFU0VORF9GUk9NX0VNQUlMJyxcclxuICAnREVQTE9ZTUVOVCcsXHJcbiAgJ0NST05fU0VDUkVUJyxcclxuXTtcclxuXHJcbmxldCB2YWxpZGF0ZWQgPSBmYWxzZTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW52Q29uZmlnIHtcclxuICBEQVRBQkFTRV9VUkw6IHN0cmluZztcclxuICBTRVNTSU9OX1NFQ1JFVDogc3RyaW5nO1xyXG4gIENMRVJLX1NFQ1JFVF9LRVk6IHN0cmluZztcclxuICBKV1RfU0VDUkVUPzogc3RyaW5nO1xyXG4gIEZST05URU5EX1VSTD86IHN0cmluZztcclxuICBCQUNLRU5EX1VSTD86IHN0cmluZztcclxuICBHT09HTEVfQ0xJRU5UX0lEPzogc3RyaW5nO1xyXG4gIEdPT0dMRV9DTElFTlRfU0VDUkVUPzogc3RyaW5nO1xyXG4gIEdPT0dMRV9DQUxMQkFDS19VUkw/OiBzdHJpbmc7XHJcbiAgUkVTRU5EX0FQSV9LRVk/OiBzdHJpbmc7XHJcbiAgUkVTRU5EX0ZST01fRU1BSUw/OiBzdHJpbmc7XHJcbiAgREVQTE9ZTUVOVD86IHN0cmluZztcclxuICBDUk9OX1NFQ1JFVD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW52KCk6IEVudkNvbmZpZyB7XHJcbiAgaWYgKHZhbGlkYXRlZCkge1xyXG4gICAgcmV0dXJuIGdldEVudkNvbmZpZygpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBrZXkgb2YgcmVxdWlyZWRFbnZWYXJzKSB7XHJcbiAgICBpZiAoIXByb2Nlc3MuZW52W2tleV0pIHtcclxuICAgICAgbWlzc2luZy5wdXNoKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzOiAke21pc3Npbmcuam9pbignLCAnKX1gO1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVudmlyb25tZW50IHZhbGlkYXRpb24gZmFpbGVkJyk7XHJcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgdmFsaWRhdGVkID0gdHJ1ZTtcclxuICByZXR1cm4gZ2V0RW52Q29uZmlnKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZDb25maWcoKTogRW52Q29uZmlnIHtcclxuICByZXR1cm4ge1xyXG4gICAgREFUQUJBU0VfVVJMOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwhLFxyXG4gICAgU0VTU0lPTl9TRUNSRVQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUISxcclxuICAgIENMRVJLX1NFQ1JFVF9LRVk6IHByb2Nlc3MuZW52LkNMRVJLX1NFQ1JFVF9LRVkhLFxyXG4gICAgSldUX1NFQ1JFVDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcclxuICAgIEZST05URU5EX1VSTDogcHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMLFxyXG4gICAgQkFDS0VORF9VUkw6IHByb2Nlc3MuZW52LkJBQ0tFTkRfVVJMLFxyXG4gICAgR09PR0xFX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcclxuICAgIEdPT0dMRV9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIEdPT0dMRV9DQUxMQkFDS19VUkw6IHByb2Nlc3MuZW52LkdPT0dMRV9DQUxMQkFDS19VUkwsXHJcbiAgICBSRVNFTkRfQVBJX0tFWTogcHJvY2Vzcy5lbnYuUkVTRU5EX0FQSV9LRVksXHJcbiAgICBSRVNFTkRfRlJPTV9FTUFJTDogcHJvY2Vzcy5lbnYuUkVTRU5EX0ZST01fRU1BSUwsXHJcbiAgICBERVBMT1lNRU5UOiBwcm9jZXNzLmVudi5ERVBMT1lNRU5ULFxyXG4gICAgQ1JPTl9TRUNSRVQ6IHByb2Nlc3MuZW52LkNST05fU0VDUkVULFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1aXJlZEVudihrZXk6IGtleW9mIEVudkNvbmZpZyk6IHN0cmluZyB7XHJcbiAgdmFsaWRhdGVFbnYoKTtcclxuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleSBhcyBzdHJpbmddO1xyXG4gIGlmICghdmFsdWUpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtrZXkgYXMgc3RyaW5nfSBpcyByZXF1aXJlZGApO1xyXG4gIH1cclxuICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25hbEVudihrZXk6IGtleW9mIEVudkNvbmZpZywgZmFsbGJhY2s/OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIHZhbGlkYXRlRW52KCk7XHJcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltrZXkgYXMgc3RyaW5nXTtcclxuICBpZiAoIXZhbHVlKSB7XHJcbiAgICBpZiAob3B0aW9uYWxFbnZWYXJzLmluY2x1ZGVzKGtleSBhcyBzdHJpbmcpICYmIGZhbGxiYWNrKSB7XHJcbiAgICAgIHJldHVybiBmYWxsYmFjaztcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxsYmFjaztcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJyZXF1aXJlZEVudlZhcnMiLCJvcHRpb25hbEVudlZhcnMiLCJ2YWxpZGF0ZWQiLCJ2YWxpZGF0ZUVudiIsImdldEVudkNvbmZpZyIsIm1pc3NpbmciLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwicHVzaCIsImxlbmd0aCIsIm1lc3NhZ2UiLCJqb2luIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJEQVRBQkFTRV9VUkwiLCJTRVNTSU9OX1NFQ1JFVCIsIkNMRVJLX1NFQ1JFVF9LRVkiLCJKV1RfU0VDUkVUIiwiRlJPTlRFTkRfVVJMIiwiQkFDS0VORF9VUkwiLCJHT09HTEVfQ0xJRU5UX0lEIiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJHT09HTEVfQ0FMTEJBQ0tfVVJMIiwiUkVTRU5EX0FQSV9LRVkiLCJSRVNFTkRfRlJPTV9FTUFJTCIsIkRFUExPWU1FTlQiLCJDUk9OX1NFQ1JFVCIsImdldFJlcXVpcmVkRW52IiwidmFsdWUiLCJnZXRPcHRpb25hbEVudiIsImZhbGxiYWNrIiwiaW5jbHVkZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/config/env.ts\n");

/***/ }),

/***/ "(rsc)/./lib/data/users.ts":
/*!***************************!*\
  !*** ./lib/data/users.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findOrCreateUser: () => (/* binding */ findOrCreateUser),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   mapUser: () => (/* binding */ mapUser),\n/* harmony export */   updateUserAdminStatus: () => (/* binding */ updateUserAdminStatus),\n/* harmony export */   updateUserEmail: () => (/* binding */ updateUserEmail),\n/* harmony export */   updateUserRole: () => (/* binding */ updateUserRole)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__]);\n([drizzle_orm__WEBPACK_IMPORTED_MODULE_0__, _config_db__WEBPACK_IMPORTED_MODULE_1__, _schema__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nasync function findOrCreateUser(clerkId, email, displayName) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const existingUser = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.clerkId, clerkId)).limit(1);\n    if (existingUser.length > 0) {\n        const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n            lastLogin: new Date()\n        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, existingUser[0].id)).returning();\n        return mapUser(updatedUser);\n    }\n    const [newUser] = await db.insert(_schema__WEBPACK_IMPORTED_MODULE_2__.users).values({\n        clerkId,\n        email,\n        username: displayName || null,\n        role: 'user',\n        lastLogin: new Date()\n    }).returning();\n    return mapUser(newUser);\n}\nasync function updateUserEmail(userId, newEmail) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n        email: newEmail\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).returning();\n    if (!updatedUser) {\n        throw new Error('User not found');\n    }\n    return mapUser(updatedUser);\n}\nasync function getUserById(userId) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [user] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).limit(1);\n    return user ? mapUser(user) : null;\n}\nasync function getAllUsers() {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const result = await db.select({\n        id: _schema__WEBPACK_IMPORTED_MODULE_2__.users.id,\n        clerkId: _schema__WEBPACK_IMPORTED_MODULE_2__.users.clerkId,\n        email: _schema__WEBPACK_IMPORTED_MODULE_2__.users.email,\n        username: _schema__WEBPACK_IMPORTED_MODULE_2__.users.username,\n        role: _schema__WEBPACK_IMPORTED_MODULE_2__.users.role,\n        createdAt: _schema__WEBPACK_IMPORTED_MODULE_2__.users.createdAt,\n        lastLogin: _schema__WEBPACK_IMPORTED_MODULE_2__.users.lastLogin\n    }).from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.desc)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.createdAt));\n    return result.map((user)=>({\n            id: user.id,\n            clerk_id: user.clerkId,\n            email: user.email,\n            username: user.username,\n            role: user.role || 'student',\n            is_admin: user.role === 'admin' || user.role === 'super_admin' || user.role === 'student_admin',\n            created_at: user.createdAt,\n            last_login: user.lastLogin\n        }));\n}\nasync function updateUserAdminStatus(userId, isAdmin) {\n    const role = isAdmin ? 'admin' : 'student';\n    return updateUserRole(userId, role);\n}\nasync function updateUserRole(userId, role) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [updatedUser] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_2__.users).set({\n        role\n    }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.id, userId)).returning();\n    if (!updatedUser) {\n        throw new Error('User not found');\n    }\n    return mapUser(updatedUser);\n}\nasync function getUserByEmail(email) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_1__.getDb)();\n    const [user] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_2__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_0__.eq)(_schema__WEBPACK_IMPORTED_MODULE_2__.users.email, email)).limit(1);\n    return user ? mapUser(user) : null;\n}\nfunction mapUser(user) {\n    const role = user.role || 'user';\n    return {\n        id: user.id,\n        clerk_id: user.clerkId,\n        email: user.email,\n        username: user.username,\n        role,\n        is_admin: role === 'admin' || role === 'super_admin' || role === 'student_admin',\n        created_at: user.createdAt,\n        last_login: user.lastLogin\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUTtRQUN2QkM7UUFDQWEsVUFBVWIsU0FBUyxXQUFXQSxTQUFTLGlCQUFpQkEsU0FBUztRQUNqRWMsWUFBWVIsS0FBS0csU0FBUztRQUMxQk0sWUFBWVQsS0FBS2YsU0FBUztJQUM1QjtBQUNGIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxkYXRhXFx1c2Vycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlcSB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZGVzYyB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2V0RGIgfSBmcm9tICcuLi9jb25maWcvZGInO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4uL3NjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgVXNlclJvbGUgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZE9yQ3JlYXRlVXNlcihjbGVya0lkOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGRpc3BsYXlOYW1lPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGIgPSBnZXREYigpO1xyXG4gIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKGVxKHVzZXJzLmNsZXJrSWQsIGNsZXJrSWQpKS5saW1pdCgxKTtcclxuXHJcbiAgaWYgKGV4aXN0aW5nVXNlci5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBbdXBkYXRlZFVzZXJdID0gYXdhaXQgZGJcclxuICAgICAgLnVwZGF0ZSh1c2VycylcclxuICAgICAgLnNldCh7IGxhc3RMb2dpbjogbmV3IERhdGUoKSB9KVxyXG4gICAgICAud2hlcmUoZXEodXNlcnMuaWQsIGV4aXN0aW5nVXNlclswXS5pZCEpKVxyXG4gICAgICAucmV0dXJuaW5nKCk7XHJcbiAgICByZXR1cm4gbWFwVXNlcih1cGRhdGVkVXNlcik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBbbmV3VXNlcl0gPSBhd2FpdCBkYlxyXG4gICAgLmluc2VydCh1c2VycylcclxuICAgIC52YWx1ZXMoe1xyXG4gICAgICBjbGVya0lkLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgdXNlcm5hbWU6IGRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgbGFzdExvZ2luOiBuZXcgRGF0ZSgpLFxyXG4gICAgfSlcclxuICAgIC5yZXR1cm5pbmcoKTtcclxuXHJcbiAgcmV0dXJuIG1hcFVzZXIobmV3VXNlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyRW1haWwodXNlcklkOiBudW1iZXIsIG5ld0VtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgY29uc3QgW3VwZGF0ZWRVc2VyXSA9IGF3YWl0IGRiXHJcbiAgICAudXBkYXRlKHVzZXJzKVxyXG4gICAgLnNldCh7IGVtYWlsOiBuZXdFbWFpbCB9KVxyXG4gICAgLndoZXJlKGVxKHVzZXJzLmlkLCB1c2VySWQpKVxyXG4gICAgLnJldHVybmluZygpO1xyXG5cclxuICBpZiAoIXVwZGF0ZWRVc2VyKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWFwVXNlcih1cGRhdGVkVXNlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZCh1c2VySWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCBbdXNlcl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pZCwgdXNlcklkKSkubGltaXQoMSk7XHJcbiAgcmV0dXJuIHVzZXIgPyBtYXBVc2VyKHVzZXIpIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgLnNlbGVjdCh7XHJcbiAgICAgIGlkOiB1c2Vycy5pZCxcclxuICAgICAgY2xlcmtJZDogdXNlcnMuY2xlcmtJZCxcclxuICAgICAgZW1haWw6IHVzZXJzLmVtYWlsLFxyXG4gICAgICB1c2VybmFtZTogdXNlcnMudXNlcm5hbWUsXHJcbiAgICAgIHJvbGU6IHVzZXJzLnJvbGUsXHJcbiAgICAgIGNyZWF0ZWRBdDogdXNlcnMuY3JlYXRlZEF0LFxyXG4gICAgICBsYXN0TG9naW46IHVzZXJzLmxhc3RMb2dpbixcclxuICAgIH0pXHJcbiAgICAuZnJvbSh1c2VycylcclxuICAgIC5vcmRlckJ5KGRlc2ModXNlcnMuY3JlYXRlZEF0KSk7XHJcblxyXG4gIHJldHVybiByZXN1bHQubWFwKCh1c2VyKTogYW55ID0+ICh7XHJcbiAgICBpZDogdXNlci5pZCxcclxuICAgIGNsZXJrX2lkOiB1c2VyLmNsZXJrSWQsXHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgcm9sZTogKHVzZXIgYXMgYW55KS5yb2xlIHx8ICdzdHVkZW50JyxcclxuICAgIGlzX2FkbWluOiAodXNlciBhcyBhbnkpLnJvbGUgPT09ICdhZG1pbicgfHwgKHVzZXIgYXMgYW55KS5yb2xlID09PSAnc3VwZXJfYWRtaW4nIHx8ICh1c2VyIGFzIGFueSkucm9sZSA9PT0gJ3N0dWRlbnRfYWRtaW4nLFxyXG4gICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkQXQsXHJcbiAgICBsYXN0X2xvZ2luOiB1c2VyLmxhc3RMb2dpbixcclxuICB9KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyQWRtaW5TdGF0dXModXNlcklkOiBudW1iZXIsIGlzQWRtaW46IGJvb2xlYW4pIHtcclxuICBjb25zdCByb2xlOiBVc2VyUm9sZSA9IGlzQWRtaW4gPyAnYWRtaW4nIDogJ3N0dWRlbnQnO1xyXG4gIHJldHVybiB1cGRhdGVVc2VyUm9sZSh1c2VySWQsIHJvbGUpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclJvbGUodXNlcklkOiBudW1iZXIsIHJvbGU6IFVzZXJSb2xlKSB7XHJcbiAgY29uc3QgZGIgPSBnZXREYigpO1xyXG4gIGNvbnN0IFt1cGRhdGVkVXNlcl0gPSBhd2FpdCBkYlxyXG4gICAgLnVwZGF0ZSh1c2VycylcclxuICAgIC5zZXQoeyByb2xlIH0pXHJcbiAgICAud2hlcmUoZXEodXNlcnMuaWQsIHVzZXJJZCkpXHJcbiAgICAucmV0dXJuaW5nKCk7XHJcblxyXG4gIGlmICghdXBkYXRlZFVzZXIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXBVc2VyKHVwZGF0ZWRVc2VyKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCBkYiA9IGdldERiKCk7XHJcbiAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuZW1haWwsIGVtYWlsKSkubGltaXQoMSk7XHJcbiAgcmV0dXJuIHVzZXIgPyBtYXBVc2VyKHVzZXIpIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcFVzZXIodXNlcjogdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdCkge1xyXG4gIGNvbnN0IHJvbGUgPSAodXNlciBhcyBhbnkpLnJvbGUgfHwgJ3VzZXInO1xyXG4gIHJldHVybiB7XHJcbiAgICBpZDogdXNlci5pZCxcclxuICAgIGNsZXJrX2lkOiB1c2VyLmNsZXJrSWQsXHJcbiAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgcm9sZSxcclxuICAgIGlzX2FkbWluOiByb2xlID09PSAnYWRtaW4nIHx8IHJvbGUgPT09ICdzdXBlcl9hZG1pbicgfHwgcm9sZSA9PT0gJ3N0dWRlbnRfYWRtaW4nLFxyXG4gICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkQXQsXHJcbiAgICBsYXN0X2xvZ2luOiB1c2VyLmxhc3RMb2dpbixcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJlcSIsImRlc2MiLCJnZXREYiIsInVzZXJzIiwiZmluZE9yQ3JlYXRlVXNlciIsImNsZXJrSWQiLCJlbWFpbCIsImRpc3BsYXlOYW1lIiwiZGIiLCJleGlzdGluZ1VzZXIiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJsaW1pdCIsImxlbmd0aCIsInVwZGF0ZWRVc2VyIiwidXBkYXRlIiwic2V0IiwibGFzdExvZ2luIiwiRGF0ZSIsImlkIiwicmV0dXJuaW5nIiwibWFwVXNlciIsIm5ld1VzZXIiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJ1c2VybmFtZSIsInJvbGUiLCJ1cGRhdGVVc2VyRW1haWwiLCJ1c2VySWQiLCJuZXdFbWFpbCIsIkVycm9yIiwiZ2V0VXNlckJ5SWQiLCJ1c2VyIiwiZ2V0QWxsVXNlcnMiLCJyZXN1bHQiLCJjcmVhdGVkQXQiLCJvcmRlckJ5IiwibWFwIiwiY2xlcmtfaWQiLCJpc19hZG1pbiIsImNyZWF0ZWRfYXQiLCJsYXN0X2xvZ2luIiwidXBkYXRlVXNlckFkbWluU3RhdHVzIiwiaXNBZG1pbiIsInVwZGF0ZVVzZXJSb2xlIiwiZ2V0VXNlckJ5RW1haWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/data/users.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/auth.ts":
/*!********************************!*\
  !*** ./lib/middleware/auth.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractBearerToken: () => (/* binding */ extractBearerToken),\n/* harmony export */   getUserFromRequest: () => (/* binding */ getUserFromRequest),\n/* harmony export */   hasAdminAccess: () => (/* binding */ hasAdminAccess),\n/* harmony export */   hasAnnouncementPriority: () => (/* binding */ hasAnnouncementPriority),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   requireStudentAdmin: () => (/* binding */ requireStudentAdmin),\n/* harmony export */   requireSuperAdmin: () => (/* binding */ requireSuperAdmin)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n/* harmony import */ var _domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./domain */ \"(rsc)/./lib/middleware/domain.ts\");\n/* harmony import */ var _services_clerk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/clerk */ \"(rsc)/./lib/services/clerk.ts\");\n/* harmony import */ var _utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/roleUtils */ \"(rsc)/./lib/utils/roleUtils.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_clerk__WEBPACK_IMPORTED_MODULE_2__]);\n_services_clerk__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nfunction extractBearerToken(request) {\n    const authHeader = request.headers.get('authorization');\n    if (!authHeader) {\n        return null;\n    }\n    if (authHeader.startsWith('Bearer ')) {\n        return authHeader.substring(7);\n    }\n    return null;\n}\nfunction extractSessionCookie(request) {\n    const sessionCookie = request.cookies.get('__session');\n    return sessionCookie?.value || null;\n}\nasync function getUserFromRequest(request) {\n    const token = extractBearerToken(request) ?? extractSessionCookie(request);\n    if (!token) {\n        return null;\n    }\n    const claims = await (0,_services_clerk__WEBPACK_IMPORTED_MODULE_2__.verifyClerkToken)(token);\n    if (!claims) {\n        return null;\n    }\n    const user = await (0,_services_clerk__WEBPACK_IMPORTED_MODULE_2__.syncClerkUser)(claims);\n    return user;\n}\nasync function requireAuth(request, options) {\n    const user = await getUserFromRequest(request);\n    if (!user) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError('Authentication required');\n    }\n    if (options?.enforceDomain) {\n        (0,_domain__WEBPACK_IMPORTED_MODULE_1__.requireAllowedDomain)(user);\n    }\n    return user;\n}\nfunction requireRole(user, role) {\n    const hierarchy = {\n        student: 1,\n        student_admin: 2,\n        admin: 2,\n        super_admin: 3\n    };\n    // Normalize the user's role to handle old formats\n    const normalizedUserRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    const userRoleLevel = hierarchy[normalizedUserRole] ?? 1;\n    if (userRoleLevel < hierarchy[role]) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError(`This resource requires ${role} role or higher`);\n    }\n}\n/**\r\n * Check if user has admin-level access (student_admin, admin, or super_admin)\r\n */ function hasAdminAccess(user) {\n    const normalizedRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    return [\n        'student_admin',\n        'admin',\n        'super_admin'\n    ].includes(normalizedRole);\n}\n/**\r\n * Check if user has announcement priority over another role\r\n */ function hasAnnouncementPriority(user, targetRole) {\n    const announcementPriority = {\n        student: 1,\n        student_admin: 2,\n        admin: 3,\n        super_admin: 4\n    };\n    const normalizedUserRole = (0,_utils_roleUtils__WEBPACK_IMPORTED_MODULE_3__.normalizeUserRole)(user.role, user.is_admin);\n    const userPriority = announcementPriority[normalizedUserRole] ?? 1;\n    const targetPriority = announcementPriority[targetRole] ?? 1;\n    return userPriority > targetPriority;\n}\nfunction requireAdmin(user) {\n    if (!hasAdminAccess(user)) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('This resource requires admin access');\n    }\n}\n/**\r\n * Require student admin level or higher (student_admin, admin, super_admin)\r\n */ function requireStudentAdmin(user) {\n    requireRole(user, 'student_admin');\n}\nfunction requireSuperAdmin(user) {\n    requireRole(user, 'super_admin');\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIkU6XFxQcm9qZWN0XFxzc3RfYW5ub3VuY2VtZW50XFxsaWJcXG1pZGRsZXdhcmVcXGF1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIsIFVzZXJSb2xlIH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnO1xyXG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciwgVW5hdXRob3JpemVkRXJyb3IgfSBmcm9tICcuLi91dGlscy9lcnJvcnMnO1xyXG5pbXBvcnQgeyByZXF1aXJlQWxsb3dlZERvbWFpbiB9IGZyb20gJy4vZG9tYWluJztcclxuaW1wb3J0IHsgc3luY0NsZXJrVXNlciwgdmVyaWZ5Q2xlcmtUb2tlbiB9IGZyb20gJy4uL3NlcnZpY2VzL2NsZXJrJztcclxuaW1wb3J0IHsgbm9ybWFsaXplVXNlclJvbGUgfSBmcm9tICcuLi91dGlscy9yb2xlVXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RCZWFyZXJUb2tlbihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGlmIChhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgcmV0dXJuIGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0cmFjdFNlc3Npb25Db29raWUocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBzZXNzaW9uQ29va2llID0gcmVxdWVzdC5jb29raWVzLmdldCgnX19zZXNzaW9uJyk7XHJcbiAgcmV0dXJuIHNlc3Npb25Db29raWU/LnZhbHVlIHx8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcXVlc3QocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPEF1dGhlbnRpY2F0ZWRVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IHRva2VuID0gZXh0cmFjdEJlYXJlclRva2VuKHJlcXVlc3QpID8/IGV4dHJhY3RTZXNzaW9uQ29va2llKHJlcXVlc3QpO1xyXG4gIFxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY2xhaW1zID0gYXdhaXQgdmVyaWZ5Q2xlcmtUb2tlbih0b2tlbik7XHJcbiAgXHJcbiAgaWYgKCFjbGFpbXMpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHN5bmNDbGVya1VzZXIoY2xhaW1zKTtcclxuICBcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBvcHRpb25zPzogeyBlbmZvcmNlRG9tYWluPzogYm9vbGVhbiB9KTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVJlcXVlc3QocmVxdWVzdCk7XHJcbiAgaWYgKCF1c2VyKSB7XHJcbiAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyk7XHJcbiAgfVxyXG5cclxuICBpZiAob3B0aW9ucz8uZW5mb3JjZURvbWFpbikge1xyXG4gICAgcmVxdWlyZUFsbG93ZWREb21haW4odXNlcik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSb2xlKHVzZXI6IEF1dGhlbnRpY2F0ZWRVc2VyLCByb2xlOiBVc2VyUm9sZSk6IHZvaWQge1xyXG4gIGNvbnN0IGhpZXJhcmNoeTogUmVjb3JkPFVzZXJSb2xlLCBudW1iZXI+ID0ge1xyXG4gICAgc3R1ZGVudDogMSxcclxuICAgIHN0dWRlbnRfYWRtaW46IDIsICAvLyBTYW1lIGFjY2VzcyBsZXZlbCBhcyBhZG1pblxyXG4gICAgYWRtaW46IDIsICAgICAgICAgIC8vIFNhbWUgYWNjZXNzIGxldmVsIGFzIHN0dWRlbnRfYWRtaW5cclxuICAgIHN1cGVyX2FkbWluOiAzLFxyXG4gIH07XHJcblxyXG4gIC8vIE5vcm1hbGl6ZSB0aGUgdXNlcidzIHJvbGUgdG8gaGFuZGxlIG9sZCBmb3JtYXRzXHJcbiAgY29uc3Qgbm9ybWFsaXplZFVzZXJSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICBjb25zdCB1c2VyUm9sZUxldmVsID0gaGllcmFyY2h5W25vcm1hbGl6ZWRVc2VyUm9sZV0gPz8gMTtcclxuICBpZiAodXNlclJvbGVMZXZlbCA8IGhpZXJhcmNoeVtyb2xlXSkge1xyXG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKGBUaGlzIHJlc291cmNlIHJlcXVpcmVzICR7cm9sZX0gcm9sZSBvciBoaWdoZXJgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB1c2VyIGhhcyBhZG1pbi1sZXZlbCBhY2Nlc3MgKHN0dWRlbnRfYWRtaW4sIGFkbWluLCBvciBzdXBlcl9hZG1pbilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBZG1pbkFjY2Vzcyh1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWRSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICByZXR1cm4gWydzdHVkZW50X2FkbWluJywgJ2FkbWluJywgJ3N1cGVyX2FkbWluJ10uaW5jbHVkZXMobm9ybWFsaXplZFJvbGUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBoYXMgYW5ub3VuY2VtZW50IHByaW9yaXR5IG92ZXIgYW5vdGhlciByb2xlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaGFzQW5ub3VuY2VtZW50UHJpb3JpdHkodXNlcjogQXV0aGVudGljYXRlZFVzZXIsIHRhcmdldFJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgYW5ub3VuY2VtZW50UHJpb3JpdHk6IFJlY29yZDxVc2VyUm9sZSwgbnVtYmVyPiA9IHtcclxuICAgIHN0dWRlbnQ6IDEsXHJcbiAgICBzdHVkZW50X2FkbWluOiAyLFxyXG4gICAgYWRtaW46IDMsICAgICAgICAgIC8vIEhpZ2hlciBwcmlvcml0eSB0aGFuIHN0dWRlbnRfYWRtaW5cclxuICAgIHN1cGVyX2FkbWluOiA0LFxyXG4gIH07XHJcbiAgXHJcbiAgY29uc3Qgbm9ybWFsaXplZFVzZXJSb2xlID0gbm9ybWFsaXplVXNlclJvbGUodXNlci5yb2xlLCAodXNlciBhcyBhbnkpLmlzX2FkbWluKTtcclxuICBjb25zdCB1c2VyUHJpb3JpdHkgPSBhbm5vdW5jZW1lbnRQcmlvcml0eVtub3JtYWxpemVkVXNlclJvbGVdID8/IDE7XHJcbiAgY29uc3QgdGFyZ2V0UHJpb3JpdHkgPSBhbm5vdW5jZW1lbnRQcmlvcml0eVt0YXJnZXRSb2xlXSA/PyAxO1xyXG4gIHJldHVybiB1c2VyUHJpb3JpdHkgPiB0YXJnZXRQcmlvcml0eTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIGlmICghaGFzQWRtaW5BY2Nlc3ModXNlcikpIHtcclxuICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcignVGhpcyByZXNvdXJjZSByZXF1aXJlcyBhZG1pbiBhY2Nlc3MnKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXF1aXJlIHN0dWRlbnQgYWRtaW4gbGV2ZWwgb3IgaGlnaGVyIChzdHVkZW50X2FkbWluLCBhZG1pbiwgc3VwZXJfYWRtaW4pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZVN0dWRlbnRBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIHJlcXVpcmVSb2xlKHVzZXIsICdzdHVkZW50X2FkbWluJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlU3VwZXJBZG1pbih1c2VyOiBBdXRoZW50aWNhdGVkVXNlcik6IHZvaWQge1xyXG4gIHJlcXVpcmVSb2xlKHVzZXIsICdzdXBlcl9hZG1pbicpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JiaWRkZW5FcnJvciIsIlVuYXV0aG9yaXplZEVycm9yIiwicmVxdWlyZUFsbG93ZWREb21haW4iLCJzeW5jQ2xlcmtVc2VyIiwidmVyaWZ5Q2xlcmtUb2tlbiIsIm5vcm1hbGl6ZVVzZXJSb2xlIiwiZXh0cmFjdEJlYXJlclRva2VuIiwicmVxdWVzdCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImV4dHJhY3RTZXNzaW9uQ29va2llIiwic2Vzc2lvbkNvb2tpZSIsImNvb2tpZXMiLCJ2YWx1ZSIsImdldFVzZXJGcm9tUmVxdWVzdCIsInRva2VuIiwiY2xhaW1zIiwidXNlciIsInJlcXVpcmVBdXRoIiwib3B0aW9ucyIsImVuZm9yY2VEb21haW4iLCJyZXF1aXJlUm9sZSIsInJvbGUiLCJoaWVyYXJjaHkiLCJzdHVkZW50Iiwic3R1ZGVudF9hZG1pbiIsImFkbWluIiwic3VwZXJfYWRtaW4iLCJub3JtYWxpemVkVXNlclJvbGUiLCJpc19hZG1pbiIsInVzZXJSb2xlTGV2ZWwiLCJoYXNBZG1pbkFjY2VzcyIsIm5vcm1hbGl6ZWRSb2xlIiwiaW5jbHVkZXMiLCJoYXNBbm5vdW5jZW1lbnRQcmlvcml0eSIsInRhcmdldFJvbGUiLCJhbm5vdW5jZW1lbnRQcmlvcml0eSIsInVzZXJQcmlvcml0eSIsInRhcmdldFByaW9yaXR5IiwicmVxdWlyZUFkbWluIiwicmVxdWlyZVN0dWRlbnRBZG1pbiIsInJlcXVpcmVTdXBlckFkbWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/domain.ts":
/*!**********************************!*\
  !*** ./lib/middleware/domain.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEmailDomain: () => (/* binding */ getEmailDomain),\n/* harmony export */   isAllowedDomain: () => (/* binding */ isAllowedDomain),\n/* harmony export */   requireAllowedDomain: () => (/* binding */ requireAllowedDomain)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n\nconst ALLOWED_DOMAINS = [\n    'scaler.com',\n    'sst.scaler.com'\n];\nfunction getEmailDomain(email) {\n    if (!email || typeof email !== 'string') {\n        return null;\n    }\n    const parts = email.split('@');\n    if (parts.length !== 2) {\n        return null;\n    }\n    return parts[1].toLowerCase();\n}\nfunction isAllowedDomain(email) {\n    const domain = getEmailDomain(email);\n    return domain ? ALLOWED_DOMAINS.includes(domain) : false;\n}\nfunction requireAllowedDomain(user) {\n    if (!user) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError('Authentication required');\n    }\n    if (!user.email) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Invalid user');\n    }\n    if (!isAllowedDomain(user.email)) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Domain access restricted');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS9kb21haW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNvRTtBQUVwRSxNQUFNRSxrQkFBa0I7SUFBQztJQUFjO0NBQWlCO0FBRWpELFNBQVNDLGVBQWVDLEtBQWE7SUFDMUMsSUFBSSxDQUFDQSxTQUFTLE9BQU9BLFVBQVUsVUFBVTtRQUN2QyxPQUFPO0lBQ1Q7SUFDQSxNQUFNQyxRQUFRRCxNQUFNRSxLQUFLLENBQUM7SUFDMUIsSUFBSUQsTUFBTUUsTUFBTSxLQUFLLEdBQUc7UUFDdEIsT0FBTztJQUNUO0lBQ0EsT0FBT0YsS0FBSyxDQUFDLEVBQUUsQ0FBQ0csV0FBVztBQUM3QjtBQUVPLFNBQVNDLGdCQUFnQkwsS0FBYTtJQUMzQyxNQUFNTSxTQUFTUCxlQUFlQztJQUM5QixPQUFPTSxTQUFTUixnQkFBZ0JTLFFBQVEsQ0FBQ0QsVUFBVTtBQUNyRDtBQUVPLFNBQVNFLHFCQUFxQkMsSUFBMEM7SUFDN0UsSUFBSSxDQUFDQSxNQUFNO1FBQ1QsTUFBTSxJQUFJWiw0REFBaUJBLENBQUM7SUFDOUI7SUFFQSxJQUFJLENBQUNZLEtBQUtULEtBQUssRUFBRTtRQUNmLE1BQU0sSUFBSUoseURBQWNBLENBQUM7SUFDM0I7SUFFQSxJQUFJLENBQUNTLGdCQUFnQkksS0FBS1QsS0FBSyxHQUFHO1FBQ2hDLE1BQU0sSUFBSUoseURBQWNBLENBQUM7SUFDM0I7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcbWlkZGxld2FyZVxcZG9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcbmltcG9ydCB7IEZvcmJpZGRlbkVycm9yLCBVbmF1dGhvcml6ZWRFcnJvciB9IGZyb20gJy4uL3V0aWxzL2Vycm9ycyc7XHJcblxyXG5jb25zdCBBTExPV0VEX0RPTUFJTlMgPSBbJ3NjYWxlci5jb20nLCAnc3N0LnNjYWxlci5jb20nXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbWFpbERvbWFpbihlbWFpbDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgaWYgKCFlbWFpbCB8fCB0eXBlb2YgZW1haWwgIT09ICdzdHJpbmcnKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgY29uc3QgcGFydHMgPSBlbWFpbC5zcGxpdCgnQCcpO1xyXG4gIGlmIChwYXJ0cy5sZW5ndGggIT09IDIpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICByZXR1cm4gcGFydHNbMV0udG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWxsb3dlZERvbWFpbihlbWFpbDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgZG9tYWluID0gZ2V0RW1haWxEb21haW4oZW1haWwpO1xyXG4gIHJldHVybiBkb21haW4gPyBBTExPV0VEX0RPTUFJTlMuaW5jbHVkZXMoZG9tYWluKSA6IGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUFsbG93ZWREb21haW4odXNlcjogQXV0aGVudGljYXRlZFVzZXIgfCBudWxsIHwgdW5kZWZpbmVkKTogYXNzZXJ0cyB1c2VyIGlzIEF1dGhlbnRpY2F0ZWRVc2VyIHtcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcclxuICB9XHJcblxyXG4gIGlmICghdXNlci5lbWFpbCkge1xyXG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKCdJbnZhbGlkIHVzZXInKTtcclxuICB9XHJcblxyXG4gIGlmICghaXNBbGxvd2VkRG9tYWluKHVzZXIuZW1haWwpKSB7XHJcbiAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoJ0RvbWFpbiBhY2Nlc3MgcmVzdHJpY3RlZCcpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9yYmlkZGVuRXJyb3IiLCJVbmF1dGhvcml6ZWRFcnJvciIsIkFMTE9XRURfRE9NQUlOUyIsImdldEVtYWlsRG9tYWluIiwiZW1haWwiLCJwYXJ0cyIsInNwbGl0IiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJpc0FsbG93ZWREb21haW4iLCJkb21haW4iLCJpbmNsdWRlcyIsInJlcXVpcmVBbGxvd2VkRG9tYWluIiwidXNlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/domain.ts\n");

/***/ }),

/***/ "(rsc)/./lib/middleware/rateLimit.ts":
/*!*************************************!*\
  !*** ./lib/middleware/rateLimit.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminLimiterOptions: () => (/* binding */ adminLimiterOptions),\n/* harmony export */   applyRateLimit: () => (/* binding */ applyRateLimit),\n/* harmony export */   authLimiterOptions: () => (/* binding */ authLimiterOptions),\n/* harmony export */   generalLimiterOptions: () => (/* binding */ generalLimiterOptions),\n/* harmony export */   strictLimiterOptions: () => (/* binding */ strictLimiterOptions)\n/* harmony export */ });\n/* harmony import */ var _utils_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors */ \"(rsc)/./lib/utils/errors.ts\");\n\nconst limiterStore = new Map();\nfunction getClientIp(request) {\n    // Try to get IP from various headers\n    const forwarded = request.headers.get('x-forwarded-for');\n    if (forwarded) {\n        return forwarded.split(',')[0]?.trim() || 'unknown';\n    }\n    const realIp = request.headers.get('x-real-ip');\n    if (realIp) {\n        return realIp;\n    }\n    // Fallback to request IP (available in Edge Runtime)\n    return request.ip || 'unknown';\n}\nasync function applyRateLimit(request, options) {\n    const ip = getClientIp(request);\n    const key = `${options.keyPrefix}:${ip}`;\n    const now = Date.now();\n    const existing = limiterStore.get(key);\n    if (!existing || existing.expiresAt < now) {\n        limiterStore.set(key, {\n            count: 1,\n            expiresAt: now + options.windowMs\n        });\n        return;\n    }\n    if (existing.count >= options.max) {\n        throw new _utils_errors__WEBPACK_IMPORTED_MODULE_0__.ForbiddenError('Too many requests, please try again later.');\n    }\n    existing.count += 1;\n    limiterStore.set(key, existing);\n}\nconst generalLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 100,\n    keyPrefix: 'general'\n};\nconst authLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 25,\n    keyPrefix: 'auth'\n};\nconst adminLimiterOptions = {\n    windowMs: 15 * 60 * 1000,\n    max: 200,\n    keyPrefix: 'admin'\n};\nconst strictLimiterOptions = {\n    windowMs: 60 * 60 * 1000,\n    max: 3,\n    keyPrefix: 'strict'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWlkZGxld2FyZS9yYXRlTGltaXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ2lEO0FBYWpELE1BQU1DLGVBQWUsSUFBSUM7QUFFekIsU0FBU0MsWUFBWUMsT0FBb0I7SUFDdkMscUNBQXFDO0lBQ3JDLE1BQU1DLFlBQVlELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLElBQUlGLFdBQVc7UUFDYixPQUFPQSxVQUFVRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRUMsVUFBVTtJQUM1QztJQUVBLE1BQU1DLFNBQVNOLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ25DLElBQUlHLFFBQVE7UUFDVixPQUFPQTtJQUNUO0lBRUEscURBQXFEO0lBQ3JELE9BQU8sUUFBaUJDLEVBQUUsSUFBSTtBQUNoQztBQUVPLGVBQWVDLGVBQWVSLE9BQW9CLEVBQUVTLE9BQXlCO0lBQ2xGLE1BQU1GLEtBQUtSLFlBQVlDO0lBQ3ZCLE1BQU1VLE1BQU0sR0FBR0QsUUFBUUUsU0FBUyxDQUFDLENBQUMsRUFBRUosSUFBSTtJQUN4QyxNQUFNSyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLFdBQVdqQixhQUFhTSxHQUFHLENBQUNPO0lBRWxDLElBQUksQ0FBQ0ksWUFBWUEsU0FBU0MsU0FBUyxHQUFHSCxLQUFLO1FBQ3pDZixhQUFhbUIsR0FBRyxDQUFDTixLQUFLO1lBQUVPLE9BQU87WUFBR0YsV0FBV0gsTUFBTUgsUUFBUVMsUUFBUTtRQUFDO1FBQ3BFO0lBQ0Y7SUFFQSxJQUFJSixTQUFTRyxLQUFLLElBQUlSLFFBQVFVLEdBQUcsRUFBRTtRQUNqQyxNQUFNLElBQUl2Qix5REFBY0EsQ0FBQztJQUMzQjtJQUVBa0IsU0FBU0csS0FBSyxJQUFJO0lBQ2xCcEIsYUFBYW1CLEdBQUcsQ0FBQ04sS0FBS0k7QUFDeEI7QUFFTyxNQUFNTSx3QkFBMEM7SUFDckRGLFVBQVUsS0FBSyxLQUFLO0lBQ3BCQyxLQUFLO0lBQ0xSLFdBQVc7QUFDYixFQUFFO0FBRUssTUFBTVUscUJBQXVDO0lBQ2xESCxVQUFVLEtBQUssS0FBSztJQUNwQkMsS0FBSztJQUNMUixXQUFXO0FBQ2IsRUFBRTtBQUVLLE1BQU1XLHNCQUF3QztJQUNuREosVUFBVSxLQUFLLEtBQUs7SUFDcEJDLEtBQUs7SUFDTFIsV0FBVztBQUNiLEVBQUU7QUFFSyxNQUFNWSx1QkFBeUM7SUFDcERMLFVBQVUsS0FBSyxLQUFLO0lBQ3BCQyxLQUFLO0lBQ0xSLFdBQVc7QUFDYixFQUFFIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxtaWRkbGV3YXJlXFxyYXRlTGltaXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IEZvcmJpZGRlbkVycm9yIH0gZnJvbSAnLi4vdXRpbHMvZXJyb3JzJztcclxuXHJcbmludGVyZmFjZSBSYXRlTGltaXRPcHRpb25zIHtcclxuICB3aW5kb3dNczogbnVtYmVyO1xyXG4gIG1heDogbnVtYmVyO1xyXG4gIGtleVByZWZpeDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmF0ZUxpbWl0U3RhdGUge1xyXG4gIGNvdW50OiBudW1iZXI7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn1cclxuXHJcbmNvbnN0IGxpbWl0ZXJTdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBSYXRlTGltaXRTdGF0ZT4oKTtcclxuXHJcbmZ1bmN0aW9uIGdldENsaWVudElwKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHtcclxuICAvLyBUcnkgdG8gZ2V0IElQIGZyb20gdmFyaW91cyBoZWFkZXJzXHJcbiAgY29uc3QgZm9yd2FyZGVkID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJyk7XHJcbiAgaWYgKGZvcndhcmRlZCkge1xyXG4gICAgcmV0dXJuIGZvcndhcmRlZC5zcGxpdCgnLCcpWzBdPy50cmltKCkgfHwgJ3Vua25vd24nO1xyXG4gIH1cclxuICBcclxuICBjb25zdCByZWFsSXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKTtcclxuICBpZiAocmVhbElwKSB7XHJcbiAgICByZXR1cm4gcmVhbElwO1xyXG4gIH1cclxuICBcclxuICAvLyBGYWxsYmFjayB0byByZXF1ZXN0IElQIChhdmFpbGFibGUgaW4gRWRnZSBSdW50aW1lKVxyXG4gIHJldHVybiAocmVxdWVzdCBhcyBhbnkpLmlwIHx8ICd1bmtub3duJztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGx5UmF0ZUxpbWl0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCBvcHRpb25zOiBSYXRlTGltaXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgaXAgPSBnZXRDbGllbnRJcChyZXF1ZXN0KTtcclxuICBjb25zdCBrZXkgPSBgJHtvcHRpb25zLmtleVByZWZpeH06JHtpcH1gO1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgY29uc3QgZXhpc3RpbmcgPSBsaW1pdGVyU3RvcmUuZ2V0KGtleSk7XHJcblxyXG4gIGlmICghZXhpc3RpbmcgfHwgZXhpc3RpbmcuZXhwaXJlc0F0IDwgbm93KSB7XHJcbiAgICBsaW1pdGVyU3RvcmUuc2V0KGtleSwgeyBjb3VudDogMSwgZXhwaXJlc0F0OiBub3cgKyBvcHRpb25zLndpbmRvd01zIH0pO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaWYgKGV4aXN0aW5nLmNvdW50ID49IG9wdGlvbnMubWF4KSB7XHJcbiAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoJ1RvbyBtYW55IHJlcXVlc3RzLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicpO1xyXG4gIH1cclxuXHJcbiAgZXhpc3RpbmcuY291bnQgKz0gMTtcclxuICBsaW1pdGVyU3RvcmUuc2V0KGtleSwgZXhpc3RpbmcpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2VuZXJhbExpbWl0ZXJPcHRpb25zOiBSYXRlTGltaXRPcHRpb25zID0ge1xyXG4gIHdpbmRvd01zOiAxNSAqIDYwICogMTAwMCxcclxuICBtYXg6IDEwMCxcclxuICBrZXlQcmVmaXg6ICdnZW5lcmFsJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoTGltaXRlck9wdGlvbnM6IFJhdGVMaW1pdE9wdGlvbnMgPSB7XHJcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLFxyXG4gIG1heDogMjUsXHJcbiAga2V5UHJlZml4OiAnYXV0aCcsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRtaW5MaW1pdGVyT3B0aW9uczogUmF0ZUxpbWl0T3B0aW9ucyA9IHtcclxuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsXHJcbiAgbWF4OiAyMDAsXHJcbiAga2V5UHJlZml4OiAnYWRtaW4nLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmljdExpbWl0ZXJPcHRpb25zOiBSYXRlTGltaXRPcHRpb25zID0ge1xyXG4gIHdpbmRvd01zOiA2MCAqIDYwICogMTAwMCxcclxuICBtYXg6IDMsXHJcbiAga2V5UHJlZml4OiAnc3RyaWN0JyxcclxufTtcclxuIl0sIm5hbWVzIjpbIkZvcmJpZGRlbkVycm9yIiwibGltaXRlclN0b3JlIiwiTWFwIiwiZ2V0Q2xpZW50SXAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImdldCIsInNwbGl0IiwidHJpbSIsInJlYWxJcCIsImlwIiwiYXBwbHlSYXRlTGltaXQiLCJvcHRpb25zIiwia2V5Iiwia2V5UHJlZml4Iiwibm93IiwiRGF0ZSIsImV4aXN0aW5nIiwiZXhwaXJlc0F0Iiwic2V0IiwiY291bnQiLCJ3aW5kb3dNcyIsIm1heCIsImdlbmVyYWxMaW1pdGVyT3B0aW9ucyIsImF1dGhMaW1pdGVyT3B0aW9ucyIsImFkbWluTGltaXRlck9wdGlvbnMiLCJzdHJpY3RMaW1pdGVyT3B0aW9ucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/middleware/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schema.ts":
/*!***********************!*\
  !*** ./lib/schema.ts ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   announcementComments: () => (/* binding */ announcementComments),\n/* harmony export */   announcementCommentsRelations: () => (/* binding */ announcementCommentsRelations),\n/* harmony export */   announcementEngagements: () => (/* binding */ announcementEngagements),\n/* harmony export */   announcementEngagementsRelations: () => (/* binding */ announcementEngagementsRelations),\n/* harmony export */   announcementStatusEnum: () => (/* binding */ announcementStatusEnum),\n/* harmony export */   announcements: () => (/* binding */ announcements),\n/* harmony export */   announcementsRelations: () => (/* binding */ announcementsRelations),\n/* harmony export */   eventTypeEnum: () => (/* binding */ eventTypeEnum),\n/* harmony export */   userRoleEnum: () => (/* binding */ userRoleEnum),\n/* harmony export */   users: () => (/* binding */ users),\n/* harmony export */   usersRelations: () => (/* binding */ usersRelations)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"drizzle-orm/pg-core\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm__WEBPACK_IMPORTED_MODULE_1__]);\n([drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__, drizzle_orm__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst userRoleEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('user_role', [\n    'student',\n    'student_admin',\n    'admin',\n    'super_admin',\n    'user'\n]);\nconst eventTypeEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('event_type', [\n    'view',\n    'click',\n    'dismiss'\n]);\n// Enum for announcement status\nconst announcementStatusEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgEnum)('announcement_status', [\n    'draft',\n    'under_review',\n    'approved',\n    'rejected',\n    'scheduled',\n    'active',\n    'urgent',\n    'expired'\n]);\n// Users table\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('users', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    clerkId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('clerk_id').notNull().unique(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('email').notNull().unique(),\n    username: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('username', {\n        length: 100\n    }),\n    role: userRoleEnum('role').default('student').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow(),\n    lastLogin: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('last_login', {\n        withTimezone: true\n    })\n});\nconst announcements = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcements', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('title', {\n        length: 255\n    }).notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('description').notNull(),\n    category: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.varchar)('category', {\n        length: 100\n    }).notNull(),\n    authorId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('author_id').references(()=>users.id, {\n        onDelete: 'set null'\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('updated_at', {\n        withTimezone: true\n    }),\n    expiryDate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('expiry_date', {\n        withTimezone: true\n    }),\n    scheduledAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('scheduled_at', {\n        withTimezone: true\n    }),\n    reminderTime: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('reminder_time', {\n        withTimezone: true\n    }),\n    isActive: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('is_active').default(true),\n    status: announcementStatusEnum('status').default('draft').notNull(),\n    viewsCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('views_count').default(0),\n    clicksCount: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('clicks_count').default(0),\n    sendEmail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('send_email').default(false),\n    emailSent: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('email_sent').default(false),\n    priorityUntil: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('priority_until', {\n        withTimezone: true\n    }),\n    isEmergency: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.boolean)('is_emergency').default(false).notNull(),\n    emergencyExpiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('emergency_expires_at', {\n        withTimezone: true\n    }),\n    visibleAfter: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('visible_after', {\n        withTimezone: true\n    })\n});\nconst announcementEngagements = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcement_engagements', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    announcementId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('announcement_id').notNull().references(()=>announcements.id, {\n        onDelete: 'cascade'\n    }),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('user_id').references(()=>users.id, {\n        onDelete: 'set null'\n    }),\n    eventType: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('event_type').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow()\n});\n// Announcement comments table\nconst announcementComments = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('announcement_comments', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.serial)('id').primaryKey(),\n    announcementId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('announcement_id').notNull().references(()=>announcements.id, {\n        onDelete: 'cascade'\n    }),\n    authorId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('author_id').notNull().references(()=>users.id, {\n        onDelete: 'cascade'\n    }),\n    targetAdminId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.integer)('target_admin_id').notNull().references(()=>users.id, {\n        onDelete: 'cascade'\n    }),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.text)('content').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.timestamp)('created_at', {\n        withTimezone: true\n    }).defaultNow().notNull()\n});\n// Relations (optional, for easier joins)\nconst usersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(users, ({ many })=>({\n        announcements: many(announcements),\n        engagements: many(announcementEngagements)\n    }));\nconst announcementsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcements, ({ one, many })=>({\n        author: one(users, {\n            fields: [\n                announcements.authorId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        engagements: many(announcementEngagements)\n    }));\nconst announcementEngagementsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcementEngagements, ({ one })=>({\n        announcement: one(announcements, {\n            fields: [\n                announcementEngagements.announcementId\n            ],\n            references: [\n                announcements.id\n            ]\n        }),\n        user: one(users, {\n            fields: [\n                announcementEngagements.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst announcementCommentsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.relations)(announcementComments, ({ one })=>({\n        announcement: one(announcements, {\n            fields: [\n                announcementComments.announcementId\n            ],\n            references: [\n                announcements.id\n            ]\n        }),\n        author: one(users, {\n            fields: [\n                announcementComments.authorId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        targetAdmin: one(users, {\n            fields: [\n                announcementComments.targetAdminId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBQztZQUM1Q3JCLFlBQVk7Z0JBQUNwQixNQUFNQyxFQUFFO2FBQUM7UUFDeEI7SUFDRixJQUFJIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxzY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGdUYWJsZSwgc2VyaWFsLCB0ZXh0LCB2YXJjaGFyLCBib29sZWFuLCBpbnRlZ2VyLCB0aW1lc3RhbXAsIHBnRW51bSB9IGZyb20gJ2RyaXp6bGUtb3JtL3BnLWNvcmUnO1xyXG5pbXBvcnQgeyByZWxhdGlvbnMgfSBmcm9tICdkcml6emxlLW9ybSc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlclJvbGVFbnVtID0gcGdFbnVtKCd1c2VyX3JvbGUnLCBbJ3N0dWRlbnQnLCAnc3R1ZGVudF9hZG1pbicsICdhZG1pbicsICdzdXBlcl9hZG1pbicsICd1c2VyJ10pO1xyXG5leHBvcnQgY29uc3QgZXZlbnRUeXBlRW51bSA9IHBnRW51bSgnZXZlbnRfdHlwZScsIFsndmlldycsICdjbGljaycsICdkaXNtaXNzJ10pO1xyXG5cclxuLy8gRW51bSBmb3IgYW5ub3VuY2VtZW50IHN0YXR1c1xyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50U3RhdHVzRW51bSA9IHBnRW51bSgnYW5ub3VuY2VtZW50X3N0YXR1cycsIFtcclxuICAnZHJhZnQnLFxyXG4gICd1bmRlcl9yZXZpZXcnLFxyXG4gICdhcHByb3ZlZCcsXHJcbiAgJ3JlamVjdGVkJyxcclxuICAnc2NoZWR1bGVkJyxcclxuICAnYWN0aXZlJyxcclxuICAndXJnZW50JyxcclxuICAnZXhwaXJlZCdcclxuXSk7XHJcblxyXG4vLyBVc2VycyB0YWJsZVxyXG5leHBvcnQgY29uc3QgdXNlcnMgPSBwZ1RhYmxlKCd1c2VycycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBjbGVya0lkOiB0ZXh0KCdjbGVya19pZCcpLm5vdE51bGwoKS51bmlxdWUoKSxcclxuICBlbWFpbDogdGV4dCgnZW1haWwnKS5ub3ROdWxsKCkudW5pcXVlKCksXHJcbiAgdXNlcm5hbWU6IHZhcmNoYXIoJ3VzZXJuYW1lJywgeyBsZW5ndGg6IDEwMCB9KSxcclxuICByb2xlOiB1c2VyUm9sZUVudW0oJ3JvbGUnKS5kZWZhdWx0KCdzdHVkZW50Jykubm90TnVsbCgpLFxyXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSkuZGVmYXVsdE5vdygpLFxyXG4gIGxhc3RMb2dpbjogdGltZXN0YW1wKCdsYXN0X2xvZ2luJywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFubm91bmNlbWVudHMgPSBwZ1RhYmxlKCdhbm5vdW5jZW1lbnRzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIHRpdGxlOiB2YXJjaGFyKCd0aXRsZScsIHsgbGVuZ3RoOiAyNTUgfSkubm90TnVsbCgpLFxyXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLm5vdE51bGwoKSxcclxuICBjYXRlZ29yeTogdmFyY2hhcignY2F0ZWdvcnknLCB7IGxlbmd0aDogMTAwIH0pLm5vdE51bGwoKSxcclxuICBhdXRob3JJZDogaW50ZWdlcignYXV0aG9yX2lkJykucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ3NldCBudWxsJyB9KSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKSxcclxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIGV4cGlyeURhdGU6IHRpbWVzdGFtcCgnZXhwaXJ5X2RhdGUnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICBzY2hlZHVsZWRBdDogdGltZXN0YW1wKCdzY2hlZHVsZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICByZW1pbmRlclRpbWU6IHRpbWVzdGFtcCgncmVtaW5kZXJfdGltZScsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIGlzQWN0aXZlOiBib29sZWFuKCdpc19hY3RpdmUnKS5kZWZhdWx0KHRydWUpLFxyXG4gIHN0YXR1czogYW5ub3VuY2VtZW50U3RhdHVzRW51bSgnc3RhdHVzJykuZGVmYXVsdCgnZHJhZnQnKS5ub3ROdWxsKCksXHJcbiAgdmlld3NDb3VudDogaW50ZWdlcigndmlld3NfY291bnQnKS5kZWZhdWx0KDApLFxyXG4gIGNsaWNrc0NvdW50OiBpbnRlZ2VyKCdjbGlja3NfY291bnQnKS5kZWZhdWx0KDApLFxyXG4gIHNlbmRFbWFpbDogYm9vbGVhbignc2VuZF9lbWFpbCcpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGVtYWlsU2VudDogYm9vbGVhbignZW1haWxfc2VudCcpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIHByaW9yaXR5VW50aWw6IHRpbWVzdGFtcCgncHJpb3JpdHlfdW50aWwnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KSxcclxuICBpc0VtZXJnZW5jeTogYm9vbGVhbignaXNfZW1lcmdlbmN5JykuZGVmYXVsdChmYWxzZSkubm90TnVsbCgpLFxyXG4gIGVtZXJnZW5jeUV4cGlyZXNBdDogdGltZXN0YW1wKCdlbWVyZ2VuY3lfZXhwaXJlc19hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLFxyXG4gIHZpc2libGVBZnRlcjogdGltZXN0YW1wKCd2aXNpYmxlX2FmdGVyJywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFubm91bmNlbWVudEVuZ2FnZW1lbnRzID0gcGdUYWJsZSgnYW5ub3VuY2VtZW50X2VuZ2FnZW1lbnRzJywge1xyXG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxyXG4gIGFubm91bmNlbWVudElkOiBpbnRlZ2VyKCdhbm5vdW5jZW1lbnRfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBhbm5vdW5jZW1lbnRzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgdXNlcklkOiBpbnRlZ2VyKCd1c2VyX2lkJykucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ3NldCBudWxsJyB9KSxcclxuICBldmVudFR5cGU6IHRleHQoJ2V2ZW50X3R5cGUnKS5ub3ROdWxsKCksXHJcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KS5kZWZhdWx0Tm93KCksXHJcbn0pO1xyXG5cclxuLy8gQW5ub3VuY2VtZW50IGNvbW1lbnRzIHRhYmxlXHJcbmV4cG9ydCBjb25zdCBhbm5vdW5jZW1lbnRDb21tZW50cyA9IHBnVGFibGUoJ2Fubm91bmNlbWVudF9jb21tZW50cycsIHtcclxuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcclxuICBhbm5vdW5jZW1lbnRJZDogaW50ZWdlcignYW5ub3VuY2VtZW50X2lkJykubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gYW5ub3VuY2VtZW50cy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIGF1dGhvcklkOiBpbnRlZ2VyKCdhdXRob3JfaWQnKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogJ2Nhc2NhZGUnIH0pLFxyXG4gIHRhcmdldEFkbWluSWQ6IGludGVnZXIoJ3RhcmdldF9hZG1pbl9pZCcpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiAnY2FzY2FkZScgfSksXHJcbiAgY29udGVudDogdGV4dCgnY29udGVudCcpLm5vdE51bGwoKSxcclxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXHJcbn0pO1xyXG5cclxuLy8gUmVsYXRpb25zIChvcHRpb25hbCwgZm9yIGVhc2llciBqb2lucylcclxuZXhwb3J0IGNvbnN0IHVzZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKHVzZXJzLCAoeyBtYW55IH0pID0+ICh7XHJcbiAgYW5ub3VuY2VtZW50czogbWFueShhbm5vdW5jZW1lbnRzKSxcclxuICBlbmdhZ2VtZW50czogbWFueShhbm5vdW5jZW1lbnRFbmdhZ2VtZW50cyksXHJcbn0pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhbm5vdW5jZW1lbnRzUmVsYXRpb25zID0gcmVsYXRpb25zKGFubm91bmNlbWVudHMsICh7IG9uZSwgbWFueSB9KSA9PiAoe1xyXG4gIGF1dGhvcjogb25lKHVzZXJzLCB7XHJcbiAgICBmaWVsZHM6IFthbm5vdW5jZW1lbnRzLmF1dGhvcklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgfSksXHJcbiAgZW5nYWdlbWVudHM6IG1hbnkoYW5ub3VuY2VtZW50RW5nYWdlbWVudHMpLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50RW5nYWdlbWVudHNSZWxhdGlvbnMgPSByZWxhdGlvbnMoYW5ub3VuY2VtZW50RW5nYWdlbWVudHMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIGFubm91bmNlbWVudDogb25lKGFubm91bmNlbWVudHMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudEVuZ2FnZW1lbnRzLmFubm91bmNlbWVudElkXSxcclxuICAgIHJlZmVyZW5jZXM6IFthbm5vdW5jZW1lbnRzLmlkXSxcclxuICB9KSxcclxuICB1c2VyOiBvbmUodXNlcnMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudEVuZ2FnZW1lbnRzLnVzZXJJZF0sXHJcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxyXG4gIH0pLFxyXG59KSk7XHJcblxyXG5leHBvcnQgY29uc3QgYW5ub3VuY2VtZW50Q29tbWVudHNSZWxhdGlvbnMgPSByZWxhdGlvbnMoYW5ub3VuY2VtZW50Q29tbWVudHMsICh7IG9uZSB9KSA9PiAoe1xyXG4gIGFubm91bmNlbWVudDogb25lKGFubm91bmNlbWVudHMsIHtcclxuICAgIGZpZWxkczogW2Fubm91bmNlbWVudENvbW1lbnRzLmFubm91bmNlbWVudElkXSxcclxuICAgIHJlZmVyZW5jZXM6IFthbm5vdW5jZW1lbnRzLmlkXSxcclxuICB9KSxcclxuICBhdXRob3I6IG9uZSh1c2Vycywge1xyXG4gICAgZmllbGRzOiBbYW5ub3VuY2VtZW50Q29tbWVudHMuYXV0aG9ySWRdLFxyXG4gICAgcmVmZXJlbmNlczogW3VzZXJzLmlkXSxcclxuICB9KSxcclxuICB0YXJnZXRBZG1pbjogb25lKHVzZXJzLCB7XHJcbiAgICBmaWVsZHM6IFthbm5vdW5jZW1lbnRDb21tZW50cy50YXJnZXRBZG1pbklkXSxcclxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXHJcbiAgfSksXHJcbn0pKTtcclxuXHJcbi8vIFR5cGUgZXhwb3J0cyBmb3IgVHlwZVNjcmlwdFxyXG5leHBvcnQgdHlwZSBVc2VyID0gdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3VXNlciA9IHR5cGVvZiB1c2Vycy4kaW5mZXJJbnNlcnQ7XHJcbmV4cG9ydCB0eXBlIEFubm91bmNlbWVudCA9IHR5cGVvZiBhbm5vdW5jZW1lbnRzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3QW5ub3VuY2VtZW50ID0gdHlwZW9mIGFubm91bmNlbWVudHMuJGluZmVySW5zZXJ0O1xyXG5leHBvcnQgdHlwZSBBbm5vdW5jZW1lbnRFbmdhZ2VtZW50ID0gdHlwZW9mIGFubm91bmNlbWVudEVuZ2FnZW1lbnRzLiRpbmZlclNlbGVjdDtcclxuZXhwb3J0IHR5cGUgTmV3QW5ub3VuY2VtZW50RW5nYWdlbWVudCA9IHR5cGVvZiBhbm5vdW5jZW1lbnRFbmdhZ2VtZW50cy4kaW5mZXJJbnNlcnQ7XHJcbmV4cG9ydCB0eXBlIEFubm91bmNlbWVudENvbW1lbnQgPSB0eXBlb2YgYW5ub3VuY2VtZW50Q29tbWVudHMuJGluZmVyU2VsZWN0O1xyXG5leHBvcnQgdHlwZSBOZXdBbm5vdW5jZW1lbnRDb21tZW50ID0gdHlwZW9mIGFubm91bmNlbWVudENvbW1lbnRzLiRpbmZlckluc2VydDtcclxuIl0sIm5hbWVzIjpbInBnVGFibGUiLCJzZXJpYWwiLCJ0ZXh0IiwidmFyY2hhciIsImJvb2xlYW4iLCJpbnRlZ2VyIiwidGltZXN0YW1wIiwicGdFbnVtIiwicmVsYXRpb25zIiwidXNlclJvbGVFbnVtIiwiZXZlbnRUeXBlRW51bSIsImFubm91bmNlbWVudFN0YXR1c0VudW0iLCJ1c2VycyIsImlkIiwicHJpbWFyeUtleSIsImNsZXJrSWQiLCJub3ROdWxsIiwidW5pcXVlIiwiZW1haWwiLCJ1c2VybmFtZSIsImxlbmd0aCIsInJvbGUiLCJkZWZhdWx0IiwiY3JlYXRlZEF0Iiwid2l0aFRpbWV6b25lIiwiZGVmYXVsdE5vdyIsImxhc3RMb2dpbiIsImFubm91bmNlbWVudHMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJhdXRob3JJZCIsInJlZmVyZW5jZXMiLCJvbkRlbGV0ZSIsInVwZGF0ZWRBdCIsImV4cGlyeURhdGUiLCJzY2hlZHVsZWRBdCIsInJlbWluZGVyVGltZSIsImlzQWN0aXZlIiwic3RhdHVzIiwidmlld3NDb3VudCIsImNsaWNrc0NvdW50Iiwic2VuZEVtYWlsIiwiZW1haWxTZW50IiwicHJpb3JpdHlVbnRpbCIsImlzRW1lcmdlbmN5IiwiZW1lcmdlbmN5RXhwaXJlc0F0IiwidmlzaWJsZUFmdGVyIiwiYW5ub3VuY2VtZW50RW5nYWdlbWVudHMiLCJhbm5vdW5jZW1lbnRJZCIsInVzZXJJZCIsImV2ZW50VHlwZSIsImFubm91bmNlbWVudENvbW1lbnRzIiwidGFyZ2V0QWRtaW5JZCIsImNvbnRlbnQiLCJ1c2Vyc1JlbGF0aW9ucyIsIm1hbnkiLCJlbmdhZ2VtZW50cyIsImFubm91bmNlbWVudHNSZWxhdGlvbnMiLCJvbmUiLCJhdXRob3IiLCJmaWVsZHMiLCJhbm5vdW5jZW1lbnRFbmdhZ2VtZW50c1JlbGF0aW9ucyIsImFubm91bmNlbWVudCIsInVzZXIiLCJhbm5vdW5jZW1lbnRDb21tZW50c1JlbGF0aW9ucyIsInRhcmdldEFkbWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/clerk.ts":
/*!*******************************!*\
  !*** ./lib/services/clerk.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   syncClerkUser: () => (/* binding */ syncClerkUser),\n/* harmony export */   verifyClerkToken: () => (/* binding */ verifyClerkToken)\n/* harmony export */ });\n/* harmony import */ var _clerk_backend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @clerk/backend */ \"(rsc)/./node_modules/@clerk/backend/dist/index.mjs\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm */ \"drizzle-orm\");\n/* harmony import */ var _config_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/env */ \"(rsc)/./lib/config/env.ts\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config/db */ \"(rsc)/./lib/config/db.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema */ \"(rsc)/./lib/schema.ts\");\n/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/users */ \"(rsc)/./lib/data/users.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([drizzle_orm__WEBPACK_IMPORTED_MODULE_1__, _config_db__WEBPACK_IMPORTED_MODULE_3__, _schema__WEBPACK_IMPORTED_MODULE_4__, _data_users__WEBPACK_IMPORTED_MODULE_5__]);\n([drizzle_orm__WEBPACK_IMPORTED_MODULE_1__, _config_db__WEBPACK_IMPORTED_MODULE_3__, _schema__WEBPACK_IMPORTED_MODULE_4__, _data_users__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nlet cachedSecretKey = null;\nlet clerkClient = null;\nfunction getSecretKey() {\n    if (cachedSecretKey) {\n        return cachedSecretKey;\n    }\n    const env = (0,_config_env__WEBPACK_IMPORTED_MODULE_2__.getEnvConfig)();\n    if (!env.CLERK_SECRET_KEY) {\n        throw new Error('CLERK_SECRET_KEY is not configured');\n    }\n    cachedSecretKey = env.CLERK_SECRET_KEY;\n    return cachedSecretKey;\n}\nfunction getClerkClient() {\n    if (clerkClient) {\n        return clerkClient;\n    }\n    clerkClient = (0,_clerk_backend__WEBPACK_IMPORTED_MODULE_0__.createClerkClient)({\n        secretKey: getSecretKey()\n    });\n    return clerkClient;\n}\nasync function verifyClerkToken(token) {\n    try {\n        const payload = await (0,_clerk_backend__WEBPACK_IMPORTED_MODULE_0__.verifyToken)(token, {\n            secretKey: getSecretKey()\n        });\n        return payload;\n    } catch (error) {\n        console.warn('Clerk token verification failed:', error);\n        return null;\n    }\n}\nasync function syncClerkUser(claims) {\n    const db = (0,_config_db__WEBPACK_IMPORTED_MODULE_3__.getDb)();\n    const externalId = claims.sub;\n    if (!externalId) {\n        throw new Error('Clerk token missing subject');\n    }\n    // Try to get email from token claims first (faster than API call)\n    let email = claims.email;\n    let displayName = claims.username || claims.first_name || claims.last_name || null;\n    // Only call Clerk API if we don't have email in claims\n    if (!email) {\n        const clerk = getClerkClient();\n        const clerkUser = await clerk.users.getUser(externalId);\n        email = clerkUser.emailAddresses.find((e)=>e.id === clerkUser.primaryEmailAddressId)?.emailAddress;\n        if (!email) {\n            throw new Error('Clerk user has no email address');\n        }\n        displayName = clerkUser.username || clerkUser.firstName || clerkUser.lastName || null;\n    }\n    // First, try to find by clerk_id (most common case, uses index)\n    const [existingByClerkId] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_4__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.clerkId, externalId)).limit(1);\n    if (existingByClerkId) {\n        // Only update if email or username changed, or lastLogin is old (> 1 hour)\n        const needsUpdate = existingByClerkId.email !== email || existingByClerkId.username !== displayName || !existingByClerkId.lastLogin || Date.now() - new Date(existingByClerkId.lastLogin).getTime() > 3600000; // 1 hour\n        if (needsUpdate) {\n            const [updated] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_4__.users).set({\n                email,\n                username: displayName ?? existingByClerkId.username,\n                lastLogin: new Date()\n            }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.id, existingByClerkId.id)).returning();\n            return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(updated ?? existingByClerkId);\n        }\n        // No update needed, return existing user\n        return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(existingByClerkId);\n    }\n    // If not found by clerk_id, check if email exists (uses index)\n    const [existingByEmail] = await db.select().from(_schema__WEBPACK_IMPORTED_MODULE_4__.users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.email, email)).limit(1);\n    if (existingByEmail) {\n        // Update the existing user with the new clerk_id\n        const [updated] = await db.update(_schema__WEBPACK_IMPORTED_MODULE_4__.users).set({\n            clerkId: externalId,\n            username: displayName ?? existingByEmail.username,\n            lastLogin: new Date()\n        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_1__.eq)(_schema__WEBPACK_IMPORTED_MODULE_4__.users.id, existingByEmail.id)).returning();\n        return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(updated);\n    }\n    // Create new user\n    const [created] = await db.insert(_schema__WEBPACK_IMPORTED_MODULE_4__.users).values({\n        clerkId: externalId,\n        email,\n        username: displayName,\n        role: 'user',\n        lastLogin: new Date()\n    }).returning();\n    return (0,_data_users__WEBPACK_IMPORTED_MODULE_5__.mapUser)(created);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDekMsT0FBT3BDLG9EQUFPQSxDQUFDb0M7SUFDakI7SUFFQSwrREFBK0Q7SUFDL0QsTUFBTSxDQUFDZSxnQkFBZ0IsR0FBRyxNQUFNbEMsR0FBR29CLE1BQU0sR0FBR0MsSUFBSSxDQUFDdkMsMENBQUtBLEVBQUV3QyxLQUFLLENBQUMzQywrQ0FBRUEsQ0FBQ0csMENBQUtBLENBQUNxQixLQUFLLEVBQUVBLFFBQVFxQixLQUFLLENBQUM7SUFDNUYsSUFBSVUsaUJBQWlCO1FBQ25CLGlEQUFpRDtRQUNqRCxNQUFNLENBQUNKLFFBQVEsR0FBRyxNQUFNOUIsR0FDckIrQixNQUFNLENBQUNqRCwwQ0FBS0EsRUFDWmtELEdBQUcsQ0FBQztZQUNIVCxTQUFTdEI7WUFDVEksVUFBVUQsZUFBZThCLGdCQUFnQjdCLFFBQVE7WUFDakRxQixXQUFXLElBQUlDO1FBQ2pCLEdBQ0NMLEtBQUssQ0FBQzNDLCtDQUFFQSxDQUFDRywwQ0FBS0EsQ0FBQ2dDLEVBQUUsRUFBRW9CLGdCQUFnQnBCLEVBQUUsR0FDckNtQixTQUFTO1FBRVosT0FBT2xELG9EQUFPQSxDQUFDK0M7SUFDakI7SUFFQSxrQkFBa0I7SUFDbEIsTUFBTSxDQUFDSyxRQUFRLEdBQUcsTUFBTW5DLEdBQ3JCb0MsTUFBTSxDQUFDdEQsMENBQUtBLEVBQ1p1RCxNQUFNLENBQUM7UUFDTmQsU0FBU3RCO1FBQ1RFO1FBQ0FFLFVBQVVEO1FBQ1ZrQyxNQUFNO1FBQ05aLFdBQVcsSUFBSUM7SUFDakIsR0FDQ00sU0FBUztJQUVaLE9BQU9sRCxvREFBT0EsQ0FBQ29EO0FBQ2pCIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFxzZXJ2aWNlc1xcY2xlcmsudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xlcmtDbGllbnQsIHZlcmlmeVRva2VuIH0gZnJvbSAnQGNsZXJrL2JhY2tlbmQnO1xyXG5pbXBvcnQgdHlwZSB7IEp3dFBheWxvYWQgfSBmcm9tICdAY2xlcmsvdHlwZXMnO1xyXG5pbXBvcnQgeyBlcSB9IGZyb20gJ2RyaXp6bGUtb3JtJztcclxuaW1wb3J0IHsgZ2V0RW52Q29uZmlnIH0gZnJvbSAnLi4vY29uZmlnL2Vudic7XHJcbmltcG9ydCB7IGdldERiIH0gZnJvbSAnLi4vY29uZmlnL2RiJztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9zY2hlbWEnO1xyXG5pbXBvcnQgeyBtYXBVc2VyIH0gZnJvbSAnLi4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB0eXBlIHsgQXV0aGVudGljYXRlZFVzZXIgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG50eXBlIENsZXJrSnd0UGF5bG9hZCA9IEp3dFBheWxvYWQgJiB7XHJcbiAgc3ViOiBzdHJpbmc7XHJcbiAgZW1haWw/OiBzdHJpbmc7XHJcbiAgZmlyc3RfbmFtZT86IHN0cmluZztcclxuICBsYXN0X25hbWU/OiBzdHJpbmc7XHJcbiAgdXNlcm5hbWU/OiBzdHJpbmc7XHJcbn07XHJcblxyXG5sZXQgY2FjaGVkU2VjcmV0S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxubGV0IGNsZXJrQ2xpZW50OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGVya0NsaWVudD4gfCBudWxsID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIGdldFNlY3JldEtleSgpOiBzdHJpbmcge1xyXG4gIGlmIChjYWNoZWRTZWNyZXRLZXkpIHtcclxuICAgIHJldHVybiBjYWNoZWRTZWNyZXRLZXk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlbnYgPSBnZXRFbnZDb25maWcoKTtcclxuICBpZiAoIWVudi5DTEVSS19TRUNSRVRfS0VZKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NMRVJLX1NFQ1JFVF9LRVkgaXMgbm90IGNvbmZpZ3VyZWQnKTtcclxuICB9XHJcbiAgY2FjaGVkU2VjcmV0S2V5ID0gZW52LkNMRVJLX1NFQ1JFVF9LRVk7XHJcbiAgcmV0dXJuIGNhY2hlZFNlY3JldEtleSE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENsZXJrQ2xpZW50KCkge1xyXG4gIGlmIChjbGVya0NsaWVudCkge1xyXG4gICAgcmV0dXJuIGNsZXJrQ2xpZW50O1xyXG4gIH1cclxuICBcclxuICBjbGVya0NsaWVudCA9IGNyZWF0ZUNsZXJrQ2xpZW50KHtcclxuICAgIHNlY3JldEtleTogZ2V0U2VjcmV0S2V5KCksXHJcbiAgfSk7XHJcbiAgXHJcbiAgcmV0dXJuIGNsZXJrQ2xpZW50O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5Q2xlcmtUb2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxDbGVya0p3dFBheWxvYWQgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbiwge1xyXG4gICAgICBzZWNyZXRLZXk6IGdldFNlY3JldEtleSgpLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcGF5bG9hZCBhcyBDbGVya0p3dFBheWxvYWQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybignQ2xlcmsgdG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzeW5jQ2xlcmtVc2VyKGNsYWltczogQ2xlcmtKd3RQYXlsb2FkKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcclxuICBjb25zdCBleHRlcm5hbElkID0gY2xhaW1zLnN1YjtcclxuICBpZiAoIWV4dGVybmFsSWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQ2xlcmsgdG9rZW4gbWlzc2luZyBzdWJqZWN0Jyk7XHJcbiAgfVxyXG5cclxuICAvLyBUcnkgdG8gZ2V0IGVtYWlsIGZyb20gdG9rZW4gY2xhaW1zIGZpcnN0IChmYXN0ZXIgdGhhbiBBUEkgY2FsbClcclxuICBsZXQgZW1haWwgPSBjbGFpbXMuZW1haWw7XHJcbiAgbGV0IGRpc3BsYXlOYW1lID0gY2xhaW1zLnVzZXJuYW1lIHx8IGNsYWltcy5maXJzdF9uYW1lIHx8IGNsYWltcy5sYXN0X25hbWUgfHwgbnVsbDtcclxuXHJcbiAgLy8gT25seSBjYWxsIENsZXJrIEFQSSBpZiB3ZSBkb24ndCBoYXZlIGVtYWlsIGluIGNsYWltc1xyXG4gIGlmICghZW1haWwpIHtcclxuICAgIGNvbnN0IGNsZXJrID0gZ2V0Q2xlcmtDbGllbnQoKTtcclxuICAgIGNvbnN0IGNsZXJrVXNlciA9IGF3YWl0IGNsZXJrLnVzZXJzLmdldFVzZXIoZXh0ZXJuYWxJZCk7XHJcbiAgICBlbWFpbCA9IGNsZXJrVXNlci5lbWFpbEFkZHJlc3Nlcy5maW5kKGUgPT4gZS5pZCA9PT0gY2xlcmtVc2VyLnByaW1hcnlFbWFpbEFkZHJlc3NJZCk/LmVtYWlsQWRkcmVzcztcclxuICAgIFxyXG4gICAgaWYgKCFlbWFpbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsZXJrIHVzZXIgaGFzIG5vIGVtYWlsIGFkZHJlc3MnKTtcclxuICAgIH1cclxuICAgIGRpc3BsYXlOYW1lID0gY2xlcmtVc2VyLnVzZXJuYW1lIHx8IGNsZXJrVXNlci5maXJzdE5hbWUgfHwgY2xlcmtVc2VyLmxhc3ROYW1lIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBGaXJzdCwgdHJ5IHRvIGZpbmQgYnkgY2xlcmtfaWQgKG1vc3QgY29tbW9uIGNhc2UsIHVzZXMgaW5kZXgpXHJcbiAgY29uc3QgW2V4aXN0aW5nQnlDbGVya0lkXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKGVxKHVzZXJzLmNsZXJrSWQsIGV4dGVybmFsSWQpKS5saW1pdCgxKTtcclxuICBpZiAoZXhpc3RpbmdCeUNsZXJrSWQpIHtcclxuICAgIC8vIE9ubHkgdXBkYXRlIGlmIGVtYWlsIG9yIHVzZXJuYW1lIGNoYW5nZWQsIG9yIGxhc3RMb2dpbiBpcyBvbGQgKD4gMSBob3VyKVxyXG4gICAgY29uc3QgbmVlZHNVcGRhdGUgPSBcclxuICAgICAgZXhpc3RpbmdCeUNsZXJrSWQuZW1haWwgIT09IGVtYWlsIHx8IFxyXG4gICAgICBleGlzdGluZ0J5Q2xlcmtJZC51c2VybmFtZSAhPT0gZGlzcGxheU5hbWUgfHxcclxuICAgICAgIWV4aXN0aW5nQnlDbGVya0lkLmxhc3RMb2dpbiB8fFxyXG4gICAgICAoRGF0ZS5ub3coKSAtIG5ldyBEYXRlKGV4aXN0aW5nQnlDbGVya0lkLmxhc3RMb2dpbikuZ2V0VGltZSgpKSA+IDM2MDAwMDA7IC8vIDEgaG91clxyXG5cclxuICAgIGlmIChuZWVkc1VwZGF0ZSkge1xyXG4gICAgICBjb25zdCBbdXBkYXRlZF0gPSBhd2FpdCBkYlxyXG4gICAgICAgIC51cGRhdGUodXNlcnMpXHJcbiAgICAgICAgLnNldCh7XHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHVzZXJuYW1lOiBkaXNwbGF5TmFtZSA/PyBleGlzdGluZ0J5Q2xlcmtJZC51c2VybmFtZSxcclxuICAgICAgICAgIGxhc3RMb2dpbjogbmV3IERhdGUoKSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVyZShlcSh1c2Vycy5pZCwgZXhpc3RpbmdCeUNsZXJrSWQuaWQhKSlcclxuICAgICAgICAucmV0dXJuaW5nKCk7XHJcblxyXG4gICAgICByZXR1cm4gbWFwVXNlcih1cGRhdGVkID8/IGV4aXN0aW5nQnlDbGVya0lkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTm8gdXBkYXRlIG5lZWRlZCwgcmV0dXJuIGV4aXN0aW5nIHVzZXJcclxuICAgIHJldHVybiBtYXBVc2VyKGV4aXN0aW5nQnlDbGVya0lkKTtcclxuICB9XHJcblxyXG4gIC8vIElmIG5vdCBmb3VuZCBieSBjbGVya19pZCwgY2hlY2sgaWYgZW1haWwgZXhpc3RzICh1c2VzIGluZGV4KVxyXG4gIGNvbnN0IFtleGlzdGluZ0J5RW1haWxdID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuZW1haWwsIGVtYWlsKSkubGltaXQoMSk7XHJcbiAgaWYgKGV4aXN0aW5nQnlFbWFpbCkge1xyXG4gICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyB1c2VyIHdpdGggdGhlIG5ldyBjbGVya19pZFxyXG4gICAgY29uc3QgW3VwZGF0ZWRdID0gYXdhaXQgZGJcclxuICAgICAgLnVwZGF0ZSh1c2VycylcclxuICAgICAgLnNldCh7XHJcbiAgICAgICAgY2xlcmtJZDogZXh0ZXJuYWxJZCxcclxuICAgICAgICB1c2VybmFtZTogZGlzcGxheU5hbWUgPz8gZXhpc3RpbmdCeUVtYWlsLnVzZXJuYW1lLFxyXG4gICAgICAgIGxhc3RMb2dpbjogbmV3IERhdGUoKSxcclxuICAgICAgfSlcclxuICAgICAgLndoZXJlKGVxKHVzZXJzLmlkLCBleGlzdGluZ0J5RW1haWwuaWQhKSlcclxuICAgICAgLnJldHVybmluZygpO1xyXG5cclxuICAgIHJldHVybiBtYXBVc2VyKHVwZGF0ZWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIG5ldyB1c2VyXHJcbiAgY29uc3QgW2NyZWF0ZWRdID0gYXdhaXQgZGJcclxuICAgIC5pbnNlcnQodXNlcnMpXHJcbiAgICAudmFsdWVzKHtcclxuICAgICAgY2xlcmtJZDogZXh0ZXJuYWxJZCxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIHVzZXJuYW1lOiBkaXNwbGF5TmFtZSxcclxuICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICBsYXN0TG9naW46IG5ldyBEYXRlKCksXHJcbiAgICB9KVxyXG4gICAgLnJldHVybmluZygpO1xyXG5cclxuICByZXR1cm4gbWFwVXNlcihjcmVhdGVkKTtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xlcmtDbGllbnQiLCJ2ZXJpZnlUb2tlbiIsImVxIiwiZ2V0RW52Q29uZmlnIiwiZ2V0RGIiLCJ1c2VycyIsIm1hcFVzZXIiLCJjYWNoZWRTZWNyZXRLZXkiLCJjbGVya0NsaWVudCIsImdldFNlY3JldEtleSIsImVudiIsIkNMRVJLX1NFQ1JFVF9LRVkiLCJFcnJvciIsImdldENsZXJrQ2xpZW50Iiwic2VjcmV0S2V5IiwidmVyaWZ5Q2xlcmtUb2tlbiIsInRva2VuIiwicGF5bG9hZCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJzeW5jQ2xlcmtVc2VyIiwiY2xhaW1zIiwiZGIiLCJleHRlcm5hbElkIiwic3ViIiwiZW1haWwiLCJkaXNwbGF5TmFtZSIsInVzZXJuYW1lIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImNsZXJrIiwiY2xlcmtVc2VyIiwiZ2V0VXNlciIsImVtYWlsQWRkcmVzc2VzIiwiZmluZCIsImUiLCJpZCIsInByaW1hcnlFbWFpbEFkZHJlc3NJZCIsImVtYWlsQWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZXhpc3RpbmdCeUNsZXJrSWQiLCJzZWxlY3QiLCJmcm9tIiwid2hlcmUiLCJjbGVya0lkIiwibGltaXQiLCJuZWVkc1VwZGF0ZSIsImxhc3RMb2dpbiIsIkRhdGUiLCJub3ciLCJnZXRUaW1lIiwidXBkYXRlZCIsInVwZGF0ZSIsInNldCIsInJldHVybmluZyIsImV4aXN0aW5nQnlFbWFpbCIsImNyZWF0ZWQiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJyb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/clerk.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/errors.ts":
/*!*****************************!*\
  !*** ./lib/utils/errors.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiError: () => (/* binding */ ApiError),\n/* harmony export */   BadRequestError: () => (/* binding */ BadRequestError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   ForbiddenError: () => (/* binding */ ForbiddenError),\n/* harmony export */   InternalServerError: () => (/* binding */ InternalServerError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   UnauthorizedError: () => (/* binding */ UnauthorizedError),\n/* harmony export */   formatErrorResponse: () => (/* binding */ formatErrorResponse)\n/* harmony export */ });\nclass ApiError extends Error {\n    constructor(statusCode, message, code, details){\n        super(message);\n        this.name = 'ApiError';\n        this.statusCode = statusCode;\n        this.code = code;\n        this.details = details;\n    }\n}\nclass NotFoundError extends ApiError {\n    constructor(resource, id){\n        super(404, `${resource}${id ? ` with id ${id}` : ''} not found`, 'NOT_FOUND');\n    }\n}\nclass BadRequestError extends ApiError {\n    constructor(message, details){\n        super(400, message, 'BAD_REQUEST', details);\n    }\n}\nclass UnauthorizedError extends ApiError {\n    constructor(message = 'Unauthorized'){\n        super(401, message, 'UNAUTHORIZED');\n    }\n}\nclass ForbiddenError extends ApiError {\n    constructor(message = 'Forbidden'){\n        super(403, message, 'FORBIDDEN');\n    }\n}\nclass ConflictError extends ApiError {\n    constructor(message, details){\n        super(409, message, 'CONFLICT', details);\n    }\n}\nclass InternalServerError extends ApiError {\n    constructor(message = 'Internal server error', details){\n        super(500, message, 'INTERNAL_SERVER_ERROR', details);\n    }\n}\nfunction formatErrorResponse(error) {\n    if (error instanceof ApiError) {\n        return {\n            success: false,\n            error: error.message,\n            message: error.message,\n            code: error.code,\n            details: error.details\n        };\n    }\n    if (error instanceof Error) {\n        return {\n            success: false,\n            error: error.message,\n            message: error.message\n        };\n    }\n    return {\n        success: false,\n        error: 'An unexpected error occurred',\n        message: 'An unexpected error occurred'\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvZXJyb3JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsaUJBQWlCQztJQUs1QkMsWUFBWUMsVUFBa0IsRUFBRUMsT0FBZSxFQUFFQyxJQUFhLEVBQUVDLE9BQWlCLENBQUU7UUFDakYsS0FBSyxDQUFDRjtRQUNOLElBQUksQ0FBQ0csSUFBSSxHQUFHO1FBQ1osSUFBSSxDQUFDSixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0UsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtJQUNqQjtBQUNGO0FBRU8sTUFBTUUsc0JBQXNCUjtJQUNqQ0UsWUFBWU8sUUFBZ0IsRUFBRUMsRUFBb0IsQ0FBRTtRQUNsRCxLQUFLLENBQUMsS0FBSyxHQUFHRCxXQUFXQyxLQUFLLENBQUMsU0FBUyxFQUFFQSxJQUFJLEdBQUcsR0FBRyxVQUFVLENBQUMsRUFBRTtJQUNuRTtBQUNGO0FBRU8sTUFBTUMsd0JBQXdCWDtJQUNuQ0UsWUFBWUUsT0FBZSxFQUFFRSxPQUFpQixDQUFFO1FBQzlDLEtBQUssQ0FBQyxLQUFLRixTQUFTLGVBQWVFO0lBQ3JDO0FBQ0Y7QUFFTyxNQUFNTSwwQkFBMEJaO0lBQ3JDRSxZQUFZRSxVQUFVLGNBQWMsQ0FBRTtRQUNwQyxLQUFLLENBQUMsS0FBS0EsU0FBUztJQUN0QjtBQUNGO0FBRU8sTUFBTVMsdUJBQXVCYjtJQUNsQ0UsWUFBWUUsVUFBVSxXQUFXLENBQUU7UUFDakMsS0FBSyxDQUFDLEtBQUtBLFNBQVM7SUFDdEI7QUFDRjtBQUVPLE1BQU1VLHNCQUFzQmQ7SUFDakNFLFlBQVlFLE9BQWUsRUFBRUUsT0FBaUIsQ0FBRTtRQUM5QyxLQUFLLENBQUMsS0FBS0YsU0FBUyxZQUFZRTtJQUNsQztBQUNGO0FBRU8sTUFBTVMsNEJBQTRCZjtJQUN2Q0UsWUFBWUUsVUFBVSx1QkFBdUIsRUFBRUUsT0FBaUIsQ0FBRTtRQUNoRSxLQUFLLENBQUMsS0FBS0YsU0FBUyx5QkFBeUJFO0lBQy9DO0FBQ0Y7QUFFTyxTQUFTVSxvQkFBb0JDLEtBQWM7SUFDaEQsSUFBSUEsaUJBQWlCakIsVUFBVTtRQUM3QixPQUFPO1lBQ0xrQixTQUFTO1lBQ1RELE9BQU9BLE1BQU1iLE9BQU87WUFDcEJBLFNBQVNhLE1BQU1iLE9BQU87WUFDdEJDLE1BQU1ZLE1BQU1aLElBQUk7WUFDaEJDLFNBQVNXLE1BQU1YLE9BQU87UUFDeEI7SUFDRjtJQUVBLElBQUlXLGlCQUFpQmhCLE9BQU87UUFDMUIsT0FBTztZQUNMaUIsU0FBUztZQUNURCxPQUFPQSxNQUFNYixPQUFPO1lBQ3BCQSxTQUFTYSxNQUFNYixPQUFPO1FBQ3hCO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xjLFNBQVM7UUFDVEQsT0FBTztRQUNQYixTQUFTO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsiRTpcXFByb2plY3RcXHNzdF9hbm5vdW5jZW1lbnRcXGxpYlxcdXRpbHNcXGVycm9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQXBpRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAgZGV0YWlscz86IHVua25vd247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0YXR1c0NvZGU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nLCBjb2RlPzogc3RyaW5nLCBkZXRhaWxzPzogdW5rbm93bikge1xyXG4gICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICB0aGlzLm5hbWUgPSAnQXBpRXJyb3InO1xyXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XHJcbiAgY29uc3RydWN0b3IocmVzb3VyY2U6IHN0cmluZywgaWQ/OiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgIHN1cGVyKDQwNCwgYCR7cmVzb3VyY2V9JHtpZCA/IGAgd2l0aCBpZCAke2lkfWAgOiAnJ30gbm90IGZvdW5kYCwgJ05PVF9GT1VORCcpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGRldGFpbHM/OiB1bmtub3duKSB7XHJcbiAgICBzdXBlcig0MDAsIG1lc3NhZ2UsICdCQURfUkVRVUVTVCcsIGRldGFpbHMpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVuYXV0aG9yaXplZEVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnVW5hdXRob3JpemVkJykge1xyXG4gICAgc3VwZXIoNDAxLCBtZXNzYWdlLCAnVU5BVVRIT1JJWkVEJyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRm9yYmlkZGVuRXJyb3IgZXh0ZW5kcyBBcGlFcnJvciB7XHJcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdGb3JiaWRkZW4nKSB7XHJcbiAgICBzdXBlcig0MDMsIG1lc3NhZ2UsICdGT1JCSURERU4nKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBpRXJyb3Ige1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IHVua25vd24pIHtcclxuICAgIHN1cGVyKDQwOSwgbWVzc2FnZSwgJ0NPTkZMSUNUJywgZGV0YWlscyk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXJ2ZXJFcnJvciBleHRlbmRzIEFwaUVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGRldGFpbHM/OiB1bmtub3duKSB7XHJcbiAgICBzdXBlcig1MDAsIG1lc3NhZ2UsICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLCBkZXRhaWxzKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFcnJvclJlc3BvbnNlKGVycm9yOiB1bmtub3duKSB7XHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXBpRXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgY29kZTogZXJyb3IuY29kZSxcclxuICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcclxuICAgIH0gYXMgY29uc3Q7XHJcbiAgfVxyXG5cclxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgfSBhcyBjb25zdDtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgIGVycm9yOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXHJcbiAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcsXHJcbiAgfSBhcyBjb25zdDtcclxufVxyXG4iXSwibmFtZXMiOlsiQXBpRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJjb2RlIiwiZGV0YWlscyIsIm5hbWUiLCJOb3RGb3VuZEVycm9yIiwicmVzb3VyY2UiLCJpZCIsIkJhZFJlcXVlc3RFcnJvciIsIlVuYXV0aG9yaXplZEVycm9yIiwiRm9yYmlkZGVuRXJyb3IiLCJDb25mbGljdEVycm9yIiwiSW50ZXJuYWxTZXJ2ZXJFcnJvciIsImZvcm1hdEVycm9yUmVzcG9uc2UiLCJlcnJvciIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/errors.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/roleUtils.ts":
/*!********************************!*\
  !*** ./lib/utils/roleUtils.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canManageUsers: () => (/* binding */ canManageUsers),\n/* harmony export */   getRoleDisplay: () => (/* binding */ getRoleDisplay),\n/* harmony export */   hasAdminAccess: () => (/* binding */ hasAdminAccess),\n/* harmony export */   normalizeUserRole: () => (/* binding */ normalizeUserRole)\n/* harmony export */ });\n/**\r\n * Normalize role from database format to frontend format\r\n * Handles backward compatibility with old role names\r\n */ function normalizeUserRole(role, isAdmin) {\n    if (!role) {\n        return isAdmin ? 'admin' : 'student';\n    }\n    // Handle old format mappings\n    const roleMapping = {\n        'user': 'student',\n        'superadmin': 'super_admin',\n        'student': 'student',\n        'student_admin': 'student_admin',\n        'admin': 'admin',\n        'super_admin': 'super_admin'\n    };\n    return roleMapping[role] || (isAdmin ? 'admin' : 'student');\n}\n/**\r\n * Check if user has admin-level access\r\n */ function hasAdminAccess(role) {\n    return [\n        'student_admin',\n        'admin',\n        'super_admin'\n    ].includes(role);\n}\n/**\r\n * Check if user can manage other users (super admin only)\r\n */ function canManageUsers(role) {\n    return role === 'super_admin';\n}\n/**\r\n * Get role display name\r\n */ function getRoleDisplay(role) {\n    const displays = {\n        student: 'Student',\n        student_admin: 'Student Admin',\n        admin: 'Admin',\n        super_admin: 'Super Admin'\n    };\n    return displays[role] || 'Student';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMvcm9sZVV0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQSxrQkFBa0JDLElBQXdCLEVBQUVDLE9BQWlCO0lBQzNFLElBQUksQ0FBQ0QsTUFBTTtRQUNULE9BQU9DLFVBQVUsVUFBVTtJQUM3QjtJQUVBLDZCQUE2QjtJQUM3QixNQUFNQyxjQUF3QztRQUM1QyxRQUFRO1FBQ1IsY0FBYztRQUNkLFdBQVc7UUFDWCxpQkFBaUI7UUFDakIsU0FBUztRQUNULGVBQWU7SUFDakI7SUFFQSxPQUFPQSxXQUFXLENBQUNGLEtBQUssSUFBS0MsQ0FBQUEsVUFBVSxVQUFVLFNBQVE7QUFDM0Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFLGVBQWVILElBQWM7SUFDM0MsT0FBTztRQUFDO1FBQWlCO1FBQVM7S0FBYyxDQUFDSSxRQUFRLENBQUNKO0FBQzVEO0FBRUE7O0NBRUMsR0FDTSxTQUFTSyxlQUFlTCxJQUFjO0lBQzNDLE9BQU9BLFNBQVM7QUFDbEI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNNLGVBQWVOLElBQWM7SUFDM0MsTUFBTU8sV0FBcUM7UUFDekNDLFNBQVM7UUFDVEMsZUFBZTtRQUNmQyxPQUFPO1FBQ1BDLGFBQWE7SUFDZjtJQUNBLE9BQU9KLFFBQVEsQ0FBQ1AsS0FBSyxJQUFJO0FBQzNCIiwic291cmNlcyI6WyJFOlxcUHJvamVjdFxcc3N0X2Fubm91bmNlbWVudFxcbGliXFx1dGlsc1xccm9sZVV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVXNlclJvbGUgfSBmcm9tICcuLi90eXBlcy9pbmRleCc7XHJcblxyXG4vKipcclxuICogTm9ybWFsaXplIHJvbGUgZnJvbSBkYXRhYmFzZSBmb3JtYXQgdG8gZnJvbnRlbmQgZm9ybWF0XHJcbiAqIEhhbmRsZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIG9sZCByb2xlIG5hbWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplVXNlclJvbGUocm9sZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpc0FkbWluPzogYm9vbGVhbik6IFVzZXJSb2xlIHtcclxuICBpZiAoIXJvbGUpIHtcclxuICAgIHJldHVybiBpc0FkbWluID8gJ2FkbWluJyA6ICdzdHVkZW50JztcclxuICB9XHJcbiAgXHJcbiAgLy8gSGFuZGxlIG9sZCBmb3JtYXQgbWFwcGluZ3NcclxuICBjb25zdCByb2xlTWFwcGluZzogUmVjb3JkPHN0cmluZywgVXNlclJvbGU+ID0ge1xyXG4gICAgJ3VzZXInOiAnc3R1ZGVudCcsXHJcbiAgICAnc3VwZXJhZG1pbic6ICdzdXBlcl9hZG1pbicsXHJcbiAgICAnc3R1ZGVudCc6ICdzdHVkZW50JyxcclxuICAgICdzdHVkZW50X2FkbWluJzogJ3N0dWRlbnRfYWRtaW4nLCBcclxuICAgICdhZG1pbic6ICdhZG1pbicsXHJcbiAgICAnc3VwZXJfYWRtaW4nOiAnc3VwZXJfYWRtaW4nXHJcbiAgfTtcclxuICBcclxuICByZXR1cm4gcm9sZU1hcHBpbmdbcm9sZV0gfHwgKGlzQWRtaW4gPyAnYWRtaW4nIDogJ3N0dWRlbnQnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHVzZXIgaGFzIGFkbWluLWxldmVsIGFjY2Vzc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FkbWluQWNjZXNzKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIFsnc3R1ZGVudF9hZG1pbicsICdhZG1pbicsICdzdXBlcl9hZG1pbiddLmluY2x1ZGVzKHJvbGUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBjYW4gbWFuYWdlIG90aGVyIHVzZXJzIChzdXBlciBhZG1pbiBvbmx5KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbk1hbmFnZVVzZXJzKHJvbGU6IFVzZXJSb2xlKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHJvbGUgPT09ICdzdXBlcl9hZG1pbic7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgcm9sZSBkaXNwbGF5IG5hbWVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb2xlRGlzcGxheShyb2xlOiBVc2VyUm9sZSk6IHN0cmluZyB7XHJcbiAgY29uc3QgZGlzcGxheXM6IFJlY29yZDxVc2VyUm9sZSwgc3RyaW5nPiA9IHtcclxuICAgIHN0dWRlbnQ6ICdTdHVkZW50JyxcclxuICAgIHN0dWRlbnRfYWRtaW46ICdTdHVkZW50IEFkbWluJyxcclxuICAgIGFkbWluOiAnQWRtaW4nLFxyXG4gICAgc3VwZXJfYWRtaW46ICdTdXBlciBBZG1pbidcclxuICB9O1xyXG4gIHJldHVybiBkaXNwbGF5c1tyb2xlXSB8fCAnU3R1ZGVudCc7XHJcbn1cclxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVVzZXJSb2xlIiwicm9sZSIsImlzQWRtaW4iLCJyb2xlTWFwcGluZyIsImhhc0FkbWluQWNjZXNzIiwiaW5jbHVkZXMiLCJjYW5NYW5hZ2VVc2VycyIsImdldFJvbGVEaXNwbGF5IiwiZGlzcGxheXMiLCJzdHVkZW50Iiwic3R1ZGVudF9hZG1pbiIsImFkbWluIiwic3VwZXJfYWRtaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/roleUtils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@clerk","vendor-chunks/tslib","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/cookie","vendor-chunks/snakecase-keys"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=E%3A%5CProject%5Csst_announcement%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CProject%5Csst_announcement&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();