"use strict";(()=>{var e={};e.id=73,e.ids=[73],e.modules={846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},1737:e=>{e.exports=import("drizzle-orm")},1214:e=>{e.exports=import("drizzle-orm/node-postgres")},8025:e=>{e.exports=import("drizzle-orm/pg-core")},4939:e=>{e.exports=import("pg")},7598:e=>{e.exports=require("node:crypto")},8959:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{patchFetch:()=>u,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>c});var n=t(2706),s=t(8203),a=t(5994),i=t(7007),p=e([i]);i=(p.then?(await p)():p)[0];let d=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/profile/route",pathname:"/api/profile",filename:"route",bundlePath:"app/api/profile/route"},resolvedPagePath:"E:\\Project\\sst_announcement\\app\\api\\profile\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:l,workUnitAsyncStorage:c,serverHooks:m}=d;function u(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:c})}o()}catch(e){o(e)}})},7007:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{GET:()=>u,OPTIONS:()=>d});var n=t(9187),s=t(4272),a=t(517),i=t(1508),p=e([s]);async function u(e){try{await (0,a.ay)(e,a.Nw);let r=await (0,s.oC)(e,{enforceDomain:!0}),t=(0,i.t9)(r.role,r.is_admin);return n.NextResponse.json({success:!0,data:{id:r.id,email:r.email,role:t,google_id:r.google_id,username:r.username,is_admin:r.is_admin??(0,i.uu)(t),created_at:r.created_at,last_login:r.last_login}})}catch(e){return console.error("âŒ Profile error:",e),n.NextResponse.json({success:!1,error:e.message||"Authentication required"},{status:e.status||401})}}async function d(){return new n.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}s=(p.then?(await p)():p)[0],o()}catch(e){o(e)}})},517:(e,r,t)=>{t.d(r,{Nw:()=>a,ay:()=>s,uZ:()=>i});var o=t(4218);let n=new Map;async function s(e,r){let t=function(e){let r=e.headers.get("x-forwarded-for");return r?r.split(",")[0]?.trim()||"unknown":e.headers.get("x-real-ip")||e.ip||"unknown"}(e),s=`${r.keyPrefix}:${t}`,a=Date.now(),i=n.get(s);if(!i||i.expiresAt<a){n.set(s,{count:1,expiresAt:a+r.windowMs});return}if(i.count>=r.max)throw new o.qQ("Too many requests, please try again later.");i.count+=1,n.set(s,i)}let a={windowMs:9e5,max:100,keyPrefix:"general"},i={windowMs:9e5,max:200,keyPrefix:"admin"}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[680,38,883,684],()=>t(8959));module.exports=o})();